!function(e,i){if("object"==typeof exports&&"object"==typeof module)module.exports=i(require("gloperate"));else if("function"==typeof define&&define.amd)define(["gloperate"],i);else{var t="object"==typeof exports?i(require("gloperate")):i(e.gloperate);for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(self,(e=>(()=>{var i={526:(e,i,t)=>{"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Demo=void 0;const n=t(160);class r extends n.Initializable{showSpinner(){document.getElementsByClassName("spinner").item(0).style.display="inline"}hideSpinner(){document.getElementsByClassName("spinner").item(0).style.display="none"}expose(){window.canvas=this.canvas,window.context=this.canvas.context,window.controller=this.canvas.controller,window.renderer=this.renderer}initialize(e){const i=this.onInitialize(e);return this.renderer.loadingStatus$.subscribe((e=>{e===n.LoadingStatus.Finished?this.hideSpinner():e===n.LoadingStatus.Started&&this.showSpinner()})),this.expose(),i}uninitialize(){this.onUninitialize()}enableFullscreenOnCtrlClick(){const e=this.canvas.element;e.addEventListener("click",(i=>{i.ctrlKey&&n.viewer.Fullscreen.toggle(e)}))}}i.Demo=r},570:e=>{e.exports="\nprecision lowp float;\n\n\n#if __VERSION__ == 100\n    #define texture(sampler, coord) texture2D(sampler, coord)\n#else \n    #define varying in\n#endif\n\n\n\nuniform bool u_textured;\n\n\n#if __VERSION__ == 100\n    #define fragColor gl_FragColor\n#else\n    layout(location = 0) out vec4 fragColor;\n#endif\n\n\nvarying vec4 v_vertex;\nvarying vec2 v_uv;\n\n\nvoid main(void)\n{\n    fragColor = vec4(v_vertex.xyz * 0.5 + 0.5, 1.0);\n}\n"},38:e=>{e.exports="\nprecision lowp float;\n\n\n#if __VERSION__ == 100\n    #define texture(sampler, coord) texture2D(sampler, coord)\n#else\n    #define varying out\n#endif\n\n\n\n#if __VERSION__ == 100\n    attribute vec3 a_vertex;\n    attribute vec2 a_texCoord;\n#else\n    layout(location = 0) in vec3 a_vertex;\n    layout(location = 1) in vec2 a_texCoord;\n#endif\n\n\nuniform mat4 u_viewProjection;\nuniform mat4 u_model;\n\n\nvarying vec4 v_vertex;\nvarying vec2 v_uv;\n\n\nvoid main()\n{\n    v_vertex = u_model * vec4(a_vertex, 1.0);\n    v_uv = a_texCoord;\n\n    gl_Position = u_viewProjection *  v_vertex;\n}\n"},160:i=>{"use strict";i.exports=e}},t={};function n(e){var r=t[e];if(void 0!==r)return r.exports;var a=t[e]={exports:{}};return i[e](a,a.exports,n),a.exports}var r={};return(()=>{"use strict";var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.EyeTrackingDemo=e.EyeTrackingRenderer=void 0;const i=n(160),t=n(160),a=n(526);class o extends t.Renderer{constructor(e){super(),this._eyeGazeDataStreams=e}onUpdate(){return this._navigation.update(),this._eventHandler.update(),this._altered.any||this._camera.altered}onPrepare(){this._altered.canvasSize&&(this._camera.aspect=this._canvasSize[0]/this._canvasSize[1],this._camera.viewport=this._canvasSize),this._altered.clearColor&&this._defaultFBO.clearColor(this._clearColor),this._altered.reset(),this._camera.altered=!1}onFrame(){const e=this._context.gl;this._defaultFBO.bind(),this._defaultFBO.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT,!0,!1),e.viewport(0,0,this._frameSize[0],this._frameSize[1]),e.enable(e.CULL_FACE),e.cullFace(e.BACK),e.enable(e.DEPTH_TEST),this._program.bind(),e.uniformMatrix4fv(this._uViewProjection,e.GL_FALSE,this._camera.viewProjection),this._cuboid.bind(),this._cuboid.draw(),this._cuboid.unbind(),this._program.unbind(),e.cullFace(e.BACK),e.disable(e.CULL_FACE)}onSwap(){}onInitialize(e,r,a){this._eventHandler=new t.EventHandler(r,a),this._eventHandler.pushEyeGazeDataHandler(((e,i)=>console.log(e,i))),this._eventHandler.pushEyeGazeServerMessageHandler(((e,i)=>console.log(e,i))),this._eventHandler.pushEyeGazeConnectionStatusHandler(((e,i)=>console.log(e,i))),this._eventHandler.pushEyeGazeBinaryMessageParsingErrorHandler(((e,i)=>console.log(e,i))),this._defaultFBO=new t.DefaultFramebuffer(e,"DefaultFBO"),this._defaultFBO.initialize(),this._defaultFBO.bind();const o=e.gl;this._cuboid=new t.CuboidGeometry(e,"Cuboid",!0,[2,2,2]),this._cuboid.initialize();const s=new t.Shader(e,o.VERTEX_SHADER,"mesh.vert");s.initialize(n(38));const l=new t.Shader(e,o.FRAGMENT_SHADER,"mesh.frag");l.initialize(n(570)),this._program=new t.Program(e,"CubeProgram"),this._program.initialize([s,l],!1),this._program.attribute("a_vertex",this._cuboid.vertexLocation),this._program.attribute("a_texCoord",this._cuboid.uvCoordLocation),this._program.link(),this._program.bind(),this._uViewProjection=this._program.uniform("u_viewProjection");const c=i.mat4.identity(i.mat4.create());return o.uniformMatrix4fv(this._program.uniform("u_model"),o.FALSE,c),o.uniform1i(this._program.uniform("u_texture"),0),o.uniform1i(this._program.uniform("u_textured"),!1),this._camera=new t.Camera,this._camera.center=i.vec3.fromValues(0,0,0),this._camera.up=i.vec3.fromValues(0,1,0),this._camera.eye=i.vec3.fromValues(0,0,5),this._camera.near=1,this._camera.far=8,this._navigation=new t.Navigation(r,a),this._navigation.camera=this._camera,!0}onUninitialize(){super.uninitialize(),this._cuboid.uninitialize(),this._program.uninitialize(),this._defaultFBO.uninitialize()}onDiscarded(){this._altered.alter("canvasSize"),this._altered.alter("clearColor"),this._altered.alter("frameSize"),this._altered.alter("multiFrameNumber")}}e.EyeTrackingRenderer=o;class s extends a.Demo{onInitialize(e){this._canvas=new t.Canvas(e),this._canvas.controller.multiFrameNumber=1,this._canvas.framePrecision=t.Wizard.Precision.float,this._canvas.clearColor.fromHex("d6d8db"),this._canvas.frameScale=[1,1],this._canvas.element.addEventListener("click",(()=>{this._canvas.controller.update()}));const i=new t.EyeGazeDataStreams;return i.gazePosition=!0,i.gazeOrigin=!0,i.eyePositionNormalized=!0,i.headPositionAndRotation=!0,i.userPresence=!0,this._canvas.activateEyeGazeEventProvider(i,s.serverAddress),this._renderer=new o(i),this._canvas.renderer=this._renderer,!0}onUninitialize(){this._canvas.dispose(),this._renderer.uninitialize()}get canvas(){return this._canvas}get renderer(){return this._renderer}}e.EyeTrackingDemo=s,s.serverAddress="ws://localhost:1234"})(),r})()));
//# sourceMappingURL=eye-tracking.js.map