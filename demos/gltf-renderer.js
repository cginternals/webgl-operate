!function(t,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r(require("gloperate"));else if("function"==typeof define&&define.amd)define(["gloperate"],r);else{var a="object"==typeof exports?r(require("gloperate")):r(t.gloperate);for(var n in a)("object"==typeof exports?exports:t)[n]=a[n]}}(self,(t=>(()=>{"use strict";var r={659:(t,r,a)=>{a.r(r),a.d(r,{glMatrix:()=>n,mat2:()=>e,mat2d:()=>i,mat3:()=>o,mat4:()=>u,quat:()=>c,quat2:()=>f,vec2:()=>l,vec3:()=>s,vec4:()=>h});var n={};a.r(n),a.d(n,{ARRAY_TYPE:()=>m,EPSILON:()=>M,RANDOM:()=>d,equals:()=>p,setMatrixArrayType:()=>v,toRadian:()=>_});var e={};a.r(e),a.d(e,{LDU:()=>U,add:()=>B,adjoint:()=>R,clone:()=>g,copy:()=>y,create:()=>x,determinant:()=>P,equals:()=>j,exactEquals:()=>O,frob:()=>D,fromRotation:()=>L,fromScaling:()=>z,fromValues:()=>E,identity:()=>T,invert:()=>q,mul:()=>V,multiply:()=>S,multiplyScalar:()=>G,multiplyScalarAndAdd:()=>X,rotate:()=>F,scale:()=>C,set:()=>w,str:()=>N,sub:()=>Y,subtract:()=>I,transpose:()=>A});var i={};a.r(i),a.d(i,{add:()=>ht,clone:()=>$,copy:()=>k,create:()=>Q,determinant:()=>J,equals:()=>mt,exactEquals:()=>Mt,frob:()=>st,fromRotation:()=>et,fromScaling:()=>it,fromTranslation:()=>ot,fromValues:()=>H,identity:()=>Z,invert:()=>K,mul:()=>dt,multiply:()=>tt,multiplyScalar:()=>ft,multiplyScalarAndAdd:()=>lt,rotate:()=>rt,scale:()=>at,set:()=>W,str:()=>ut,sub:()=>vt,subtract:()=>ct,translate:()=>nt});var o={};a.r(o),a.d(o,{add:()=>jt,adjoint:()=>At,clone:()=>pt,copy:()=>xt,create:()=>bt,determinant:()=>qt,equals:()=>Qt,exactEquals:()=>Yt,frob:()=>Ot,fromMat2d:()=>Nt,fromMat4:()=>_t,fromQuat:()=>Dt,fromRotation:()=>Lt,fromScaling:()=>zt,fromTranslation:()=>Ct,fromValues:()=>gt,identity:()=>Tt,invert:()=>wt,mul:()=>$t,multiply:()=>Rt,multiplyScalar:()=>Xt,multiplyScalarAndAdd:()=>Vt,normalFromMat4:()=>Ut,projection:()=>Bt,rotate:()=>St,scale:()=>Ft,set:()=>yt,str:()=>It,sub:()=>kt,subtract:()=>Gt,translate:()=>Pt,transpose:()=>Et});var u={};a.r(u),a.d(u,{add:()=>zr,adjoint:()=>nr,clone:()=>Ht,copy:()=>Wt,create:()=>Zt,determinant:()=>er,equals:()=>Ir,exactEquals:()=>Br,frob:()=>Lr,fromQuat:()=>wr,fromQuat2:()=>pr,fromRotation:()=>mr,fromRotationTranslation:()=>_r,fromRotationTranslationScale:()=>Tr,fromRotationTranslationScaleOrigin:()=>Er,fromScaling:()=>Mr,fromTranslation:()=>lr,fromValues:()=>Kt,fromXRotation:()=>dr,fromYRotation:()=>vr,fromZRotation:()=>br,frustum:()=>Ar,getRotation:()=>yr,getScaling:()=>gr,getTranslation:()=>xr,identity:()=>tr,invert:()=>ar,lookAt:()=>Sr,mul:()=>Or,multiply:()=>ir,multiplyScalar:()=>Dr,multiplyScalarAndAdd:()=>Ur,ortho:()=>Pr,perspective:()=>qr,perspectiveFromFieldOfView:()=>Rr,rotate:()=>sr,rotateX:()=>hr,rotateY:()=>cr,rotateZ:()=>fr,scale:()=>ur,set:()=>Jt,str:()=>Cr,sub:()=>jr,subtract:()=>Nr,targetTo:()=>Fr,translate:()=>or,transpose:()=>rr});var s={};a.r(s),a.d(s,{add:()=>kr,angle:()=>Ta,bezier:()=>da,ceil:()=>Kr,clone:()=>Xr,copy:()=>Qr,create:()=>Gr,cross:()=>la,dist:()=>Ca,distance:()=>ia,div:()=>Fa,divide:()=>Wr,dot:()=>fa,equals:()=>qa,exactEquals:()=>Aa,floor:()=>Jr,forEach:()=>Da,fromValues:()=>Yr,hermite:()=>ma,inverse:()=>ha,len:()=>za,length:()=>Vr,lerp:()=>Ma,max:()=>ra,min:()=>ta,mul:()=>Sa,multiply:()=>Hr,negate:()=>sa,normalize:()=>ca,random:()=>va,rotateX:()=>xa,rotateY:()=>ga,rotateZ:()=>ya,round:()=>aa,scale:()=>na,scaleAndAdd:()=>ea,set:()=>$r,sqrDist:()=>La,sqrLen:()=>Na,squaredDistance:()=>oa,squaredLength:()=>ua,str:()=>wa,sub:()=>Pa,subtract:()=>Zr,transformMat3:()=>_a,transformMat4:()=>ba,transformQuat:()=>pa,zero:()=>Ea});var h={};a.r(h),a.d(h,{add:()=>Ga,ceil:()=>Qa,clone:()=>Ba,copy:()=>Oa,create:()=>Ua,cross:()=>sn,dist:()=>xn,distance:()=>Ja,div:()=>pn,divide:()=>Ya,dot:()=>un,equals:()=>vn,exactEquals:()=>dn,floor:()=>$a,forEach:()=>En,fromValues:()=>Ia,inverse:()=>en,len:()=>yn,length:()=>rn,lerp:()=>hn,max:()=>Za,min:()=>ka,mul:()=>_n,multiply:()=>Va,negate:()=>nn,normalize:()=>on,random:()=>cn,round:()=>Ha,scale:()=>Wa,scaleAndAdd:()=>Ka,set:()=>ja,sqrDist:()=>gn,sqrLen:()=>Tn,squaredDistance:()=>tn,squaredLength:()=>an,str:()=>mn,sub:()=>bn,subtract:()=>Xa,transformMat4:()=>fn,transformQuat:()=>ln,zero:()=>Mn});var c={};a.r(c),a.d(c,{add:()=>re,calculateW:()=>zn,clone:()=>Wn,conjugate:()=>jn,copy:()=>Jn,create:()=>wn,dot:()=>ee,equals:()=>le,exactEquals:()=>fe,exp:()=>Nn,fromEuler:()=>Xn,fromMat3:()=>Gn,fromValues:()=>Kn,getAngle:()=>Pn,getAxisAngle:()=>Rn,identity:()=>An,invert:()=>On,len:()=>ue,length:()=>oe,lerp:()=>ie,ln:()=>Dn,mul:()=>ae,multiply:()=>Sn,normalize:()=>ce,pow:()=>Un,random:()=>In,rotateX:()=>Fn,rotateY:()=>Cn,rotateZ:()=>Ln,rotationTo:()=>Me,scale:()=>ne,set:()=>te,setAxes:()=>de,setAxisAngle:()=>qn,slerp:()=>Bn,sqlerp:()=>me,sqrLen:()=>he,squaredLength:()=>se,str:()=>Vn});var f={};a.r(f),a.d(f,{add:()=>Ie,clone:()=>be,conjugate:()=>Qe,copy:()=>Ee,create:()=>ve,dot:()=>Xe,equals:()=>ti,exactEquals:()=>Je,fromMat4:()=>Te,fromRotation:()=>ye,fromRotationTranslation:()=>xe,fromRotationTranslationValues:()=>pe,fromTranslation:()=>ge,fromValues:()=>_e,getDual:()=>Re,getReal:()=>qe,getTranslation:()=>Fe,identity:()=>we,invert:()=>Ye,len:()=>ke,length:()=>$e,lerp:()=>Ve,mul:()=>je,multiply:()=>Oe,normalize:()=>We,rotateAroundAxis:()=>Be,rotateByQuatAppend:()=>De,rotateByQuatPrepend:()=>Ue,rotateX:()=>Le,rotateY:()=>ze,rotateZ:()=>Ne,scale:()=>Ge,set:()=>Ae,setDual:()=>Se,setReal:()=>Pe,sqrLen:()=>He,squaredLength:()=>Ze,str:()=>Ke,translate:()=>Ce});var l={};a.r(l),a.d(l,{add:()=>oi,angle:()=>Li,ceil:()=>ci,clone:()=>ai,copy:()=>ei,create:()=>ri,cross:()=>wi,dist:()=>Gi,distance:()=>bi,div:()=>ji,divide:()=>hi,dot:()=>Ei,equals:()=>Ui,exactEquals:()=>Di,floor:()=>fi,forEach:()=>Yi,fromValues:()=>ni,inverse:()=>yi,len:()=>Bi,length:()=>pi,lerp:()=>Ai,max:()=>Mi,min:()=>li,mul:()=>Oi,multiply:()=>si,negate:()=>gi,normalize:()=>Ti,random:()=>qi,rotate:()=>Ci,round:()=>mi,scale:()=>di,scaleAndAdd:()=>vi,set:()=>ii,sqrDist:()=>Xi,sqrLen:()=>Vi,squaredDistance:()=>_i,squaredLength:()=>xi,str:()=>Ni,sub:()=>Ii,subtract:()=>ui,transformMat2:()=>Ri,transformMat2d:()=>Pi,transformMat3:()=>Si,transformMat4:()=>Fi,zero:()=>zi});var M=1e-6,m="undefined"!=typeof Float32Array?Float32Array:Array,d=Math.random;function v(t){m=t}var b=Math.PI/180;function _(t){return t*b}function p(t,r){return Math.abs(t-r)<=M*Math.max(1,Math.abs(t),Math.abs(r))}function x(){var t=new m(4);return m!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function g(t){var r=new m(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r}function y(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function T(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function E(t,r,a,n){var e=new m(4);return e[0]=t,e[1]=r,e[2]=a,e[3]=n,e}function w(t,r,a,n,e){return t[0]=r,t[1]=a,t[2]=n,t[3]=e,t}function A(t,r){if(t===r){var a=r[1];t[1]=r[2],t[2]=a}else t[0]=r[0],t[1]=r[2],t[2]=r[1],t[3]=r[3];return t}function q(t,r){var a=r[0],n=r[1],e=r[2],i=r[3],o=a*i-e*n;return o?(o=1/o,t[0]=i*o,t[1]=-n*o,t[2]=-e*o,t[3]=a*o,t):null}function R(t,r){var a=r[0];return t[0]=r[3],t[1]=-r[1],t[2]=-r[2],t[3]=a,t}function P(t){return t[0]*t[3]-t[2]*t[1]}function S(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3],u=a[0],s=a[1],h=a[2],c=a[3];return t[0]=n*u+i*s,t[1]=e*u+o*s,t[2]=n*h+i*c,t[3]=e*h+o*c,t}function F(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3],u=Math.sin(a),s=Math.cos(a);return t[0]=n*s+i*u,t[1]=e*s+o*u,t[2]=n*-u+i*s,t[3]=e*-u+o*s,t}function C(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3],u=a[0],s=a[1];return t[0]=n*u,t[1]=e*u,t[2]=i*s,t[3]=o*s,t}function L(t,r){var a=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=a,t[2]=-a,t[3]=n,t}function z(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t}function N(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function D(t){return Math.hypot(t[0],t[1],t[2],t[3])}function U(t,r,a,n){return t[2]=n[2]/n[0],a[0]=n[0],a[1]=n[1],a[3]=n[3]-t[2]*a[1],[t,r,a]}function B(t,r,a){return t[0]=r[0]+a[0],t[1]=r[1]+a[1],t[2]=r[2]+a[2],t[3]=r[3]+a[3],t}function I(t,r,a){return t[0]=r[0]-a[0],t[1]=r[1]-a[1],t[2]=r[2]-a[2],t[3]=r[3]-a[3],t}function O(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function j(t,r){var a=t[0],n=t[1],e=t[2],i=t[3],o=r[0],u=r[1],s=r[2],h=r[3];return Math.abs(a-o)<=M*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(n-u)<=M*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(e-s)<=M*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(i-h)<=M*Math.max(1,Math.abs(i),Math.abs(h))}function G(t,r,a){return t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t[3]=r[3]*a,t}function X(t,r,a,n){return t[0]=r[0]+a[0]*n,t[1]=r[1]+a[1]*n,t[2]=r[2]+a[2]*n,t[3]=r[3]+a[3]*n,t}Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)});var V=S,Y=I;function Q(){var t=new m(6);return m!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function $(t){var r=new m(6);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function k(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t}function Z(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function H(t,r,a,n,e,i){var o=new m(6);return o[0]=t,o[1]=r,o[2]=a,o[3]=n,o[4]=e,o[5]=i,o}function W(t,r,a,n,e,i,o){return t[0]=r,t[1]=a,t[2]=n,t[3]=e,t[4]=i,t[5]=o,t}function K(t,r){var a=r[0],n=r[1],e=r[2],i=r[3],o=r[4],u=r[5],s=a*i-n*e;return s?(s=1/s,t[0]=i*s,t[1]=-n*s,t[2]=-e*s,t[3]=a*s,t[4]=(e*u-i*o)*s,t[5]=(n*o-a*u)*s,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3],u=r[4],s=r[5],h=a[0],c=a[1],f=a[2],l=a[3],M=a[4],m=a[5];return t[0]=n*h+i*c,t[1]=e*h+o*c,t[2]=n*f+i*l,t[3]=e*f+o*l,t[4]=n*M+i*m+u,t[5]=e*M+o*m+s,t}function rt(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3],u=r[4],s=r[5],h=Math.sin(a),c=Math.cos(a);return t[0]=n*c+i*h,t[1]=e*c+o*h,t[2]=n*-h+i*c,t[3]=e*-h+o*c,t[4]=u,t[5]=s,t}function at(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3],u=r[4],s=r[5],h=a[0],c=a[1];return t[0]=n*h,t[1]=e*h,t[2]=i*c,t[3]=o*c,t[4]=u,t[5]=s,t}function nt(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3],u=r[4],s=r[5],h=a[0],c=a[1];return t[0]=n,t[1]=e,t[2]=i,t[3]=o,t[4]=n*h+i*c+u,t[5]=e*h+o*c+s,t}function et(t,r){var a=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=a,t[2]=-a,t[3]=n,t[4]=0,t[5]=0,t}function it(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t[4]=0,t[5]=0,t}function ot(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=r[0],t[5]=r[1],t}function ut(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function st(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ht(t,r,a){return t[0]=r[0]+a[0],t[1]=r[1]+a[1],t[2]=r[2]+a[2],t[3]=r[3]+a[3],t[4]=r[4]+a[4],t[5]=r[5]+a[5],t}function ct(t,r,a){return t[0]=r[0]-a[0],t[1]=r[1]-a[1],t[2]=r[2]-a[2],t[3]=r[3]-a[3],t[4]=r[4]-a[4],t[5]=r[5]-a[5],t}function ft(t,r,a){return t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t[3]=r[3]*a,t[4]=r[4]*a,t[5]=r[5]*a,t}function lt(t,r,a,n){return t[0]=r[0]+a[0]*n,t[1]=r[1]+a[1]*n,t[2]=r[2]+a[2]*n,t[3]=r[3]+a[3]*n,t[4]=r[4]+a[4]*n,t[5]=r[5]+a[5]*n,t}function Mt(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]}function mt(t,r){var a=t[0],n=t[1],e=t[2],i=t[3],o=t[4],u=t[5],s=r[0],h=r[1],c=r[2],f=r[3],l=r[4],m=r[5];return Math.abs(a-s)<=M*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(n-h)<=M*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(e-c)<=M*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(i-f)<=M*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-l)<=M*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(u-m)<=M*Math.max(1,Math.abs(u),Math.abs(m))}var dt=tt,vt=ct;function bt(){var t=new m(9);return m!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function _t(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function pt(t){var r=new m(9);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r}function xt(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function gt(t,r,a,n,e,i,o,u,s){var h=new m(9);return h[0]=t,h[1]=r,h[2]=a,h[3]=n,h[4]=e,h[5]=i,h[6]=o,h[7]=u,h[8]=s,h}function yt(t,r,a,n,e,i,o,u,s,h){return t[0]=r,t[1]=a,t[2]=n,t[3]=e,t[4]=i,t[5]=o,t[6]=u,t[7]=s,t[8]=h,t}function Tt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Et(t,r){if(t===r){var a=r[1],n=r[2],e=r[5];t[1]=r[3],t[2]=r[6],t[3]=a,t[5]=r[7],t[6]=n,t[7]=e}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function wt(t,r){var a=r[0],n=r[1],e=r[2],i=r[3],o=r[4],u=r[5],s=r[6],h=r[7],c=r[8],f=c*o-u*h,l=-c*i+u*s,M=h*i-o*s,m=a*f+n*l+e*M;return m?(m=1/m,t[0]=f*m,t[1]=(-c*n+e*h)*m,t[2]=(u*n-e*o)*m,t[3]=l*m,t[4]=(c*a-e*s)*m,t[5]=(-u*a+e*i)*m,t[6]=M*m,t[7]=(-h*a+n*s)*m,t[8]=(o*a-n*i)*m,t):null}function At(t,r){var a=r[0],n=r[1],e=r[2],i=r[3],o=r[4],u=r[5],s=r[6],h=r[7],c=r[8];return t[0]=o*c-u*h,t[1]=e*h-n*c,t[2]=n*u-e*o,t[3]=u*s-i*c,t[4]=a*c-e*s,t[5]=e*i-a*u,t[6]=i*h-o*s,t[7]=n*s-a*h,t[8]=a*o-n*i,t}function qt(t){var r=t[0],a=t[1],n=t[2],e=t[3],i=t[4],o=t[5],u=t[6],s=t[7],h=t[8];return r*(h*i-o*s)+a*(-h*e+o*u)+n*(s*e-i*u)}function Rt(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3],u=r[4],s=r[5],h=r[6],c=r[7],f=r[8],l=a[0],M=a[1],m=a[2],d=a[3],v=a[4],b=a[5],_=a[6],p=a[7],x=a[8];return t[0]=l*n+M*o+m*h,t[1]=l*e+M*u+m*c,t[2]=l*i+M*s+m*f,t[3]=d*n+v*o+b*h,t[4]=d*e+v*u+b*c,t[5]=d*i+v*s+b*f,t[6]=_*n+p*o+x*h,t[7]=_*e+p*u+x*c,t[8]=_*i+p*s+x*f,t}function Pt(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3],u=r[4],s=r[5],h=r[6],c=r[7],f=r[8],l=a[0],M=a[1];return t[0]=n,t[1]=e,t[2]=i,t[3]=o,t[4]=u,t[5]=s,t[6]=l*n+M*o+h,t[7]=l*e+M*u+c,t[8]=l*i+M*s+f,t}function St(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3],u=r[4],s=r[5],h=r[6],c=r[7],f=r[8],l=Math.sin(a),M=Math.cos(a);return t[0]=M*n+l*o,t[1]=M*e+l*u,t[2]=M*i+l*s,t[3]=M*o-l*n,t[4]=M*u-l*e,t[5]=M*s-l*i,t[6]=h,t[7]=c,t[8]=f,t}function Ft(t,r,a){var n=a[0],e=a[1];return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=e*r[3],t[4]=e*r[4],t[5]=e*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function Ct(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function Lt(t,r){var a=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=a,t[2]=0,t[3]=-a,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function zt(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Nt(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t}function Dt(t,r){var a=r[0],n=r[1],e=r[2],i=r[3],o=a+a,u=n+n,s=e+e,h=a*o,c=n*o,f=n*u,l=e*o,M=e*u,m=e*s,d=i*o,v=i*u,b=i*s;return t[0]=1-f-m,t[3]=c-b,t[6]=l+v,t[1]=c+b,t[4]=1-h-m,t[7]=M-d,t[2]=l-v,t[5]=M+d,t[8]=1-h-f,t}function Ut(t,r){var a=r[0],n=r[1],e=r[2],i=r[3],o=r[4],u=r[5],s=r[6],h=r[7],c=r[8],f=r[9],l=r[10],M=r[11],m=r[12],d=r[13],v=r[14],b=r[15],_=a*u-n*o,p=a*s-e*o,x=a*h-i*o,g=n*s-e*u,y=n*h-i*u,T=e*h-i*s,E=c*d-f*m,w=c*v-l*m,A=c*b-M*m,q=f*v-l*d,R=f*b-M*d,P=l*b-M*v,S=_*P-p*R+x*q+g*A-y*w+T*E;return S?(S=1/S,t[0]=(u*P-s*R+h*q)*S,t[1]=(s*A-o*P-h*w)*S,t[2]=(o*R-u*A+h*E)*S,t[3]=(e*R-n*P-i*q)*S,t[4]=(a*P-e*A+i*w)*S,t[5]=(n*A-a*R-i*E)*S,t[6]=(d*T-v*y+b*g)*S,t[7]=(v*x-m*T-b*p)*S,t[8]=(m*y-d*x+b*_)*S,t):null}function Bt(t,r,a){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/a,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function It(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Ot(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function jt(t,r,a){return t[0]=r[0]+a[0],t[1]=r[1]+a[1],t[2]=r[2]+a[2],t[3]=r[3]+a[3],t[4]=r[4]+a[4],t[5]=r[5]+a[5],t[6]=r[6]+a[6],t[7]=r[7]+a[7],t[8]=r[8]+a[8],t}function Gt(t,r,a){return t[0]=r[0]-a[0],t[1]=r[1]-a[1],t[2]=r[2]-a[2],t[3]=r[3]-a[3],t[4]=r[4]-a[4],t[5]=r[5]-a[5],t[6]=r[6]-a[6],t[7]=r[7]-a[7],t[8]=r[8]-a[8],t}function Xt(t,r,a){return t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t[3]=r[3]*a,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=r[7]*a,t[8]=r[8]*a,t}function Vt(t,r,a,n){return t[0]=r[0]+a[0]*n,t[1]=r[1]+a[1]*n,t[2]=r[2]+a[2]*n,t[3]=r[3]+a[3]*n,t[4]=r[4]+a[4]*n,t[5]=r[5]+a[5]*n,t[6]=r[6]+a[6]*n,t[7]=r[7]+a[7]*n,t[8]=r[8]+a[8]*n,t}function Yt(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]}function Qt(t,r){var a=t[0],n=t[1],e=t[2],i=t[3],o=t[4],u=t[5],s=t[6],h=t[7],c=t[8],f=r[0],l=r[1],m=r[2],d=r[3],v=r[4],b=r[5],_=r[6],p=r[7],x=r[8];return Math.abs(a-f)<=M*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(n-l)<=M*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(e-m)<=M*Math.max(1,Math.abs(e),Math.abs(m))&&Math.abs(i-d)<=M*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-v)<=M*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(u-b)<=M*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(s-_)<=M*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(h-p)<=M*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(c-x)<=M*Math.max(1,Math.abs(c),Math.abs(x))}var $t=Rt,kt=Gt;function Zt(){var t=new m(16);return m!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Ht(t){var r=new m(16);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function Wt(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function Kt(t,r,a,n,e,i,o,u,s,h,c,f,l,M,d,v){var b=new m(16);return b[0]=t,b[1]=r,b[2]=a,b[3]=n,b[4]=e,b[5]=i,b[6]=o,b[7]=u,b[8]=s,b[9]=h,b[10]=c,b[11]=f,b[12]=l,b[13]=M,b[14]=d,b[15]=v,b}function Jt(t,r,a,n,e,i,o,u,s,h,c,f,l,M,m,d,v){return t[0]=r,t[1]=a,t[2]=n,t[3]=e,t[4]=i,t[5]=o,t[6]=u,t[7]=s,t[8]=h,t[9]=c,t[10]=f,t[11]=l,t[12]=M,t[13]=m,t[14]=d,t[15]=v,t}function tr(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rr(t,r){if(t===r){var a=r[1],n=r[2],e=r[3],i=r[6],o=r[7],u=r[11];t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=a,t[6]=r[9],t[7]=r[13],t[8]=n,t[9]=i,t[11]=r[14],t[12]=e,t[13]=o,t[14]=u}else t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=r[1],t[5]=r[5],t[6]=r[9],t[7]=r[13],t[8]=r[2],t[9]=r[6],t[10]=r[10],t[11]=r[14],t[12]=r[3],t[13]=r[7],t[14]=r[11],t[15]=r[15];return t}function ar(t,r){var a=r[0],n=r[1],e=r[2],i=r[3],o=r[4],u=r[5],s=r[6],h=r[7],c=r[8],f=r[9],l=r[10],M=r[11],m=r[12],d=r[13],v=r[14],b=r[15],_=a*u-n*o,p=a*s-e*o,x=a*h-i*o,g=n*s-e*u,y=n*h-i*u,T=e*h-i*s,E=c*d-f*m,w=c*v-l*m,A=c*b-M*m,q=f*v-l*d,R=f*b-M*d,P=l*b-M*v,S=_*P-p*R+x*q+g*A-y*w+T*E;return S?(S=1/S,t[0]=(u*P-s*R+h*q)*S,t[1]=(e*R-n*P-i*q)*S,t[2]=(d*T-v*y+b*g)*S,t[3]=(l*y-f*T-M*g)*S,t[4]=(s*A-o*P-h*w)*S,t[5]=(a*P-e*A+i*w)*S,t[6]=(v*x-m*T-b*p)*S,t[7]=(c*T-l*x+M*p)*S,t[8]=(o*R-u*A+h*E)*S,t[9]=(n*A-a*R-i*E)*S,t[10]=(m*y-d*x+b*_)*S,t[11]=(f*x-c*y-M*_)*S,t[12]=(u*w-o*q-s*E)*S,t[13]=(a*q-n*w+e*E)*S,t[14]=(d*p-m*g-v*_)*S,t[15]=(c*g-f*p+l*_)*S,t):null}function nr(t,r){var a=r[0],n=r[1],e=r[2],i=r[3],o=r[4],u=r[5],s=r[6],h=r[7],c=r[8],f=r[9],l=r[10],M=r[11],m=r[12],d=r[13],v=r[14],b=r[15];return t[0]=u*(l*b-M*v)-f*(s*b-h*v)+d*(s*M-h*l),t[1]=-(n*(l*b-M*v)-f*(e*b-i*v)+d*(e*M-i*l)),t[2]=n*(s*b-h*v)-u*(e*b-i*v)+d*(e*h-i*s),t[3]=-(n*(s*M-h*l)-u*(e*M-i*l)+f*(e*h-i*s)),t[4]=-(o*(l*b-M*v)-c*(s*b-h*v)+m*(s*M-h*l)),t[5]=a*(l*b-M*v)-c*(e*b-i*v)+m*(e*M-i*l),t[6]=-(a*(s*b-h*v)-o*(e*b-i*v)+m*(e*h-i*s)),t[7]=a*(s*M-h*l)-o*(e*M-i*l)+c*(e*h-i*s),t[8]=o*(f*b-M*d)-c*(u*b-h*d)+m*(u*M-h*f),t[9]=-(a*(f*b-M*d)-c*(n*b-i*d)+m*(n*M-i*f)),t[10]=a*(u*b-h*d)-o*(n*b-i*d)+m*(n*h-i*u),t[11]=-(a*(u*M-h*f)-o*(n*M-i*f)+c*(n*h-i*u)),t[12]=-(o*(f*v-l*d)-c*(u*v-s*d)+m*(u*l-s*f)),t[13]=a*(f*v-l*d)-c*(n*v-e*d)+m*(n*l-e*f),t[14]=-(a*(u*v-s*d)-o*(n*v-e*d)+m*(n*s-e*u)),t[15]=a*(u*l-s*f)-o*(n*l-e*f)+c*(n*s-e*u),t}function er(t){var r=t[0],a=t[1],n=t[2],e=t[3],i=t[4],o=t[5],u=t[6],s=t[7],h=t[8],c=t[9],f=t[10],l=t[11],M=t[12],m=t[13],d=t[14],v=t[15];return(r*o-a*i)*(f*v-l*d)-(r*u-n*i)*(c*v-l*m)+(r*s-e*i)*(c*d-f*m)+(a*u-n*o)*(h*v-l*M)-(a*s-e*o)*(h*d-f*M)+(n*s-e*u)*(h*m-c*M)}function ir(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3],u=r[4],s=r[5],h=r[6],c=r[7],f=r[8],l=r[9],M=r[10],m=r[11],d=r[12],v=r[13],b=r[14],_=r[15],p=a[0],x=a[1],g=a[2],y=a[3];return t[0]=p*n+x*u+g*f+y*d,t[1]=p*e+x*s+g*l+y*v,t[2]=p*i+x*h+g*M+y*b,t[3]=p*o+x*c+g*m+y*_,p=a[4],x=a[5],g=a[6],y=a[7],t[4]=p*n+x*u+g*f+y*d,t[5]=p*e+x*s+g*l+y*v,t[6]=p*i+x*h+g*M+y*b,t[7]=p*o+x*c+g*m+y*_,p=a[8],x=a[9],g=a[10],y=a[11],t[8]=p*n+x*u+g*f+y*d,t[9]=p*e+x*s+g*l+y*v,t[10]=p*i+x*h+g*M+y*b,t[11]=p*o+x*c+g*m+y*_,p=a[12],x=a[13],g=a[14],y=a[15],t[12]=p*n+x*u+g*f+y*d,t[13]=p*e+x*s+g*l+y*v,t[14]=p*i+x*h+g*M+y*b,t[15]=p*o+x*c+g*m+y*_,t}function or(t,r,a){var n,e,i,o,u,s,h,c,f,l,M,m,d=a[0],v=a[1],b=a[2];return r===t?(t[12]=r[0]*d+r[4]*v+r[8]*b+r[12],t[13]=r[1]*d+r[5]*v+r[9]*b+r[13],t[14]=r[2]*d+r[6]*v+r[10]*b+r[14],t[15]=r[3]*d+r[7]*v+r[11]*b+r[15]):(n=r[0],e=r[1],i=r[2],o=r[3],u=r[4],s=r[5],h=r[6],c=r[7],f=r[8],l=r[9],M=r[10],m=r[11],t[0]=n,t[1]=e,t[2]=i,t[3]=o,t[4]=u,t[5]=s,t[6]=h,t[7]=c,t[8]=f,t[9]=l,t[10]=M,t[11]=m,t[12]=n*d+u*v+f*b+r[12],t[13]=e*d+s*v+l*b+r[13],t[14]=i*d+h*v+M*b+r[14],t[15]=o*d+c*v+m*b+r[15]),t}function ur(t,r,a){var n=a[0],e=a[1],i=a[2];return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t[8]=r[8]*i,t[9]=r[9]*i,t[10]=r[10]*i,t[11]=r[11]*i,t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function sr(t,r,a,n){var e,i,o,u,s,h,c,f,l,m,d,v,b,_,p,x,g,y,T,E,w,A,q,R,P=n[0],S=n[1],F=n[2],C=Math.hypot(P,S,F);return C<M?null:(P*=C=1/C,S*=C,F*=C,e=Math.sin(a),o=1-(i=Math.cos(a)),u=r[0],s=r[1],h=r[2],c=r[3],f=r[4],l=r[5],m=r[6],d=r[7],v=r[8],b=r[9],_=r[10],p=r[11],x=P*P*o+i,g=S*P*o+F*e,y=F*P*o-S*e,T=P*S*o-F*e,E=S*S*o+i,w=F*S*o+P*e,A=P*F*o+S*e,q=S*F*o-P*e,R=F*F*o+i,t[0]=u*x+f*g+v*y,t[1]=s*x+l*g+b*y,t[2]=h*x+m*g+_*y,t[3]=c*x+d*g+p*y,t[4]=u*T+f*E+v*w,t[5]=s*T+l*E+b*w,t[6]=h*T+m*E+_*w,t[7]=c*T+d*E+p*w,t[8]=u*A+f*q+v*R,t[9]=s*A+l*q+b*R,t[10]=h*A+m*q+_*R,t[11]=c*A+d*q+p*R,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)}function hr(t,r,a){var n=Math.sin(a),e=Math.cos(a),i=r[4],o=r[5],u=r[6],s=r[7],h=r[8],c=r[9],f=r[10],l=r[11];return r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[4]=i*e+h*n,t[5]=o*e+c*n,t[6]=u*e+f*n,t[7]=s*e+l*n,t[8]=h*e-i*n,t[9]=c*e-o*n,t[10]=f*e-u*n,t[11]=l*e-s*n,t}function cr(t,r,a){var n=Math.sin(a),e=Math.cos(a),i=r[0],o=r[1],u=r[2],s=r[3],h=r[8],c=r[9],f=r[10],l=r[11];return r!==t&&(t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=i*e-h*n,t[1]=o*e-c*n,t[2]=u*e-f*n,t[3]=s*e-l*n,t[8]=i*n+h*e,t[9]=o*n+c*e,t[10]=u*n+f*e,t[11]=s*n+l*e,t}function fr(t,r,a){var n=Math.sin(a),e=Math.cos(a),i=r[0],o=r[1],u=r[2],s=r[3],h=r[4],c=r[5],f=r[6],l=r[7];return r!==t&&(t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=i*e+h*n,t[1]=o*e+c*n,t[2]=u*e+f*n,t[3]=s*e+l*n,t[4]=h*e-i*n,t[5]=c*e-o*n,t[6]=f*e-u*n,t[7]=l*e-s*n,t}function lr(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function Mr(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function mr(t,r,a){var n,e,i,o=a[0],u=a[1],s=a[2],h=Math.hypot(o,u,s);return h<M?null:(o*=h=1/h,u*=h,s*=h,n=Math.sin(r),i=1-(e=Math.cos(r)),t[0]=o*o*i+e,t[1]=u*o*i+s*n,t[2]=s*o*i-u*n,t[3]=0,t[4]=o*u*i-s*n,t[5]=u*u*i+e,t[6]=s*u*i+o*n,t[7]=0,t[8]=o*s*i+u*n,t[9]=u*s*i-o*n,t[10]=s*s*i+e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function dr(t,r){var a=Math.sin(r),n=Math.cos(r);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=a,t[7]=0,t[8]=0,t[9]=-a,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function vr(t,r){var a=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=0,t[2]=-a,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=a,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function br(t,r){var a=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=a,t[2]=0,t[3]=0,t[4]=-a,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _r(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3],u=n+n,s=e+e,h=i+i,c=n*u,f=n*s,l=n*h,M=e*s,m=e*h,d=i*h,v=o*u,b=o*s,_=o*h;return t[0]=1-(M+d),t[1]=f+_,t[2]=l-b,t[3]=0,t[4]=f-_,t[5]=1-(c+d),t[6]=m+v,t[7]=0,t[8]=l+b,t[9]=m-v,t[10]=1-(c+M),t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function pr(t,r){var a=new m(3),n=-r[0],e=-r[1],i=-r[2],o=r[3],u=r[4],s=r[5],h=r[6],c=r[7],f=n*n+e*e+i*i+o*o;return f>0?(a[0]=2*(u*o+c*n+s*i-h*e)/f,a[1]=2*(s*o+c*e+h*n-u*i)/f,a[2]=2*(h*o+c*i+u*e-s*n)/f):(a[0]=2*(u*o+c*n+s*i-h*e),a[1]=2*(s*o+c*e+h*n-u*i),a[2]=2*(h*o+c*i+u*e-s*n)),_r(t,r,a),t}function xr(t,r){return t[0]=r[12],t[1]=r[13],t[2]=r[14],t}function gr(t,r){var a=r[0],n=r[1],e=r[2],i=r[4],o=r[5],u=r[6],s=r[8],h=r[9],c=r[10];return t[0]=Math.hypot(a,n,e),t[1]=Math.hypot(i,o,u),t[2]=Math.hypot(s,h,c),t}function yr(t,r){var a=new m(3);gr(a,r);var n=1/a[0],e=1/a[1],i=1/a[2],o=r[0]*n,u=r[1]*e,s=r[2]*i,h=r[4]*n,c=r[5]*e,f=r[6]*i,l=r[8]*n,M=r[9]*e,d=r[10]*i,v=o+c+d,b=0;return v>0?(b=2*Math.sqrt(v+1),t[3]=.25*b,t[0]=(f-M)/b,t[1]=(l-s)/b,t[2]=(u-h)/b):o>c&&o>d?(b=2*Math.sqrt(1+o-c-d),t[3]=(f-M)/b,t[0]=.25*b,t[1]=(u+h)/b,t[2]=(l+s)/b):c>d?(b=2*Math.sqrt(1+c-o-d),t[3]=(l-s)/b,t[0]=(u+h)/b,t[1]=.25*b,t[2]=(f+M)/b):(b=2*Math.sqrt(1+d-o-c),t[3]=(u-h)/b,t[0]=(l+s)/b,t[1]=(f+M)/b,t[2]=.25*b),t}function Tr(t,r,a,n){var e=r[0],i=r[1],o=r[2],u=r[3],s=e+e,h=i+i,c=o+o,f=e*s,l=e*h,M=e*c,m=i*h,d=i*c,v=o*c,b=u*s,_=u*h,p=u*c,x=n[0],g=n[1],y=n[2];return t[0]=(1-(m+v))*x,t[1]=(l+p)*x,t[2]=(M-_)*x,t[3]=0,t[4]=(l-p)*g,t[5]=(1-(f+v))*g,t[6]=(d+b)*g,t[7]=0,t[8]=(M+_)*y,t[9]=(d-b)*y,t[10]=(1-(f+m))*y,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t}function Er(t,r,a,n,e){var i=r[0],o=r[1],u=r[2],s=r[3],h=i+i,c=o+o,f=u+u,l=i*h,M=i*c,m=i*f,d=o*c,v=o*f,b=u*f,_=s*h,p=s*c,x=s*f,g=n[0],y=n[1],T=n[2],E=e[0],w=e[1],A=e[2],q=(1-(d+b))*g,R=(M+x)*g,P=(m-p)*g,S=(M-x)*y,F=(1-(l+b))*y,C=(v+_)*y,L=(m+p)*T,z=(v-_)*T,N=(1-(l+d))*T;return t[0]=q,t[1]=R,t[2]=P,t[3]=0,t[4]=S,t[5]=F,t[6]=C,t[7]=0,t[8]=L,t[9]=z,t[10]=N,t[11]=0,t[12]=a[0]+E-(q*E+S*w+L*A),t[13]=a[1]+w-(R*E+F*w+z*A),t[14]=a[2]+A-(P*E+C*w+N*A),t[15]=1,t}function wr(t,r){var a=r[0],n=r[1],e=r[2],i=r[3],o=a+a,u=n+n,s=e+e,h=a*o,c=n*o,f=n*u,l=e*o,M=e*u,m=e*s,d=i*o,v=i*u,b=i*s;return t[0]=1-f-m,t[1]=c+b,t[2]=l-v,t[3]=0,t[4]=c-b,t[5]=1-h-m,t[6]=M+d,t[7]=0,t[8]=l+v,t[9]=M-d,t[10]=1-h-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ar(t,r,a,n,e,i,o){var u=1/(a-r),s=1/(e-n),h=1/(i-o);return t[0]=2*i*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*s,t[6]=0,t[7]=0,t[8]=(a+r)*u,t[9]=(e+n)*s,t[10]=(o+i)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*h,t[15]=0,t}function qr(t,r,a,n,e){var i,o=1/Math.tan(r/2);return t[0]=o/a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=e&&e!==1/0?(i=1/(n-e),t[10]=(e+n)*i,t[14]=2*e*n*i):(t[10]=-1,t[14]=-2*n),t}function Rr(t,r,a,n){var e=Math.tan(r.upDegrees*Math.PI/180),i=Math.tan(r.downDegrees*Math.PI/180),o=Math.tan(r.leftDegrees*Math.PI/180),u=Math.tan(r.rightDegrees*Math.PI/180),s=2/(o+u),h=2/(e+i);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-(o-u)*s*.5,t[9]=(e-i)*h*.5,t[10]=n/(a-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*a/(a-n),t[15]=0,t}function Pr(t,r,a,n,e,i,o){var u=1/(r-a),s=1/(n-e),h=1/(i-o);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(r+a)*u,t[13]=(e+n)*s,t[14]=(o+i)*h,t[15]=1,t}function Sr(t,r,a,n){var e,i,o,u,s,h,c,f,l,m,d=r[0],v=r[1],b=r[2],_=n[0],p=n[1],x=n[2],g=a[0],y=a[1],T=a[2];return Math.abs(d-g)<M&&Math.abs(v-y)<M&&Math.abs(b-T)<M?tr(t):(c=d-g,f=v-y,l=b-T,e=p*(l*=m=1/Math.hypot(c,f,l))-x*(f*=m),i=x*(c*=m)-_*l,o=_*f-p*c,(m=Math.hypot(e,i,o))?(e*=m=1/m,i*=m,o*=m):(e=0,i=0,o=0),u=f*o-l*i,s=l*e-c*o,h=c*i-f*e,(m=Math.hypot(u,s,h))?(u*=m=1/m,s*=m,h*=m):(u=0,s=0,h=0),t[0]=e,t[1]=u,t[2]=c,t[3]=0,t[4]=i,t[5]=s,t[6]=f,t[7]=0,t[8]=o,t[9]=h,t[10]=l,t[11]=0,t[12]=-(e*d+i*v+o*b),t[13]=-(u*d+s*v+h*b),t[14]=-(c*d+f*v+l*b),t[15]=1,t)}function Fr(t,r,a,n){var e=r[0],i=r[1],o=r[2],u=n[0],s=n[1],h=n[2],c=e-a[0],f=i-a[1],l=o-a[2],M=c*c+f*f+l*l;M>0&&(c*=M=1/Math.sqrt(M),f*=M,l*=M);var m=s*l-h*f,d=h*c-u*l,v=u*f-s*c;return(M=m*m+d*d+v*v)>0&&(m*=M=1/Math.sqrt(M),d*=M,v*=M),t[0]=m,t[1]=d,t[2]=v,t[3]=0,t[4]=f*v-l*d,t[5]=l*m-c*v,t[6]=c*d-f*m,t[7]=0,t[8]=c,t[9]=f,t[10]=l,t[11]=0,t[12]=e,t[13]=i,t[14]=o,t[15]=1,t}function Cr(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Lr(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function zr(t,r,a){return t[0]=r[0]+a[0],t[1]=r[1]+a[1],t[2]=r[2]+a[2],t[3]=r[3]+a[3],t[4]=r[4]+a[4],t[5]=r[5]+a[5],t[6]=r[6]+a[6],t[7]=r[7]+a[7],t[8]=r[8]+a[8],t[9]=r[9]+a[9],t[10]=r[10]+a[10],t[11]=r[11]+a[11],t[12]=r[12]+a[12],t[13]=r[13]+a[13],t[14]=r[14]+a[14],t[15]=r[15]+a[15],t}function Nr(t,r,a){return t[0]=r[0]-a[0],t[1]=r[1]-a[1],t[2]=r[2]-a[2],t[3]=r[3]-a[3],t[4]=r[4]-a[4],t[5]=r[5]-a[5],t[6]=r[6]-a[6],t[7]=r[7]-a[7],t[8]=r[8]-a[8],t[9]=r[9]-a[9],t[10]=r[10]-a[10],t[11]=r[11]-a[11],t[12]=r[12]-a[12],t[13]=r[13]-a[13],t[14]=r[14]-a[14],t[15]=r[15]-a[15],t}function Dr(t,r,a){return t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t[3]=r[3]*a,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=r[7]*a,t[8]=r[8]*a,t[9]=r[9]*a,t[10]=r[10]*a,t[11]=r[11]*a,t[12]=r[12]*a,t[13]=r[13]*a,t[14]=r[14]*a,t[15]=r[15]*a,t}function Ur(t,r,a,n){return t[0]=r[0]+a[0]*n,t[1]=r[1]+a[1]*n,t[2]=r[2]+a[2]*n,t[3]=r[3]+a[3]*n,t[4]=r[4]+a[4]*n,t[5]=r[5]+a[5]*n,t[6]=r[6]+a[6]*n,t[7]=r[7]+a[7]*n,t[8]=r[8]+a[8]*n,t[9]=r[9]+a[9]*n,t[10]=r[10]+a[10]*n,t[11]=r[11]+a[11]*n,t[12]=r[12]+a[12]*n,t[13]=r[13]+a[13]*n,t[14]=r[14]+a[14]*n,t[15]=r[15]+a[15]*n,t}function Br(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]&&t[9]===r[9]&&t[10]===r[10]&&t[11]===r[11]&&t[12]===r[12]&&t[13]===r[13]&&t[14]===r[14]&&t[15]===r[15]}function Ir(t,r){var a=t[0],n=t[1],e=t[2],i=t[3],o=t[4],u=t[5],s=t[6],h=t[7],c=t[8],f=t[9],l=t[10],m=t[11],d=t[12],v=t[13],b=t[14],_=t[15],p=r[0],x=r[1],g=r[2],y=r[3],T=r[4],E=r[5],w=r[6],A=r[7],q=r[8],R=r[9],P=r[10],S=r[11],F=r[12],C=r[13],L=r[14],z=r[15];return Math.abs(a-p)<=M*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(n-x)<=M*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(e-g)<=M*Math.max(1,Math.abs(e),Math.abs(g))&&Math.abs(i-y)<=M*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(o-T)<=M*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(u-E)<=M*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(s-w)<=M*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(h-A)<=M*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(c-q)<=M*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(f-R)<=M*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(l-P)<=M*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(m-S)<=M*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(d-F)<=M*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(v-C)<=M*Math.max(1,Math.abs(v),Math.abs(C))&&Math.abs(b-L)<=M*Math.max(1,Math.abs(b),Math.abs(L))&&Math.abs(_-z)<=M*Math.max(1,Math.abs(_),Math.abs(z))}var Or=ir,jr=Nr;function Gr(){var t=new m(3);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Xr(t){var r=new m(3);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r}function Vr(t){var r=t[0],a=t[1],n=t[2];return Math.hypot(r,a,n)}function Yr(t,r,a){var n=new m(3);return n[0]=t,n[1]=r,n[2]=a,n}function Qr(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function $r(t,r,a,n){return t[0]=r,t[1]=a,t[2]=n,t}function kr(t,r,a){return t[0]=r[0]+a[0],t[1]=r[1]+a[1],t[2]=r[2]+a[2],t}function Zr(t,r,a){return t[0]=r[0]-a[0],t[1]=r[1]-a[1],t[2]=r[2]-a[2],t}function Hr(t,r,a){return t[0]=r[0]*a[0],t[1]=r[1]*a[1],t[2]=r[2]*a[2],t}function Wr(t,r,a){return t[0]=r[0]/a[0],t[1]=r[1]/a[1],t[2]=r[2]/a[2],t}function Kr(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function Jr(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function ta(t,r,a){return t[0]=Math.min(r[0],a[0]),t[1]=Math.min(r[1],a[1]),t[2]=Math.min(r[2],a[2]),t}function ra(t,r,a){return t[0]=Math.max(r[0],a[0]),t[1]=Math.max(r[1],a[1]),t[2]=Math.max(r[2],a[2]),t}function aa(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function na(t,r,a){return t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t}function ea(t,r,a,n){return t[0]=r[0]+a[0]*n,t[1]=r[1]+a[1]*n,t[2]=r[2]+a[2]*n,t}function ia(t,r){var a=r[0]-t[0],n=r[1]-t[1],e=r[2]-t[2];return Math.hypot(a,n,e)}function oa(t,r){var a=r[0]-t[0],n=r[1]-t[1],e=r[2]-t[2];return a*a+n*n+e*e}function ua(t){var r=t[0],a=t[1],n=t[2];return r*r+a*a+n*n}function sa(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function ha(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function ca(t,r){var a=r[0],n=r[1],e=r[2],i=a*a+n*n+e*e;return i>0&&(i=1/Math.sqrt(i)),t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t}function fa(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function la(t,r,a){var n=r[0],e=r[1],i=r[2],o=a[0],u=a[1],s=a[2];return t[0]=e*s-i*u,t[1]=i*o-n*s,t[2]=n*u-e*o,t}function Ma(t,r,a,n){var e=r[0],i=r[1],o=r[2];return t[0]=e+n*(a[0]-e),t[1]=i+n*(a[1]-i),t[2]=o+n*(a[2]-o),t}function ma(t,r,a,n,e,i){var o=i*i,u=o*(2*i-3)+1,s=o*(i-2)+i,h=o*(i-1),c=o*(3-2*i);return t[0]=r[0]*u+a[0]*s+n[0]*h+e[0]*c,t[1]=r[1]*u+a[1]*s+n[1]*h+e[1]*c,t[2]=r[2]*u+a[2]*s+n[2]*h+e[2]*c,t}function da(t,r,a,n,e,i){var o=1-i,u=o*o,s=i*i,h=u*o,c=3*i*u,f=3*s*o,l=s*i;return t[0]=r[0]*h+a[0]*c+n[0]*f+e[0]*l,t[1]=r[1]*h+a[1]*c+n[1]*f+e[1]*l,t[2]=r[2]*h+a[2]*c+n[2]*f+e[2]*l,t}function va(t,r){r=r||1;var a=2*d()*Math.PI,n=2*d()-1,e=Math.sqrt(1-n*n)*r;return t[0]=Math.cos(a)*e,t[1]=Math.sin(a)*e,t[2]=n*r,t}function ba(t,r,a){var n=r[0],e=r[1],i=r[2],o=a[3]*n+a[7]*e+a[11]*i+a[15];return o=o||1,t[0]=(a[0]*n+a[4]*e+a[8]*i+a[12])/o,t[1]=(a[1]*n+a[5]*e+a[9]*i+a[13])/o,t[2]=(a[2]*n+a[6]*e+a[10]*i+a[14])/o,t}function _a(t,r,a){var n=r[0],e=r[1],i=r[2];return t[0]=n*a[0]+e*a[3]+i*a[6],t[1]=n*a[1]+e*a[4]+i*a[7],t[2]=n*a[2]+e*a[5]+i*a[8],t}function pa(t,r,a){var n=a[0],e=a[1],i=a[2],o=a[3],u=r[0],s=r[1],h=r[2],c=e*h-i*s,f=i*u-n*h,l=n*s-e*u,M=e*l-i*f,m=i*c-n*l,d=n*f-e*c,v=2*o;return c*=v,f*=v,l*=v,M*=2,m*=2,d*=2,t[0]=u+c+M,t[1]=s+f+m,t[2]=h+l+d,t}function xa(t,r,a,n){var e=[],i=[];return e[0]=r[0]-a[0],e[1]=r[1]-a[1],e[2]=r[2]-a[2],i[0]=e[0],i[1]=e[1]*Math.cos(n)-e[2]*Math.sin(n),i[2]=e[1]*Math.sin(n)+e[2]*Math.cos(n),t[0]=i[0]+a[0],t[1]=i[1]+a[1],t[2]=i[2]+a[2],t}function ga(t,r,a,n){var e=[],i=[];return e[0]=r[0]-a[0],e[1]=r[1]-a[1],e[2]=r[2]-a[2],i[0]=e[2]*Math.sin(n)+e[0]*Math.cos(n),i[1]=e[1],i[2]=e[2]*Math.cos(n)-e[0]*Math.sin(n),t[0]=i[0]+a[0],t[1]=i[1]+a[1],t[2]=i[2]+a[2],t}function ya(t,r,a,n){var e=[],i=[];return e[0]=r[0]-a[0],e[1]=r[1]-a[1],e[2]=r[2]-a[2],i[0]=e[0]*Math.cos(n)-e[1]*Math.sin(n),i[1]=e[0]*Math.sin(n)+e[1]*Math.cos(n),i[2]=e[2],t[0]=i[0]+a[0],t[1]=i[1]+a[1],t[2]=i[2]+a[2],t}function Ta(t,r){var a=t[0],n=t[1],e=t[2],i=r[0],o=r[1],u=r[2],s=Math.sqrt(a*a+n*n+e*e)*Math.sqrt(i*i+o*o+u*u),h=s&&fa(t,r)/s;return Math.acos(Math.min(Math.max(h,-1),1))}function Ea(t){return t[0]=0,t[1]=0,t[2]=0,t}function wa(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Aa(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function qa(t,r){var a=t[0],n=t[1],e=t[2],i=r[0],o=r[1],u=r[2];return Math.abs(a-i)<=M*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(n-o)<=M*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(e-u)<=M*Math.max(1,Math.abs(e),Math.abs(u))}var Ra,Pa=Zr,Sa=Hr,Fa=Wr,Ca=ia,La=oa,za=Vr,Na=ua,Da=(Ra=Gr(),function(t,r,a,n,e,i){var o,u;for(r||(r=3),a||(a=0),u=n?Math.min(n*r+a,t.length):t.length,o=a;o<u;o+=r)Ra[0]=t[o],Ra[1]=t[o+1],Ra[2]=t[o+2],e(Ra,Ra,i),t[o]=Ra[0],t[o+1]=Ra[1],t[o+2]=Ra[2];return t});function Ua(){var t=new m(4);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Ba(t){var r=new m(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r}function Ia(t,r,a,n){var e=new m(4);return e[0]=t,e[1]=r,e[2]=a,e[3]=n,e}function Oa(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function ja(t,r,a,n,e){return t[0]=r,t[1]=a,t[2]=n,t[3]=e,t}function Ga(t,r,a){return t[0]=r[0]+a[0],t[1]=r[1]+a[1],t[2]=r[2]+a[2],t[3]=r[3]+a[3],t}function Xa(t,r,a){return t[0]=r[0]-a[0],t[1]=r[1]-a[1],t[2]=r[2]-a[2],t[3]=r[3]-a[3],t}function Va(t,r,a){return t[0]=r[0]*a[0],t[1]=r[1]*a[1],t[2]=r[2]*a[2],t[3]=r[3]*a[3],t}function Ya(t,r,a){return t[0]=r[0]/a[0],t[1]=r[1]/a[1],t[2]=r[2]/a[2],t[3]=r[3]/a[3],t}function Qa(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t}function $a(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t}function ka(t,r,a){return t[0]=Math.min(r[0],a[0]),t[1]=Math.min(r[1],a[1]),t[2]=Math.min(r[2],a[2]),t[3]=Math.min(r[3],a[3]),t}function Za(t,r,a){return t[0]=Math.max(r[0],a[0]),t[1]=Math.max(r[1],a[1]),t[2]=Math.max(r[2],a[2]),t[3]=Math.max(r[3],a[3]),t}function Ha(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t}function Wa(t,r,a){return t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t[3]=r[3]*a,t}function Ka(t,r,a,n){return t[0]=r[0]+a[0]*n,t[1]=r[1]+a[1]*n,t[2]=r[2]+a[2]*n,t[3]=r[3]+a[3]*n,t}function Ja(t,r){var a=r[0]-t[0],n=r[1]-t[1],e=r[2]-t[2],i=r[3]-t[3];return Math.hypot(a,n,e,i)}function tn(t,r){var a=r[0]-t[0],n=r[1]-t[1],e=r[2]-t[2],i=r[3]-t[3];return a*a+n*n+e*e+i*i}function rn(t){var r=t[0],a=t[1],n=t[2],e=t[3];return Math.hypot(r,a,n,e)}function an(t){var r=t[0],a=t[1],n=t[2],e=t[3];return r*r+a*a+n*n+e*e}function nn(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t}function en(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t}function on(t,r){var a=r[0],n=r[1],e=r[2],i=r[3],o=a*a+n*n+e*e+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=a*o,t[1]=n*o,t[2]=e*o,t[3]=i*o,t}function un(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]}function sn(t,r,a,n){var e=a[0]*n[1]-a[1]*n[0],i=a[0]*n[2]-a[2]*n[0],o=a[0]*n[3]-a[3]*n[0],u=a[1]*n[2]-a[2]*n[1],s=a[1]*n[3]-a[3]*n[1],h=a[2]*n[3]-a[3]*n[2],c=r[0],f=r[1],l=r[2],M=r[3];return t[0]=f*h-l*s+M*u,t[1]=-c*h+l*o-M*i,t[2]=c*s-f*o+M*e,t[3]=-c*u+f*i-l*e,t}function hn(t,r,a,n){var e=r[0],i=r[1],o=r[2],u=r[3];return t[0]=e+n*(a[0]-e),t[1]=i+n*(a[1]-i),t[2]=o+n*(a[2]-o),t[3]=u+n*(a[3]-u),t}function cn(t,r){var a,n,e,i,o,u;r=r||1;do{o=(a=2*d()-1)*a+(n=2*d()-1)*n}while(o>=1);do{u=(e=2*d()-1)*e+(i=2*d()-1)*i}while(u>=1);var s=Math.sqrt((1-o)/u);return t[0]=r*a,t[1]=r*n,t[2]=r*e*s,t[3]=r*i*s,t}function fn(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3];return t[0]=a[0]*n+a[4]*e+a[8]*i+a[12]*o,t[1]=a[1]*n+a[5]*e+a[9]*i+a[13]*o,t[2]=a[2]*n+a[6]*e+a[10]*i+a[14]*o,t[3]=a[3]*n+a[7]*e+a[11]*i+a[15]*o,t}function ln(t,r,a){var n=r[0],e=r[1],i=r[2],o=a[0],u=a[1],s=a[2],h=a[3],c=h*n+u*i-s*e,f=h*e+s*n-o*i,l=h*i+o*e-u*n,M=-o*n-u*e-s*i;return t[0]=c*h+M*-o+f*-s-l*-u,t[1]=f*h+M*-u+l*-o-c*-s,t[2]=l*h+M*-s+c*-u-f*-o,t[3]=r[3],t}function Mn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function mn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function dn(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function vn(t,r){var a=t[0],n=t[1],e=t[2],i=t[3],o=r[0],u=r[1],s=r[2],h=r[3];return Math.abs(a-o)<=M*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(n-u)<=M*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(e-s)<=M*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(i-h)<=M*Math.max(1,Math.abs(i),Math.abs(h))}var bn=Xa,_n=Va,pn=Ya,xn=Ja,gn=tn,yn=rn,Tn=an,En=function(){var t=Ua();return function(r,a,n,e,i,o){var u,s;for(a||(a=4),n||(n=0),s=e?Math.min(e*a+n,r.length):r.length,u=n;u<s;u+=a)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],t[3]=r[u+3],i(t,t,o),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2],r[u+3]=t[3];return r}}();function wn(){var t=new m(4);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function An(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function qn(t,r,a){a*=.5;var n=Math.sin(a);return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=Math.cos(a),t}function Rn(t,r){var a=2*Math.acos(r[3]),n=Math.sin(a/2);return n>M?(t[0]=r[0]/n,t[1]=r[1]/n,t[2]=r[2]/n):(t[0]=1,t[1]=0,t[2]=0),a}function Pn(t,r){var a=ee(t,r);return Math.acos(2*a*a-1)}function Sn(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3],u=a[0],s=a[1],h=a[2],c=a[3];return t[0]=n*c+o*u+e*h-i*s,t[1]=e*c+o*s+i*u-n*h,t[2]=i*c+o*h+n*s-e*u,t[3]=o*c-n*u-e*s-i*h,t}function Fn(t,r,a){a*=.5;var n=r[0],e=r[1],i=r[2],o=r[3],u=Math.sin(a),s=Math.cos(a);return t[0]=n*s+o*u,t[1]=e*s+i*u,t[2]=i*s-e*u,t[3]=o*s-n*u,t}function Cn(t,r,a){a*=.5;var n=r[0],e=r[1],i=r[2],o=r[3],u=Math.sin(a),s=Math.cos(a);return t[0]=n*s-i*u,t[1]=e*s+o*u,t[2]=i*s+n*u,t[3]=o*s-e*u,t}function Ln(t,r,a){a*=.5;var n=r[0],e=r[1],i=r[2],o=r[3],u=Math.sin(a),s=Math.cos(a);return t[0]=n*s+e*u,t[1]=e*s-n*u,t[2]=i*s+o*u,t[3]=o*s-i*u,t}function zn(t,r){var a=r[0],n=r[1],e=r[2];return t[0]=a,t[1]=n,t[2]=e,t[3]=Math.sqrt(Math.abs(1-a*a-n*n-e*e)),t}function Nn(t,r){var a=r[0],n=r[1],e=r[2],i=r[3],o=Math.sqrt(a*a+n*n+e*e),u=Math.exp(i),s=o>0?u*Math.sin(o)/o:0;return t[0]=a*s,t[1]=n*s,t[2]=e*s,t[3]=u*Math.cos(o),t}function Dn(t,r){var a=r[0],n=r[1],e=r[2],i=r[3],o=Math.sqrt(a*a+n*n+e*e),u=o>0?Math.atan2(o,i)/o:0;return t[0]=a*u,t[1]=n*u,t[2]=e*u,t[3]=.5*Math.log(a*a+n*n+e*e+i*i),t}function Un(t,r,a){return Dn(t,r),ne(t,t,a),Nn(t,t),t}function Bn(t,r,a,n){var e,i,o,u,s,h=r[0],c=r[1],f=r[2],l=r[3],m=a[0],d=a[1],v=a[2],b=a[3];return(i=h*m+c*d+f*v+l*b)<0&&(i=-i,m=-m,d=-d,v=-v,b=-b),1-i>M?(e=Math.acos(i),o=Math.sin(e),u=Math.sin((1-n)*e)/o,s=Math.sin(n*e)/o):(u=1-n,s=n),t[0]=u*h+s*m,t[1]=u*c+s*d,t[2]=u*f+s*v,t[3]=u*l+s*b,t}function In(t){var r=d(),a=d(),n=d(),e=Math.sqrt(1-r),i=Math.sqrt(r);return t[0]=e*Math.sin(2*Math.PI*a),t[1]=e*Math.cos(2*Math.PI*a),t[2]=i*Math.sin(2*Math.PI*n),t[3]=i*Math.cos(2*Math.PI*n),t}function On(t,r){var a=r[0],n=r[1],e=r[2],i=r[3],o=a*a+n*n+e*e+i*i,u=o?1/o:0;return t[0]=-a*u,t[1]=-n*u,t[2]=-e*u,t[3]=i*u,t}function jn(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t}function Gn(t,r){var a,n=r[0]+r[4]+r[8];if(n>0)a=Math.sqrt(n+1),t[3]=.5*a,a=.5/a,t[0]=(r[5]-r[7])*a,t[1]=(r[6]-r[2])*a,t[2]=(r[1]-r[3])*a;else{var e=0;r[4]>r[0]&&(e=1),r[8]>r[3*e+e]&&(e=2);var i=(e+1)%3,o=(e+2)%3;a=Math.sqrt(r[3*e+e]-r[3*i+i]-r[3*o+o]+1),t[e]=.5*a,a=.5/a,t[3]=(r[3*i+o]-r[3*o+i])*a,t[i]=(r[3*i+e]+r[3*e+i])*a,t[o]=(r[3*o+e]+r[3*e+o])*a}return t}function Xn(t,r,a,n){var e=.5*Math.PI/180;r*=e,a*=e,n*=e;var i=Math.sin(r),o=Math.cos(r),u=Math.sin(a),s=Math.cos(a),h=Math.sin(n),c=Math.cos(n);return t[0]=i*s*c-o*u*h,t[1]=o*u*c+i*s*h,t[2]=o*s*h-i*u*c,t[3]=o*s*c+i*u*h,t}function Vn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Yn,Qn,$n,kn,Zn,Hn,Wn=Ba,Kn=Ia,Jn=Oa,te=ja,re=Ga,ae=Sn,ne=Wa,ee=un,ie=hn,oe=rn,ue=oe,se=an,he=se,ce=on,fe=dn,le=vn,Me=(Yn=Gr(),Qn=Yr(1,0,0),$n=Yr(0,1,0),function(t,r,a){var n=fa(r,a);return n<-.999999?(la(Yn,Qn,r),za(Yn)<1e-6&&la(Yn,$n,r),ca(Yn,Yn),qn(t,Yn,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(la(Yn,r,a),t[0]=Yn[0],t[1]=Yn[1],t[2]=Yn[2],t[3]=1+n,ce(t,t))}),me=(kn=wn(),Zn=wn(),function(t,r,a,n,e,i){return Bn(kn,r,e,i),Bn(Zn,a,n,i),Bn(t,kn,Zn,2*i*(1-i)),t}),de=(Hn=bt(),function(t,r,a,n){return Hn[0]=a[0],Hn[3]=a[1],Hn[6]=a[2],Hn[1]=n[0],Hn[4]=n[1],Hn[7]=n[2],Hn[2]=-r[0],Hn[5]=-r[1],Hn[8]=-r[2],ce(t,Gn(t,Hn))});function ve(){var t=new m(8);return m!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function be(t){var r=new m(8);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r}function _e(t,r,a,n,e,i,o,u){var s=new m(8);return s[0]=t,s[1]=r,s[2]=a,s[3]=n,s[4]=e,s[5]=i,s[6]=o,s[7]=u,s}function pe(t,r,a,n,e,i,o){var u=new m(8);u[0]=t,u[1]=r,u[2]=a,u[3]=n;var s=.5*e,h=.5*i,c=.5*o;return u[4]=s*n+h*a-c*r,u[5]=h*n+c*t-s*a,u[6]=c*n+s*r-h*t,u[7]=-s*t-h*r-c*a,u}function xe(t,r,a){var n=.5*a[0],e=.5*a[1],i=.5*a[2],o=r[0],u=r[1],s=r[2],h=r[3];return t[0]=o,t[1]=u,t[2]=s,t[3]=h,t[4]=n*h+e*s-i*u,t[5]=e*h+i*o-n*s,t[6]=i*h+n*u-e*o,t[7]=-n*o-e*u-i*s,t}function ge(t,r){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*r[0],t[5]=.5*r[1],t[6]=.5*r[2],t[7]=0,t}function ye(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Te(t,r){var a=wn();yr(a,r);var n=new m(3);return xr(n,r),xe(t,a,n),t}function Ee(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t}function we(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ae(t,r,a,n,e,i,o,u,s){return t[0]=r,t[1]=a,t[2]=n,t[3]=e,t[4]=i,t[5]=o,t[6]=u,t[7]=s,t}var qe=Jn;function Re(t,r){return t[0]=r[4],t[1]=r[5],t[2]=r[6],t[3]=r[7],t}var Pe=Jn;function Se(t,r){return t[4]=r[0],t[5]=r[1],t[6]=r[2],t[7]=r[3],t}function Fe(t,r){var a=r[4],n=r[5],e=r[6],i=r[7],o=-r[0],u=-r[1],s=-r[2],h=r[3];return t[0]=2*(a*h+i*o+n*s-e*u),t[1]=2*(n*h+i*u+e*o-a*s),t[2]=2*(e*h+i*s+a*u-n*o),t}function Ce(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3],u=.5*a[0],s=.5*a[1],h=.5*a[2],c=r[4],f=r[5],l=r[6],M=r[7];return t[0]=n,t[1]=e,t[2]=i,t[3]=o,t[4]=o*u+e*h-i*s+c,t[5]=o*s+i*u-n*h+f,t[6]=o*h+n*s-e*u+l,t[7]=-n*u-e*s-i*h+M,t}function Le(t,r,a){var n=-r[0],e=-r[1],i=-r[2],o=r[3],u=r[4],s=r[5],h=r[6],c=r[7],f=u*o+c*n+s*i-h*e,l=s*o+c*e+h*n-u*i,M=h*o+c*i+u*e-s*n,m=c*o-u*n-s*e-h*i;return Fn(t,r,a),n=t[0],e=t[1],i=t[2],o=t[3],t[4]=f*o+m*n+l*i-M*e,t[5]=l*o+m*e+M*n-f*i,t[6]=M*o+m*i+f*e-l*n,t[7]=m*o-f*n-l*e-M*i,t}function ze(t,r,a){var n=-r[0],e=-r[1],i=-r[2],o=r[3],u=r[4],s=r[5],h=r[6],c=r[7],f=u*o+c*n+s*i-h*e,l=s*o+c*e+h*n-u*i,M=h*o+c*i+u*e-s*n,m=c*o-u*n-s*e-h*i;return Cn(t,r,a),n=t[0],e=t[1],i=t[2],o=t[3],t[4]=f*o+m*n+l*i-M*e,t[5]=l*o+m*e+M*n-f*i,t[6]=M*o+m*i+f*e-l*n,t[7]=m*o-f*n-l*e-M*i,t}function Ne(t,r,a){var n=-r[0],e=-r[1],i=-r[2],o=r[3],u=r[4],s=r[5],h=r[6],c=r[7],f=u*o+c*n+s*i-h*e,l=s*o+c*e+h*n-u*i,M=h*o+c*i+u*e-s*n,m=c*o-u*n-s*e-h*i;return Ln(t,r,a),n=t[0],e=t[1],i=t[2],o=t[3],t[4]=f*o+m*n+l*i-M*e,t[5]=l*o+m*e+M*n-f*i,t[6]=M*o+m*i+f*e-l*n,t[7]=m*o-f*n-l*e-M*i,t}function De(t,r,a){var n=a[0],e=a[1],i=a[2],o=a[3],u=r[0],s=r[1],h=r[2],c=r[3];return t[0]=u*o+c*n+s*i-h*e,t[1]=s*o+c*e+h*n-u*i,t[2]=h*o+c*i+u*e-s*n,t[3]=c*o-u*n-s*e-h*i,u=r[4],s=r[5],h=r[6],c=r[7],t[4]=u*o+c*n+s*i-h*e,t[5]=s*o+c*e+h*n-u*i,t[6]=h*o+c*i+u*e-s*n,t[7]=c*o-u*n-s*e-h*i,t}function Ue(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3],u=a[0],s=a[1],h=a[2],c=a[3];return t[0]=n*c+o*u+e*h-i*s,t[1]=e*c+o*s+i*u-n*h,t[2]=i*c+o*h+n*s-e*u,t[3]=o*c-n*u-e*s-i*h,u=a[4],s=a[5],h=a[6],c=a[7],t[4]=n*c+o*u+e*h-i*s,t[5]=e*c+o*s+i*u-n*h,t[6]=i*c+o*h+n*s-e*u,t[7]=o*c-n*u-e*s-i*h,t}function Be(t,r,a,n){if(Math.abs(n)<M)return Ee(t,r);var e=Math.hypot(a[0],a[1],a[2]);n*=.5;var i=Math.sin(n),o=i*a[0]/e,u=i*a[1]/e,s=i*a[2]/e,h=Math.cos(n),c=r[0],f=r[1],l=r[2],m=r[3];t[0]=c*h+m*o+f*s-l*u,t[1]=f*h+m*u+l*o-c*s,t[2]=l*h+m*s+c*u-f*o,t[3]=m*h-c*o-f*u-l*s;var d=r[4],v=r[5],b=r[6],_=r[7];return t[4]=d*h+_*o+v*s-b*u,t[5]=v*h+_*u+b*o-d*s,t[6]=b*h+_*s+d*u-v*o,t[7]=_*h-d*o-v*u-b*s,t}function Ie(t,r,a){return t[0]=r[0]+a[0],t[1]=r[1]+a[1],t[2]=r[2]+a[2],t[3]=r[3]+a[3],t[4]=r[4]+a[4],t[5]=r[5]+a[5],t[6]=r[6]+a[6],t[7]=r[7]+a[7],t}function Oe(t,r,a){var n=r[0],e=r[1],i=r[2],o=r[3],u=a[4],s=a[5],h=a[6],c=a[7],f=r[4],l=r[5],M=r[6],m=r[7],d=a[0],v=a[1],b=a[2],_=a[3];return t[0]=n*_+o*d+e*b-i*v,t[1]=e*_+o*v+i*d-n*b,t[2]=i*_+o*b+n*v-e*d,t[3]=o*_-n*d-e*v-i*b,t[4]=n*c+o*u+e*h-i*s+f*_+m*d+l*b-M*v,t[5]=e*c+o*s+i*u-n*h+l*_+m*v+M*d-f*b,t[6]=i*c+o*h+n*s-e*u+M*_+m*b+f*v-l*d,t[7]=o*c-n*u-e*s-i*h+m*_-f*d-l*v-M*b,t}var je=Oe;function Ge(t,r,a){return t[0]=r[0]*a,t[1]=r[1]*a,t[2]=r[2]*a,t[3]=r[3]*a,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=r[7]*a,t}var Xe=ee;function Ve(t,r,a,n){var e=1-n;return Xe(r,a)<0&&(n=-n),t[0]=r[0]*e+a[0]*n,t[1]=r[1]*e+a[1]*n,t[2]=r[2]*e+a[2]*n,t[3]=r[3]*e+a[3]*n,t[4]=r[4]*e+a[4]*n,t[5]=r[5]*e+a[5]*n,t[6]=r[6]*e+a[6]*n,t[7]=r[7]*e+a[7]*n,t}function Ye(t,r){var a=Ze(r);return t[0]=-r[0]/a,t[1]=-r[1]/a,t[2]=-r[2]/a,t[3]=r[3]/a,t[4]=-r[4]/a,t[5]=-r[5]/a,t[6]=-r[6]/a,t[7]=r[7]/a,t}function Qe(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t[4]=-r[4],t[5]=-r[5],t[6]=-r[6],t[7]=r[7],t}var $e=oe,ke=$e,Ze=se,He=Ze;function We(t,r){var a=Ze(r);if(a>0){a=Math.sqrt(a);var n=r[0]/a,e=r[1]/a,i=r[2]/a,o=r[3]/a,u=r[4],s=r[5],h=r[6],c=r[7],f=n*u+e*s+i*h+o*c;t[0]=n,t[1]=e,t[2]=i,t[3]=o,t[4]=(u-n*f)/a,t[5]=(s-e*f)/a,t[6]=(h-i*f)/a,t[7]=(c-o*f)/a}return t}function Ke(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Je(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]}function ti(t,r){var a=t[0],n=t[1],e=t[2],i=t[3],o=t[4],u=t[5],s=t[6],h=t[7],c=r[0],f=r[1],l=r[2],m=r[3],d=r[4],v=r[5],b=r[6],_=r[7];return Math.abs(a-c)<=M*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(n-f)<=M*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(e-l)<=M*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(i-m)<=M*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(o-d)<=M*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(u-v)<=M*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(s-b)<=M*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(h-_)<=M*Math.max(1,Math.abs(h),Math.abs(_))}function ri(){var t=new m(2);return m!=Float32Array&&(t[0]=0,t[1]=0),t}function ai(t){var r=new m(2);return r[0]=t[0],r[1]=t[1],r}function ni(t,r){var a=new m(2);return a[0]=t,a[1]=r,a}function ei(t,r){return t[0]=r[0],t[1]=r[1],t}function ii(t,r,a){return t[0]=r,t[1]=a,t}function oi(t,r,a){return t[0]=r[0]+a[0],t[1]=r[1]+a[1],t}function ui(t,r,a){return t[0]=r[0]-a[0],t[1]=r[1]-a[1],t}function si(t,r,a){return t[0]=r[0]*a[0],t[1]=r[1]*a[1],t}function hi(t,r,a){return t[0]=r[0]/a[0],t[1]=r[1]/a[1],t}function ci(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t}function fi(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t}function li(t,r,a){return t[0]=Math.min(r[0],a[0]),t[1]=Math.min(r[1],a[1]),t}function Mi(t,r,a){return t[0]=Math.max(r[0],a[0]),t[1]=Math.max(r[1],a[1]),t}function mi(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t}function di(t,r,a){return t[0]=r[0]*a,t[1]=r[1]*a,t}function vi(t,r,a,n){return t[0]=r[0]+a[0]*n,t[1]=r[1]+a[1]*n,t}function bi(t,r){var a=r[0]-t[0],n=r[1]-t[1];return Math.hypot(a,n)}function _i(t,r){var a=r[0]-t[0],n=r[1]-t[1];return a*a+n*n}function pi(t){var r=t[0],a=t[1];return Math.hypot(r,a)}function xi(t){var r=t[0],a=t[1];return r*r+a*a}function gi(t,r){return t[0]=-r[0],t[1]=-r[1],t}function yi(t,r){return t[0]=1/r[0],t[1]=1/r[1],t}function Ti(t,r){var a=r[0],n=r[1],e=a*a+n*n;return e>0&&(e=1/Math.sqrt(e)),t[0]=r[0]*e,t[1]=r[1]*e,t}function Ei(t,r){return t[0]*r[0]+t[1]*r[1]}function wi(t,r,a){var n=r[0]*a[1]-r[1]*a[0];return t[0]=t[1]=0,t[2]=n,t}function Ai(t,r,a,n){var e=r[0],i=r[1];return t[0]=e+n*(a[0]-e),t[1]=i+n*(a[1]-i),t}function qi(t,r){r=r||1;var a=2*d()*Math.PI;return t[0]=Math.cos(a)*r,t[1]=Math.sin(a)*r,t}function Ri(t,r,a){var n=r[0],e=r[1];return t[0]=a[0]*n+a[2]*e,t[1]=a[1]*n+a[3]*e,t}function Pi(t,r,a){var n=r[0],e=r[1];return t[0]=a[0]*n+a[2]*e+a[4],t[1]=a[1]*n+a[3]*e+a[5],t}function Si(t,r,a){var n=r[0],e=r[1];return t[0]=a[0]*n+a[3]*e+a[6],t[1]=a[1]*n+a[4]*e+a[7],t}function Fi(t,r,a){var n=r[0],e=r[1];return t[0]=a[0]*n+a[4]*e+a[12],t[1]=a[1]*n+a[5]*e+a[13],t}function Ci(t,r,a,n){var e=r[0]-a[0],i=r[1]-a[1],o=Math.sin(n),u=Math.cos(n);return t[0]=e*u-i*o+a[0],t[1]=e*o+i*u+a[1],t}function Li(t,r){var a=t[0],n=t[1],e=r[0],i=r[1],o=Math.sqrt(a*a+n*n)*Math.sqrt(e*e+i*i),u=o&&(a*e+n*i)/o;return Math.acos(Math.min(Math.max(u,-1),1))}function zi(t){return t[0]=0,t[1]=0,t}function Ni(t){return"vec2("+t[0]+", "+t[1]+")"}function Di(t,r){return t[0]===r[0]&&t[1]===r[1]}function Ui(t,r){var a=t[0],n=t[1],e=r[0],i=r[1];return Math.abs(a-e)<=M*Math.max(1,Math.abs(a),Math.abs(e))&&Math.abs(n-i)<=M*Math.max(1,Math.abs(n),Math.abs(i))}var Bi=pi,Ii=ui,Oi=si,ji=hi,Gi=bi,Xi=_i,Vi=xi,Yi=function(){var t=ri();return function(r,a,n,e,i,o){var u,s;for(a||(a=2),n||(n=0),s=e?Math.min(e*a+n,r.length):r.length,u=n;u<s;u+=a)t[0]=r[u],t[1]=r[u+1],i(t,t,o),r[u]=t[0],r[u+1]=t[1];return r}}()},526:(t,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Demo=void 0;const n=a(160);class e extends n.Initializable{showSpinner(){document.getElementsByClassName("spinner").item(0).style.display="inline"}hideSpinner(){document.getElementsByClassName("spinner").item(0).style.display="none"}expose(){window.canvas=this.canvas,window.context=this.canvas.context,window.controller=this.canvas.controller,window.renderer=this.renderer}initialize(t){const r=this.onInitialize(t);return this.renderer.loadingStatus$.subscribe((t=>{t===n.LoadingStatus.Finished?this.hideSpinner():t===n.LoadingStatus.Started&&this.showSpinner()})),this.expose(),r}uninitialize(){this.onUninitialize()}enableFullscreenOnCtrlClick(){const t=this.canvas.element;t.addEventListener("click",(r=>{r.ctrlKey&&n.viewer.Fullscreen.toggle(t)}))}}r.Demo=e},160:r=>{r.exports=t}},a={};function n(t){var e=a[t];if(void 0!==e)return e.exports;var i=a[t]={exports:{}};return r[t](i,i.exports,n),i.exports}n.d=(t,r)=>{for(var a in r)n.o(r,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},n.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.GltfDemo=t.GltfRenderer=void 0;const r=n(659),a=n(160),i=n(160),o=n(526);class u extends i.Renderer{onInitialize(t,n,e){const o=this._context.gl;return this._loader=new i.GLTFLoader(this._context),this._emptyTexture=new i.Texture2D(this._context,"EmptyTexture"),this._emptyTexture.initialize(1,1,o.RGBA,o.RGBA,o.UNSIGNED_BYTE),this._framebuffer=new i.DefaultFramebuffer(this._context,"DefaultFBO"),this._framebuffer.initialize(),this._program=this._loader.pbrProgram,this._uViewProjection=this._program.uniform("u_viewProjection"),this._uModel=this._program.uniform("u_model"),this._uNormalMatrix=this._program.uniform("u_normalMatrix"),this._uBaseColor=this._program.uniform("u_baseColor"),this._uBaseColorTexCoord=this._program.uniform("u_baseColorTexCoord"),this._uMetallicRoughness=this._program.uniform("u_metallicRoughness"),this._uMetallicRoughnessTexCoord=this._program.uniform("u_metallicRoughnessTexCoord"),this._uNormal=this._program.uniform("u_normal"),this._uNormalTexCoord=this._program.uniform("u_normalTexCoord"),this._uEmissive=this._program.uniform("u_emissive"),this._uEmissiveTexCoord=this._program.uniform("u_emissiveTexCoord"),this._uOcclusion=this._program.uniform("u_occlusion"),this._uOcclusionTexCoord=this._program.uniform("u_occlusionTexCoord"),this._uEye=this._program.uniform("u_eye"),this._uGeometryFlags=this._program.uniform("u_geometryFlags"),this._uPbrFlags=this._program.uniform("u_pbrFlags"),this._uBaseColorFactor=this._program.uniform("u_baseColorFactor"),this._uMetallicFactor=this._program.uniform("u_metallicFactor"),this._uRoughnessFactor=this._program.uniform("u_roughnessFactor"),this._uEmissiveFactor=this._program.uniform("u_emissiveFactor"),this._uNormalScale=this._program.uniform("u_normalScale"),this._uBlendMode=this._program.uniform("u_blendMode"),this._uBlendCutoff=this._program.uniform("u_blendCutoff"),this._uSpecularEnvironment=this._program.uniform("u_specularEnvironment"),this._uBRDFLookupTable=this._program.uniform("u_brdfLUT"),void 0===this._camera&&(this._camera=new i.Camera,this._camera.center=r.vec3.fromValues(0,0,0),this._camera.up=r.vec3.fromValues(0,1,0),this._camera.eye=r.vec3.fromValues(0,3,1),this._camera.near=.1,this._camera.far=32),this._navigation=new i.Navigation(n,e),this._navigation.camera=this._camera,this._forwardPass=new i.ForwardSceneRenderPass(t),this._forwardPass.initialize(),this._forwardPass.camera=this._camera,this._forwardPass.target=this._framebuffer,this._forwardPass.program=this._program,this._forwardPass.updateModelTransform=t=>{o.uniformMatrix4fv(this._uModel,!1,t);const a=r.mat3.create();r.mat3.normalFromMat4(a,t),o.uniformMatrix3fv(this._uNormalMatrix,!1,a)},this._forwardPass.updateViewProjectionTransform=t=>{o.uniformMatrix4fv(this._uViewProjection,!1,t)},this._forwardPass.bindGeometry=t=>{const r=t;o.uniform1i(this._uGeometryFlags,r.flags)},this._forwardPass.bindMaterial=t=>{const r=t;a.auxiliaries.assert(void 0!==r,`Material ${t.name} is not a PBR material.`),void 0!==r.baseColorTexture?(r.baseColorTexture.bind(o.TEXTURE0),o.uniform1i(this._uBaseColorTexCoord,r.baseColorTexCoord)):this._emptyTexture.bind(o.TEXTURE0),void 0!==r.metallicRoughnessTexture?(r.metallicRoughnessTexture.bind(o.TEXTURE1),o.uniform1i(this._uMetallicRoughnessTexCoord,r.metallicRoughnessTexCoord)):this._emptyTexture.bind(o.TEXTURE1),void 0!==r.normalTexture?(r.normalTexture.bind(o.TEXTURE2),o.uniform1i(this._uNormalTexCoord,r.normalTexCoord)):this._emptyTexture.bind(o.TEXTURE2),void 0!==r.occlusionTexture?(r.occlusionTexture.bind(o.TEXTURE3),o.uniform1i(this._uOcclusionTexCoord,r.occlusionTexCoord)):this._emptyTexture.bind(o.TEXTURE3),void 0!==r.emissiveTexture?(r.emissiveTexture.bind(o.TEXTURE4),o.uniform1i(this._uEmissiveTexCoord,r.emissiveTexCoord)):this._emptyTexture.bind(o.TEXTURE4),o.uniform4fv(this._uBaseColorFactor,r.baseColorFactor),o.uniform3fv(this._uEmissiveFactor,r.emissiveFactor),o.uniform1f(this._uMetallicFactor,r.metallicFactor),o.uniform1f(this._uRoughnessFactor,r.roughnessFactor),o.uniform1f(this._uNormalScale,r.normalScale),o.uniform1i(this._uPbrFlags,r.flags),r.alphaMode===i.GLTFAlphaMode.OPAQUE?(o.disable(o.BLEND),o.uniform1i(this._uBlendMode,0)):r.alphaMode===i.GLTFAlphaMode.MASK?(o.enable(o.BLEND),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),o.uniform1i(this._uBlendMode,1),o.uniform1f(this._uBlendCutoff,r.alphaCutoff)):r.alphaMode===i.GLTFAlphaMode.BLEND?(o.enable(o.BLEND),o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA),o.uniform1i(this._uBlendMode,2)):a.auxiliaries.log(a.auxiliaries.LogLevel.Warning,"Unknown blend mode encountered.")},this.loadAsset(),this.loadEnvironmentMap(),window.document.getElementById("asset-select").onchange=t=>{this.loadAsset()},!0}onUninitialize(){super.uninitialize()}onDiscarded(){this._altered.alter("frameSize"),this._altered.alter("canvasSize"),this._altered.alter("clearColor")}onUpdate(){return this._altered.frameSize&&(this._camera.viewport=[this._frameSize[0],this._frameSize[1]]),this._altered.canvasSize&&(this._camera.aspect=this._canvasSize[0]/this._canvasSize[1]),this._altered.clearColor&&(this._forwardPass.clearColor=this._clearColor),this._navigation.update(),this._forwardPass.update(),this._altered.any||this._camera.altered}onPrepare(){this._forwardPass.prepare(),this._altered.reset(),this._camera.altered=!1}onFrame(t){if(this.isLoading)return;this.bindUniforms();const r=this._context.gl;r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),this._forwardPass.frame()}onSwap(){}bindUniforms(){const t=this._context.gl;this._program.bind(),t.uniform3fv(this._uEye,this._camera.eye),t.uniform1i(this._uBaseColor,0),t.uniform1i(this._uMetallicRoughness,1),t.uniform1i(this._uNormal,2),t.uniform1i(this._uOcclusion,3),t.uniform1i(this._uEmissive,4),t.uniform1i(this._uSpecularEnvironment,5),t.uniform1i(this._uBRDFLookupTable,6),this._specularEnvironment.bind(t.TEXTURE5),this._brdfLUT.bind(t.TEXTURE6),this._program.unbind()}loadAsset(){const t=window.document.getElementById("asset-select");this.startLoading();const r=t.value;this._forwardPass.scene=void 0,this._loader.uninitialize(),this._loader.loadAsset(r).then((()=>{this._forwardPass.scene=this._loader.defaultScene,this.finishLoading(),this._invalidate(!0)}))}loadEnvironmentMap(){const t=this._context.gl;this._brdfLUT=new i.Texture2D(this._context,"BRDFLookUpTable"),this._brdfLUT.initialize(1,1,t.RG16F,t.RG,t.FLOAT),this._brdfLUT.wrap(t.CLAMP_TO_EDGE,t.CLAMP_TO_EDGE),this._brdfLUT.filter(t.LINEAR,t.LINEAR),this._brdfLUT.fetch("/examples/data/imagebasedlighting/brdfLUT.png");const r=i.Wizard.queryInternalTextureFormat(this._context,t.RGBA,i.Wizard.Precision.byte);this._specularEnvironment=new i.TextureCube(this._context,"Cubemap"),this._specularEnvironment.initialize(512,r[0],t.RGBA,r[1]),this._specularEnvironment.filter(t.LINEAR,t.LINEAR_MIPMAP_LINEAR),this._specularEnvironment.levels(0,8);for(let t=0;t<9;++t)this._specularEnvironment.fetch({positiveX:`/examples/data/imagebasedlighting/preprocessed-map-px-${t}.png`,negativeX:`/examples/data/imagebasedlighting/preprocessed-map-nx-${t}.png`,positiveY:`/examples/data/imagebasedlighting/preprocessed-map-py-${t}.png`,negativeY:`/examples/data/imagebasedlighting/preprocessed-map-ny-${t}.png`,positiveZ:`/examples/data/imagebasedlighting/preprocessed-map-pz-${t}.png`,negativeZ:`/examples/data/imagebasedlighting/preprocessed-map-nz-${t}.png`},!1,t)}}t.GltfRenderer=u;class s extends o.Demo{onInitialize(t){return this._canvas=new i.Canvas(t,{antialias:!0}),this._canvas.controller.multiFrameNumber=1,this._canvas.framePrecision=i.Wizard.Precision.byte,this._canvas.frameScale=[1,1],this._renderer=new u,this._canvas.renderer=this._renderer,!0}onUninitialize(){this._canvas.dispose(),this._renderer.uninitialize()}get canvas(){return this._canvas}get renderer(){return this._renderer}}t.GltfDemo=s})(),e})()));
//# sourceMappingURL=gltf-renderer.js.map