!function(n,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("gloperate"));else if("function"==typeof define&&define.amd)define(["gloperate"],t);else{var r="object"==typeof exports?t(require("gloperate")):t(n.gloperate);for(var a in r)("object"==typeof exports?exports:n)[a]=r[a]}}(self,(n=>(()=>{var t={3659:(n,t,r)=>{"use strict";r.r(t),r.d(t,{glMatrix:()=>a,mat2:()=>e,mat2d:()=>o,mat3:()=>i,mat4:()=>u,quat:()=>h,quat2:()=>l,vec2:()=>f,vec3:()=>s,vec4:()=>c});var a={};r.r(a),r.d(a,{ARRAY_TYPE:()=>_,EPSILON:()=>m,RANDOM:()=>v,equals:()=>p,setMatrixArrayType:()=>M,toRadian:()=>b});var e={};r.r(e),r.d(e,{LDU:()=>D,add:()=>q,adjoint:()=>R,clone:()=>x,copy:()=>y,create:()=>g,determinant:()=>E,equals:()=>G,exactEquals:()=>B,frob:()=>I,fromRotation:()=>O,fromScaling:()=>N,fromValues:()=>S,identity:()=>w,invert:()=>z,mul:()=>H,multiply:()=>T,multiplyScalar:()=>j,multiplyScalarAndAdd:()=>k,rotate:()=>L,scale:()=>F,set:()=>A,str:()=>C,sub:()=>U,subtract:()=>V,transpose:()=>P});var o={};r.r(o),r.d(o,{add:()=>hn,clone:()=>K,copy:()=>Y,create:()=>X,determinant:()=>J,equals:()=>vn,exactEquals:()=>_n,frob:()=>cn,fromRotation:()=>en,fromScaling:()=>on,fromTranslation:()=>un,fromValues:()=>Q,identity:()=>Z,invert:()=>$,mul:()=>Mn,multiply:()=>nn,multiplyScalar:()=>fn,multiplyScalarAndAdd:()=>mn,rotate:()=>tn,scale:()=>rn,set:()=>W,str:()=>sn,sub:()=>dn,subtract:()=>ln,translate:()=>an});var i={};r.r(i),r.d(i,{add:()=>jn,adjoint:()=>zn,clone:()=>gn,copy:()=>xn,create:()=>bn,determinant:()=>Rn,equals:()=>Kn,exactEquals:()=>Xn,frob:()=>Gn,fromMat2d:()=>In,fromMat4:()=>pn,fromQuat:()=>Dn,fromRotation:()=>Nn,fromScaling:()=>Cn,fromTranslation:()=>On,fromValues:()=>yn,identity:()=>Sn,invert:()=>Pn,mul:()=>Yn,multiply:()=>En,multiplyScalar:()=>Hn,multiplyScalarAndAdd:()=>Un,normalFromMat4:()=>qn,projection:()=>Vn,rotate:()=>Ln,scale:()=>Fn,set:()=>wn,str:()=>Bn,sub:()=>Zn,subtract:()=>kn,translate:()=>Tn,transpose:()=>An});var u={};r.r(u),r.d(u,{add:()=>Ct,adjoint:()=>et,clone:()=>Wn,copy:()=>$n,create:()=>Qn,determinant:()=>ot,equals:()=>Bt,exactEquals:()=>Vt,frob:()=>Nt,fromQuat:()=>Pt,fromQuat2:()=>gt,fromRotation:()=>vt,fromRotationTranslation:()=>pt,fromRotationTranslationScale:()=>St,fromRotationTranslationScaleOrigin:()=>At,fromScaling:()=>_t,fromTranslation:()=>mt,fromValues:()=>Jn,fromXRotation:()=>Mt,fromYRotation:()=>dt,fromZRotation:()=>bt,frustum:()=>zt,getRotation:()=>wt,getScaling:()=>yt,getTranslation:()=>xt,identity:()=>tt,invert:()=>at,lookAt:()=>Lt,mul:()=>Gt,multiply:()=>it,multiplyScalar:()=>Dt,multiplyScalarAndAdd:()=>qt,ortho:()=>Tt,perspective:()=>Rt,perspectiveFromFieldOfView:()=>Et,rotate:()=>ct,rotateX:()=>ht,rotateY:()=>lt,rotateZ:()=>ft,scale:()=>st,set:()=>nt,str:()=>Ot,sub:()=>jt,subtract:()=>It,targetTo:()=>Ft,translate:()=>ut,transpose:()=>rt});var s={};r.r(s),r.d(s,{add:()=>Zt,angle:()=>Sr,bezier:()=>Mr,ceil:()=>Jt,clone:()=>Ht,copy:()=>Kt,create:()=>kt,cross:()=>mr,dist:()=>Or,distance:()=>ir,div:()=>Fr,divide:()=>$t,dot:()=>fr,equals:()=>Rr,exactEquals:()=>zr,floor:()=>nr,forEach:()=>Dr,fromValues:()=>Xt,hermite:()=>vr,inverse:()=>hr,len:()=>Cr,length:()=>Ut,lerp:()=>_r,max:()=>rr,min:()=>tr,mul:()=>Lr,multiply:()=>Wt,negate:()=>cr,normalize:()=>lr,random:()=>dr,rotateX:()=>xr,rotateY:()=>yr,rotateZ:()=>wr,round:()=>ar,scale:()=>er,scaleAndAdd:()=>or,set:()=>Yt,sqrDist:()=>Nr,sqrLen:()=>Ir,squaredDistance:()=>ur,squaredLength:()=>sr,str:()=>Pr,sub:()=>Tr,subtract:()=>Qt,transformMat3:()=>pr,transformMat4:()=>br,transformQuat:()=>gr,zero:()=>Ar});var c={};r.r(c),r.d(c,{add:()=>kr,ceil:()=>Kr,clone:()=>Vr,copy:()=>Gr,create:()=>qr,cross:()=>sa,dist:()=>ga,distance:()=>na,div:()=>pa,divide:()=>Xr,dot:()=>ua,equals:()=>Ma,exactEquals:()=>va,floor:()=>Yr,forEach:()=>Sa,fromValues:()=>Br,inverse:()=>oa,len:()=>ya,length:()=>ra,lerp:()=>ca,max:()=>Qr,min:()=>Zr,mul:()=>ba,multiply:()=>Ur,negate:()=>ea,normalize:()=>ia,random:()=>ha,round:()=>Wr,scale:()=>$r,scaleAndAdd:()=>Jr,set:()=>jr,sqrDist:()=>xa,sqrLen:()=>wa,squaredDistance:()=>ta,squaredLength:()=>aa,str:()=>_a,sub:()=>da,subtract:()=>Hr,transformMat4:()=>la,transformQuat:()=>fa,zero:()=>ma});var h={};r.r(h),r.d(h,{add:()=>te,calculateW:()=>Na,clone:()=>Wa,conjugate:()=>Ga,copy:()=>Ja,create:()=>Aa,dot:()=>ee,equals:()=>fe,exactEquals:()=>le,exp:()=>Ca,fromEuler:()=>ka,fromMat3:()=>ja,fromValues:()=>$a,getAngle:()=>Ea,getAxisAngle:()=>Ra,identity:()=>Pa,invert:()=>Ba,len:()=>ue,length:()=>ie,lerp:()=>oe,ln:()=>Ia,mul:()=>re,multiply:()=>Ta,normalize:()=>he,pow:()=>Da,random:()=>Va,rotateX:()=>La,rotateY:()=>Fa,rotateZ:()=>Oa,rotationTo:()=>me,scale:()=>ae,set:()=>ne,setAxes:()=>ve,setAxisAngle:()=>za,slerp:()=>qa,sqlerp:()=>_e,sqrLen:()=>ce,squaredLength:()=>se,str:()=>Ha});var l={};r.r(l),r.d(l,{add:()=>Ve,clone:()=>de,conjugate:()=>Xe,copy:()=>Se,create:()=>Me,dot:()=>ke,equals:()=>no,exactEquals:()=>Je,fromMat4:()=>we,fromRotation:()=>ye,fromRotationTranslation:()=>ge,fromRotationTranslationValues:()=>pe,fromTranslation:()=>xe,fromValues:()=>be,getDual:()=>Re,getReal:()=>ze,getTranslation:()=>Le,identity:()=>Ae,invert:()=>Ue,len:()=>Ye,length:()=>Ke,lerp:()=>He,mul:()=>Ge,multiply:()=>Be,normalize:()=>We,rotateAroundAxis:()=>qe,rotateByQuatAppend:()=>Ie,rotateByQuatPrepend:()=>De,rotateX:()=>Oe,rotateY:()=>Ne,rotateZ:()=>Ce,scale:()=>je,set:()=>Pe,setDual:()=>Te,setReal:()=>Ee,sqrLen:()=>Qe,squaredLength:()=>Ze,str:()=>$e,translate:()=>Fe});var f={};r.r(f),r.d(f,{add:()=>io,angle:()=>No,ceil:()=>ho,clone:()=>ro,copy:()=>eo,create:()=>to,cross:()=>Po,dist:()=>ko,distance:()=>bo,div:()=>jo,divide:()=>co,dot:()=>Ao,equals:()=>qo,exactEquals:()=>Do,floor:()=>lo,forEach:()=>Xo,fromValues:()=>ao,inverse:()=>wo,len:()=>Vo,length:()=>go,lerp:()=>zo,max:()=>mo,min:()=>fo,mul:()=>Go,multiply:()=>so,negate:()=>yo,normalize:()=>So,random:()=>Ro,rotate:()=>Oo,round:()=>_o,scale:()=>vo,scaleAndAdd:()=>Mo,set:()=>oo,sqrDist:()=>Ho,sqrLen:()=>Uo,squaredDistance:()=>po,squaredLength:()=>xo,str:()=>Io,sub:()=>Bo,subtract:()=>uo,transformMat2:()=>Eo,transformMat2d:()=>To,transformMat3:()=>Lo,transformMat4:()=>Fo,zero:()=>Co});var m=1e-6,_="undefined"!=typeof Float32Array?Float32Array:Array,v=Math.random;function M(n){_=n}var d=Math.PI/180;function b(n){return n*d}function p(n,t){return Math.abs(n-t)<=m*Math.max(1,Math.abs(n),Math.abs(t))}function g(){var n=new _(4);return _!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n}function x(n){var t=new _(4);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function y(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function w(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n}function S(n,t,r,a){var e=new _(4);return e[0]=n,e[1]=t,e[2]=r,e[3]=a,e}function A(n,t,r,a,e){return n[0]=t,n[1]=r,n[2]=a,n[3]=e,n}function P(n,t){if(n===t){var r=t[1];n[1]=t[2],n[2]=r}else n[0]=t[0],n[1]=t[2],n[2]=t[1],n[3]=t[3];return n}function z(n,t){var r=t[0],a=t[1],e=t[2],o=t[3],i=r*o-e*a;return i?(i=1/i,n[0]=o*i,n[1]=-a*i,n[2]=-e*i,n[3]=r*i,n):null}function R(n,t){var r=t[0];return n[0]=t[3],n[1]=-t[1],n[2]=-t[2],n[3]=r,n}function E(n){return n[0]*n[3]-n[2]*n[1]}function T(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3],u=r[0],s=r[1],c=r[2],h=r[3];return n[0]=a*u+o*s,n[1]=e*u+i*s,n[2]=a*c+o*h,n[3]=e*c+i*h,n}function L(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3],u=Math.sin(r),s=Math.cos(r);return n[0]=a*s+o*u,n[1]=e*s+i*u,n[2]=a*-u+o*s,n[3]=e*-u+i*s,n}function F(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3],u=r[0],s=r[1];return n[0]=a*u,n[1]=e*u,n[2]=o*s,n[3]=i*s,n}function O(n,t){var r=Math.sin(t),a=Math.cos(t);return n[0]=a,n[1]=r,n[2]=-r,n[3]=a,n}function N(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=t[1],n}function C(n){return"mat2("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}function I(n){return Math.hypot(n[0],n[1],n[2],n[3])}function D(n,t,r,a){return n[2]=a[2]/a[0],r[0]=a[0],r[1]=a[1],r[3]=a[3]-n[2]*r[1],[n,t,r]}function q(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n[3]=t[3]+r[3],n}function V(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n[3]=t[3]-r[3],n}function B(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]}function G(n,t){var r=n[0],a=n[1],e=n[2],o=n[3],i=t[0],u=t[1],s=t[2],c=t[3];return Math.abs(r-i)<=m*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=m*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(e-s)<=m*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(o-c)<=m*Math.max(1,Math.abs(o),Math.abs(c))}function j(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n}function k(n,t,r,a){return n[0]=t[0]+r[0]*a,n[1]=t[1]+r[1]*a,n[2]=t[2]+r[2]*a,n[3]=t[3]+r[3]*a,n}Math.hypot||(Math.hypot=function(){for(var n=0,t=arguments.length;t--;)n+=arguments[t]*arguments[t];return Math.sqrt(n)});var H=T,U=V;function X(){var n=new _(6);return _!=Float32Array&&(n[1]=0,n[2]=0,n[4]=0,n[5]=0),n[0]=1,n[3]=1,n}function K(n){var t=new _(6);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function Y(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function Z(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function Q(n,t,r,a,e,o){var i=new _(6);return i[0]=n,i[1]=t,i[2]=r,i[3]=a,i[4]=e,i[5]=o,i}function W(n,t,r,a,e,o,i){return n[0]=t,n[1]=r,n[2]=a,n[3]=e,n[4]=o,n[5]=i,n}function $(n,t){var r=t[0],a=t[1],e=t[2],o=t[3],i=t[4],u=t[5],s=r*o-a*e;return s?(s=1/s,n[0]=o*s,n[1]=-a*s,n[2]=-e*s,n[3]=r*s,n[4]=(e*u-o*i)*s,n[5]=(a*i-r*u)*s,n):null}function J(n){return n[0]*n[3]-n[1]*n[2]}function nn(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=r[0],h=r[1],l=r[2],f=r[3],m=r[4],_=r[5];return n[0]=a*c+o*h,n[1]=e*c+i*h,n[2]=a*l+o*f,n[3]=e*l+i*f,n[4]=a*m+o*_+u,n[5]=e*m+i*_+s,n}function tn(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=Math.sin(r),h=Math.cos(r);return n[0]=a*h+o*c,n[1]=e*h+i*c,n[2]=a*-c+o*h,n[3]=e*-c+i*h,n[4]=u,n[5]=s,n}function rn(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=r[0],h=r[1];return n[0]=a*c,n[1]=e*c,n[2]=o*h,n[3]=i*h,n[4]=u,n[5]=s,n}function an(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=r[0],h=r[1];return n[0]=a,n[1]=e,n[2]=o,n[3]=i,n[4]=a*c+o*h+u,n[5]=e*c+i*h+s,n}function en(n,t){var r=Math.sin(t),a=Math.cos(t);return n[0]=a,n[1]=r,n[2]=-r,n[3]=a,n[4]=0,n[5]=0,n}function on(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=t[1],n[4]=0,n[5]=0,n}function un(n,t){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=t[0],n[5]=t[1],n}function sn(n){return"mat2d("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+")"}function cn(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],n[5],1)}function hn(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n[3]=t[3]+r[3],n[4]=t[4]+r[4],n[5]=t[5]+r[5],n}function ln(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n[3]=t[3]-r[3],n[4]=t[4]-r[4],n[5]=t[5]-r[5],n}function fn(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n[4]=t[4]*r,n[5]=t[5]*r,n}function mn(n,t,r,a){return n[0]=t[0]+r[0]*a,n[1]=t[1]+r[1]*a,n[2]=t[2]+r[2]*a,n[3]=t[3]+r[3]*a,n[4]=t[4]+r[4]*a,n[5]=t[5]+r[5]*a,n}function _n(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]}function vn(n,t){var r=n[0],a=n[1],e=n[2],o=n[3],i=n[4],u=n[5],s=t[0],c=t[1],h=t[2],l=t[3],f=t[4],_=t[5];return Math.abs(r-s)<=m*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-c)<=m*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(e-h)<=m*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(o-l)<=m*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-f)<=m*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(u-_)<=m*Math.max(1,Math.abs(u),Math.abs(_))}var Mn=nn,dn=ln;function bn(){var n=new _(9);return _!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[5]=0,n[6]=0,n[7]=0),n[0]=1,n[4]=1,n[8]=1,n}function pn(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[4],n[4]=t[5],n[5]=t[6],n[6]=t[8],n[7]=t[9],n[8]=t[10],n}function gn(n){var t=new _(9);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t}function xn(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function yn(n,t,r,a,e,o,i,u,s){var c=new _(9);return c[0]=n,c[1]=t,c[2]=r,c[3]=a,c[4]=e,c[5]=o,c[6]=i,c[7]=u,c[8]=s,c}function wn(n,t,r,a,e,o,i,u,s,c){return n[0]=t,n[1]=r,n[2]=a,n[3]=e,n[4]=o,n[5]=i,n[6]=u,n[7]=s,n[8]=c,n}function Sn(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function An(n,t){if(n===t){var r=t[1],a=t[2],e=t[5];n[1]=t[3],n[2]=t[6],n[3]=r,n[5]=t[7],n[6]=a,n[7]=e}else n[0]=t[0],n[1]=t[3],n[2]=t[6],n[3]=t[1],n[4]=t[4],n[5]=t[7],n[6]=t[2],n[7]=t[5],n[8]=t[8];return n}function Pn(n,t){var r=t[0],a=t[1],e=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],h=t[8],l=h*i-u*c,f=-h*o+u*s,m=c*o-i*s,_=r*l+a*f+e*m;return _?(_=1/_,n[0]=l*_,n[1]=(-h*a+e*c)*_,n[2]=(u*a-e*i)*_,n[3]=f*_,n[4]=(h*r-e*s)*_,n[5]=(-u*r+e*o)*_,n[6]=m*_,n[7]=(-c*r+a*s)*_,n[8]=(i*r-a*o)*_,n):null}function zn(n,t){var r=t[0],a=t[1],e=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],h=t[8];return n[0]=i*h-u*c,n[1]=e*c-a*h,n[2]=a*u-e*i,n[3]=u*s-o*h,n[4]=r*h-e*s,n[5]=e*o-r*u,n[6]=o*c-i*s,n[7]=a*s-r*c,n[8]=r*i-a*o,n}function Rn(n){var t=n[0],r=n[1],a=n[2],e=n[3],o=n[4],i=n[5],u=n[6],s=n[7],c=n[8];return t*(c*o-i*s)+r*(-c*e+i*u)+a*(s*e-o*u)}function En(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=t[6],h=t[7],l=t[8],f=r[0],m=r[1],_=r[2],v=r[3],M=r[4],d=r[5],b=r[6],p=r[7],g=r[8];return n[0]=f*a+m*i+_*c,n[1]=f*e+m*u+_*h,n[2]=f*o+m*s+_*l,n[3]=v*a+M*i+d*c,n[4]=v*e+M*u+d*h,n[5]=v*o+M*s+d*l,n[6]=b*a+p*i+g*c,n[7]=b*e+p*u+g*h,n[8]=b*o+p*s+g*l,n}function Tn(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=t[6],h=t[7],l=t[8],f=r[0],m=r[1];return n[0]=a,n[1]=e,n[2]=o,n[3]=i,n[4]=u,n[5]=s,n[6]=f*a+m*i+c,n[7]=f*e+m*u+h,n[8]=f*o+m*s+l,n}function Ln(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=t[6],h=t[7],l=t[8],f=Math.sin(r),m=Math.cos(r);return n[0]=m*a+f*i,n[1]=m*e+f*u,n[2]=m*o+f*s,n[3]=m*i-f*a,n[4]=m*u-f*e,n[5]=m*s-f*o,n[6]=c,n[7]=h,n[8]=l,n}function Fn(n,t,r){var a=r[0],e=r[1];return n[0]=a*t[0],n[1]=a*t[1],n[2]=a*t[2],n[3]=e*t[3],n[4]=e*t[4],n[5]=e*t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function On(n,t){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=t[0],n[7]=t[1],n[8]=1,n}function Nn(n,t){var r=Math.sin(t),a=Math.cos(t);return n[0]=a,n[1]=r,n[2]=0,n[3]=-r,n[4]=a,n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function Cn(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=0,n[4]=t[1],n[5]=0,n[6]=0,n[7]=0,n[8]=1,n}function In(n,t){return n[0]=t[0],n[1]=t[1],n[2]=0,n[3]=t[2],n[4]=t[3],n[5]=0,n[6]=t[4],n[7]=t[5],n[8]=1,n}function Dn(n,t){var r=t[0],a=t[1],e=t[2],o=t[3],i=r+r,u=a+a,s=e+e,c=r*i,h=a*i,l=a*u,f=e*i,m=e*u,_=e*s,v=o*i,M=o*u,d=o*s;return n[0]=1-l-_,n[3]=h-d,n[6]=f+M,n[1]=h+d,n[4]=1-c-_,n[7]=m-v,n[2]=f-M,n[5]=m+v,n[8]=1-c-l,n}function qn(n,t){var r=t[0],a=t[1],e=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],h=t[8],l=t[9],f=t[10],m=t[11],_=t[12],v=t[13],M=t[14],d=t[15],b=r*u-a*i,p=r*s-e*i,g=r*c-o*i,x=a*s-e*u,y=a*c-o*u,w=e*c-o*s,S=h*v-l*_,A=h*M-f*_,P=h*d-m*_,z=l*M-f*v,R=l*d-m*v,E=f*d-m*M,T=b*E-p*R+g*z+x*P-y*A+w*S;return T?(T=1/T,n[0]=(u*E-s*R+c*z)*T,n[1]=(s*P-i*E-c*A)*T,n[2]=(i*R-u*P+c*S)*T,n[3]=(e*R-a*E-o*z)*T,n[4]=(r*E-e*P+o*A)*T,n[5]=(a*P-r*R-o*S)*T,n[6]=(v*w-M*y+d*x)*T,n[7]=(M*g-_*w-d*p)*T,n[8]=(_*y-v*g+d*b)*T,n):null}function Vn(n,t,r){return n[0]=2/t,n[1]=0,n[2]=0,n[3]=0,n[4]=-2/r,n[5]=0,n[6]=-1,n[7]=1,n[8]=1,n}function Bn(n){return"mat3("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+")"}function Gn(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])}function jn(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n[3]=t[3]+r[3],n[4]=t[4]+r[4],n[5]=t[5]+r[5],n[6]=t[6]+r[6],n[7]=t[7]+r[7],n[8]=t[8]+r[8],n}function kn(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n[3]=t[3]-r[3],n[4]=t[4]-r[4],n[5]=t[5]-r[5],n[6]=t[6]-r[6],n[7]=t[7]-r[7],n[8]=t[8]-r[8],n}function Hn(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n[4]=t[4]*r,n[5]=t[5]*r,n[6]=t[6]*r,n[7]=t[7]*r,n[8]=t[8]*r,n}function Un(n,t,r,a){return n[0]=t[0]+r[0]*a,n[1]=t[1]+r[1]*a,n[2]=t[2]+r[2]*a,n[3]=t[3]+r[3]*a,n[4]=t[4]+r[4]*a,n[5]=t[5]+r[5]*a,n[6]=t[6]+r[6]*a,n[7]=t[7]+r[7]*a,n[8]=t[8]+r[8]*a,n}function Xn(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]}function Kn(n,t){var r=n[0],a=n[1],e=n[2],o=n[3],i=n[4],u=n[5],s=n[6],c=n[7],h=n[8],l=t[0],f=t[1],_=t[2],v=t[3],M=t[4],d=t[5],b=t[6],p=t[7],g=t[8];return Math.abs(r-l)<=m*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-f)<=m*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(e-_)<=m*Math.max(1,Math.abs(e),Math.abs(_))&&Math.abs(o-v)<=m*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(i-M)<=m*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(u-d)<=m*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-b)<=m*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(c-p)<=m*Math.max(1,Math.abs(c),Math.abs(p))&&Math.abs(h-g)<=m*Math.max(1,Math.abs(h),Math.abs(g))}var Yn=En,Zn=kn;function Qn(){var n=new _(16);return _!=Float32Array&&(n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0),n[0]=1,n[5]=1,n[10]=1,n[15]=1,n}function Wn(n){var t=new _(16);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function $n(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function Jn(n,t,r,a,e,o,i,u,s,c,h,l,f,m,v,M){var d=new _(16);return d[0]=n,d[1]=t,d[2]=r,d[3]=a,d[4]=e,d[5]=o,d[6]=i,d[7]=u,d[8]=s,d[9]=c,d[10]=h,d[11]=l,d[12]=f,d[13]=m,d[14]=v,d[15]=M,d}function nt(n,t,r,a,e,o,i,u,s,c,h,l,f,m,_,v,M){return n[0]=t,n[1]=r,n[2]=a,n[3]=e,n[4]=o,n[5]=i,n[6]=u,n[7]=s,n[8]=c,n[9]=h,n[10]=l,n[11]=f,n[12]=m,n[13]=_,n[14]=v,n[15]=M,n}function tt(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function rt(n,t){if(n===t){var r=t[1],a=t[2],e=t[3],o=t[6],i=t[7],u=t[11];n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=r,n[6]=t[9],n[7]=t[13],n[8]=a,n[9]=o,n[11]=t[14],n[12]=e,n[13]=i,n[14]=u}else n[0]=t[0],n[1]=t[4],n[2]=t[8],n[3]=t[12],n[4]=t[1],n[5]=t[5],n[6]=t[9],n[7]=t[13],n[8]=t[2],n[9]=t[6],n[10]=t[10],n[11]=t[14],n[12]=t[3],n[13]=t[7],n[14]=t[11],n[15]=t[15];return n}function at(n,t){var r=t[0],a=t[1],e=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],h=t[8],l=t[9],f=t[10],m=t[11],_=t[12],v=t[13],M=t[14],d=t[15],b=r*u-a*i,p=r*s-e*i,g=r*c-o*i,x=a*s-e*u,y=a*c-o*u,w=e*c-o*s,S=h*v-l*_,A=h*M-f*_,P=h*d-m*_,z=l*M-f*v,R=l*d-m*v,E=f*d-m*M,T=b*E-p*R+g*z+x*P-y*A+w*S;return T?(T=1/T,n[0]=(u*E-s*R+c*z)*T,n[1]=(e*R-a*E-o*z)*T,n[2]=(v*w-M*y+d*x)*T,n[3]=(f*y-l*w-m*x)*T,n[4]=(s*P-i*E-c*A)*T,n[5]=(r*E-e*P+o*A)*T,n[6]=(M*g-_*w-d*p)*T,n[7]=(h*w-f*g+m*p)*T,n[8]=(i*R-u*P+c*S)*T,n[9]=(a*P-r*R-o*S)*T,n[10]=(_*y-v*g+d*b)*T,n[11]=(l*g-h*y-m*b)*T,n[12]=(u*A-i*z-s*S)*T,n[13]=(r*z-a*A+e*S)*T,n[14]=(v*p-_*x-M*b)*T,n[15]=(h*x-l*p+f*b)*T,n):null}function et(n,t){var r=t[0],a=t[1],e=t[2],o=t[3],i=t[4],u=t[5],s=t[6],c=t[7],h=t[8],l=t[9],f=t[10],m=t[11],_=t[12],v=t[13],M=t[14],d=t[15];return n[0]=u*(f*d-m*M)-l*(s*d-c*M)+v*(s*m-c*f),n[1]=-(a*(f*d-m*M)-l*(e*d-o*M)+v*(e*m-o*f)),n[2]=a*(s*d-c*M)-u*(e*d-o*M)+v*(e*c-o*s),n[3]=-(a*(s*m-c*f)-u*(e*m-o*f)+l*(e*c-o*s)),n[4]=-(i*(f*d-m*M)-h*(s*d-c*M)+_*(s*m-c*f)),n[5]=r*(f*d-m*M)-h*(e*d-o*M)+_*(e*m-o*f),n[6]=-(r*(s*d-c*M)-i*(e*d-o*M)+_*(e*c-o*s)),n[7]=r*(s*m-c*f)-i*(e*m-o*f)+h*(e*c-o*s),n[8]=i*(l*d-m*v)-h*(u*d-c*v)+_*(u*m-c*l),n[9]=-(r*(l*d-m*v)-h*(a*d-o*v)+_*(a*m-o*l)),n[10]=r*(u*d-c*v)-i*(a*d-o*v)+_*(a*c-o*u),n[11]=-(r*(u*m-c*l)-i*(a*m-o*l)+h*(a*c-o*u)),n[12]=-(i*(l*M-f*v)-h*(u*M-s*v)+_*(u*f-s*l)),n[13]=r*(l*M-f*v)-h*(a*M-e*v)+_*(a*f-e*l),n[14]=-(r*(u*M-s*v)-i*(a*M-e*v)+_*(a*s-e*u)),n[15]=r*(u*f-s*l)-i*(a*f-e*l)+h*(a*s-e*u),n}function ot(n){var t=n[0],r=n[1],a=n[2],e=n[3],o=n[4],i=n[5],u=n[6],s=n[7],c=n[8],h=n[9],l=n[10],f=n[11],m=n[12],_=n[13],v=n[14],M=n[15];return(t*i-r*o)*(l*M-f*v)-(t*u-a*o)*(h*M-f*_)+(t*s-e*o)*(h*v-l*_)+(r*u-a*i)*(c*M-f*m)-(r*s-e*i)*(c*v-l*m)+(a*s-e*u)*(c*_-h*m)}function it(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=t[6],h=t[7],l=t[8],f=t[9],m=t[10],_=t[11],v=t[12],M=t[13],d=t[14],b=t[15],p=r[0],g=r[1],x=r[2],y=r[3];return n[0]=p*a+g*u+x*l+y*v,n[1]=p*e+g*s+x*f+y*M,n[2]=p*o+g*c+x*m+y*d,n[3]=p*i+g*h+x*_+y*b,p=r[4],g=r[5],x=r[6],y=r[7],n[4]=p*a+g*u+x*l+y*v,n[5]=p*e+g*s+x*f+y*M,n[6]=p*o+g*c+x*m+y*d,n[7]=p*i+g*h+x*_+y*b,p=r[8],g=r[9],x=r[10],y=r[11],n[8]=p*a+g*u+x*l+y*v,n[9]=p*e+g*s+x*f+y*M,n[10]=p*o+g*c+x*m+y*d,n[11]=p*i+g*h+x*_+y*b,p=r[12],g=r[13],x=r[14],y=r[15],n[12]=p*a+g*u+x*l+y*v,n[13]=p*e+g*s+x*f+y*M,n[14]=p*o+g*c+x*m+y*d,n[15]=p*i+g*h+x*_+y*b,n}function ut(n,t,r){var a,e,o,i,u,s,c,h,l,f,m,_,v=r[0],M=r[1],d=r[2];return t===n?(n[12]=t[0]*v+t[4]*M+t[8]*d+t[12],n[13]=t[1]*v+t[5]*M+t[9]*d+t[13],n[14]=t[2]*v+t[6]*M+t[10]*d+t[14],n[15]=t[3]*v+t[7]*M+t[11]*d+t[15]):(a=t[0],e=t[1],o=t[2],i=t[3],u=t[4],s=t[5],c=t[6],h=t[7],l=t[8],f=t[9],m=t[10],_=t[11],n[0]=a,n[1]=e,n[2]=o,n[3]=i,n[4]=u,n[5]=s,n[6]=c,n[7]=h,n[8]=l,n[9]=f,n[10]=m,n[11]=_,n[12]=a*v+u*M+l*d+t[12],n[13]=e*v+s*M+f*d+t[13],n[14]=o*v+c*M+m*d+t[14],n[15]=i*v+h*M+_*d+t[15]),n}function st(n,t,r){var a=r[0],e=r[1],o=r[2];return n[0]=t[0]*a,n[1]=t[1]*a,n[2]=t[2]*a,n[3]=t[3]*a,n[4]=t[4]*e,n[5]=t[5]*e,n[6]=t[6]*e,n[7]=t[7]*e,n[8]=t[8]*o,n[9]=t[9]*o,n[10]=t[10]*o,n[11]=t[11]*o,n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function ct(n,t,r,a){var e,o,i,u,s,c,h,l,f,_,v,M,d,b,p,g,x,y,w,S,A,P,z,R,E=a[0],T=a[1],L=a[2],F=Math.hypot(E,T,L);return F<m?null:(E*=F=1/F,T*=F,L*=F,e=Math.sin(r),i=1-(o=Math.cos(r)),u=t[0],s=t[1],c=t[2],h=t[3],l=t[4],f=t[5],_=t[6],v=t[7],M=t[8],d=t[9],b=t[10],p=t[11],g=E*E*i+o,x=T*E*i+L*e,y=L*E*i-T*e,w=E*T*i-L*e,S=T*T*i+o,A=L*T*i+E*e,P=E*L*i+T*e,z=T*L*i-E*e,R=L*L*i+o,n[0]=u*g+l*x+M*y,n[1]=s*g+f*x+d*y,n[2]=c*g+_*x+b*y,n[3]=h*g+v*x+p*y,n[4]=u*w+l*S+M*A,n[5]=s*w+f*S+d*A,n[6]=c*w+_*S+b*A,n[7]=h*w+v*S+p*A,n[8]=u*P+l*z+M*R,n[9]=s*P+f*z+d*R,n[10]=c*P+_*z+b*R,n[11]=h*P+v*z+p*R,t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n)}function ht(n,t,r){var a=Math.sin(r),e=Math.cos(r),o=t[4],i=t[5],u=t[6],s=t[7],c=t[8],h=t[9],l=t[10],f=t[11];return t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[4]=o*e+c*a,n[5]=i*e+h*a,n[6]=u*e+l*a,n[7]=s*e+f*a,n[8]=c*e-o*a,n[9]=h*e-i*a,n[10]=l*e-u*a,n[11]=f*e-s*a,n}function lt(n,t,r){var a=Math.sin(r),e=Math.cos(r),o=t[0],i=t[1],u=t[2],s=t[3],c=t[8],h=t[9],l=t[10],f=t[11];return t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=o*e-c*a,n[1]=i*e-h*a,n[2]=u*e-l*a,n[3]=s*e-f*a,n[8]=o*a+c*e,n[9]=i*a+h*e,n[10]=u*a+l*e,n[11]=s*a+f*e,n}function ft(n,t,r){var a=Math.sin(r),e=Math.cos(r),o=t[0],i=t[1],u=t[2],s=t[3],c=t[4],h=t[5],l=t[6],f=t[7];return t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n[0]=o*e+c*a,n[1]=i*e+h*a,n[2]=u*e+l*a,n[3]=s*e+f*a,n[4]=c*e-o*a,n[5]=h*e-i*a,n[6]=l*e-u*a,n[7]=f*e-s*a,n}function mt(n,t){return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n}function _t(n,t){return n[0]=t[0],n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=t[1],n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=t[2],n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function vt(n,t,r){var a,e,o,i=r[0],u=r[1],s=r[2],c=Math.hypot(i,u,s);return c<m?null:(i*=c=1/c,u*=c,s*=c,a=Math.sin(t),o=1-(e=Math.cos(t)),n[0]=i*i*o+e,n[1]=u*i*o+s*a,n[2]=s*i*o-u*a,n[3]=0,n[4]=i*u*o-s*a,n[5]=u*u*o+e,n[6]=s*u*o+i*a,n[7]=0,n[8]=i*s*o+u*a,n[9]=u*s*o-i*a,n[10]=s*s*o+e,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n)}function Mt(n,t){var r=Math.sin(t),a=Math.cos(t);return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=a,n[6]=r,n[7]=0,n[8]=0,n[9]=-r,n[10]=a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function dt(n,t){var r=Math.sin(t),a=Math.cos(t);return n[0]=a,n[1]=0,n[2]=-r,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=r,n[9]=0,n[10]=a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function bt(n,t){var r=Math.sin(t),a=Math.cos(t);return n[0]=a,n[1]=r,n[2]=0,n[3]=0,n[4]=-r,n[5]=a,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function pt(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3],u=a+a,s=e+e,c=o+o,h=a*u,l=a*s,f=a*c,m=e*s,_=e*c,v=o*c,M=i*u,d=i*s,b=i*c;return n[0]=1-(m+v),n[1]=l+b,n[2]=f-d,n[3]=0,n[4]=l-b,n[5]=1-(h+v),n[6]=_+M,n[7]=0,n[8]=f+d,n[9]=_-M,n[10]=1-(h+m),n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function gt(n,t){var r=new _(3),a=-t[0],e=-t[1],o=-t[2],i=t[3],u=t[4],s=t[5],c=t[6],h=t[7],l=a*a+e*e+o*o+i*i;return l>0?(r[0]=2*(u*i+h*a+s*o-c*e)/l,r[1]=2*(s*i+h*e+c*a-u*o)/l,r[2]=2*(c*i+h*o+u*e-s*a)/l):(r[0]=2*(u*i+h*a+s*o-c*e),r[1]=2*(s*i+h*e+c*a-u*o),r[2]=2*(c*i+h*o+u*e-s*a)),pt(n,t,r),n}function xt(n,t){return n[0]=t[12],n[1]=t[13],n[2]=t[14],n}function yt(n,t){var r=t[0],a=t[1],e=t[2],o=t[4],i=t[5],u=t[6],s=t[8],c=t[9],h=t[10];return n[0]=Math.hypot(r,a,e),n[1]=Math.hypot(o,i,u),n[2]=Math.hypot(s,c,h),n}function wt(n,t){var r=new _(3);yt(r,t);var a=1/r[0],e=1/r[1],o=1/r[2],i=t[0]*a,u=t[1]*e,s=t[2]*o,c=t[4]*a,h=t[5]*e,l=t[6]*o,f=t[8]*a,m=t[9]*e,v=t[10]*o,M=i+h+v,d=0;return M>0?(d=2*Math.sqrt(M+1),n[3]=.25*d,n[0]=(l-m)/d,n[1]=(f-s)/d,n[2]=(u-c)/d):i>h&&i>v?(d=2*Math.sqrt(1+i-h-v),n[3]=(l-m)/d,n[0]=.25*d,n[1]=(u+c)/d,n[2]=(f+s)/d):h>v?(d=2*Math.sqrt(1+h-i-v),n[3]=(f-s)/d,n[0]=(u+c)/d,n[1]=.25*d,n[2]=(l+m)/d):(d=2*Math.sqrt(1+v-i-h),n[3]=(u-c)/d,n[0]=(f+s)/d,n[1]=(l+m)/d,n[2]=.25*d),n}function St(n,t,r,a){var e=t[0],o=t[1],i=t[2],u=t[3],s=e+e,c=o+o,h=i+i,l=e*s,f=e*c,m=e*h,_=o*c,v=o*h,M=i*h,d=u*s,b=u*c,p=u*h,g=a[0],x=a[1],y=a[2];return n[0]=(1-(_+M))*g,n[1]=(f+p)*g,n[2]=(m-b)*g,n[3]=0,n[4]=(f-p)*x,n[5]=(1-(l+M))*x,n[6]=(v+d)*x,n[7]=0,n[8]=(m+b)*y,n[9]=(v-d)*y,n[10]=(1-(l+_))*y,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n}function At(n,t,r,a,e){var o=t[0],i=t[1],u=t[2],s=t[3],c=o+o,h=i+i,l=u+u,f=o*c,m=o*h,_=o*l,v=i*h,M=i*l,d=u*l,b=s*c,p=s*h,g=s*l,x=a[0],y=a[1],w=a[2],S=e[0],A=e[1],P=e[2],z=(1-(v+d))*x,R=(m+g)*x,E=(_-p)*x,T=(m-g)*y,L=(1-(f+d))*y,F=(M+b)*y,O=(_+p)*w,N=(M-b)*w,C=(1-(f+v))*w;return n[0]=z,n[1]=R,n[2]=E,n[3]=0,n[4]=T,n[5]=L,n[6]=F,n[7]=0,n[8]=O,n[9]=N,n[10]=C,n[11]=0,n[12]=r[0]+S-(z*S+T*A+O*P),n[13]=r[1]+A-(R*S+L*A+N*P),n[14]=r[2]+P-(E*S+F*A+C*P),n[15]=1,n}function Pt(n,t){var r=t[0],a=t[1],e=t[2],o=t[3],i=r+r,u=a+a,s=e+e,c=r*i,h=a*i,l=a*u,f=e*i,m=e*u,_=e*s,v=o*i,M=o*u,d=o*s;return n[0]=1-l-_,n[1]=h+d,n[2]=f-M,n[3]=0,n[4]=h-d,n[5]=1-c-_,n[6]=m+v,n[7]=0,n[8]=f+M,n[9]=m-v,n[10]=1-c-l,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n}function zt(n,t,r,a,e,o,i){var u=1/(r-t),s=1/(e-a),c=1/(o-i);return n[0]=2*o*u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*o*s,n[6]=0,n[7]=0,n[8]=(r+t)*u,n[9]=(e+a)*s,n[10]=(i+o)*c,n[11]=-1,n[12]=0,n[13]=0,n[14]=i*o*2*c,n[15]=0,n}function Rt(n,t,r,a,e){var o,i=1/Math.tan(t/2);return n[0]=i/r,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=i,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[11]=-1,n[12]=0,n[13]=0,n[15]=0,null!=e&&e!==1/0?(o=1/(a-e),n[10]=(e+a)*o,n[14]=2*e*a*o):(n[10]=-1,n[14]=-2*a),n}function Et(n,t,r,a){var e=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),s=2/(i+u),c=2/(e+o);return n[0]=s,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=c,n[6]=0,n[7]=0,n[8]=-(i-u)*s*.5,n[9]=(e-o)*c*.5,n[10]=a/(r-a),n[11]=-1,n[12]=0,n[13]=0,n[14]=a*r/(r-a),n[15]=0,n}function Tt(n,t,r,a,e,o,i){var u=1/(t-r),s=1/(a-e),c=1/(o-i);return n[0]=-2*u,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=-2*s,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=2*c,n[11]=0,n[12]=(t+r)*u,n[13]=(e+a)*s,n[14]=(i+o)*c,n[15]=1,n}function Lt(n,t,r,a){var e,o,i,u,s,c,h,l,f,_,v=t[0],M=t[1],d=t[2],b=a[0],p=a[1],g=a[2],x=r[0],y=r[1],w=r[2];return Math.abs(v-x)<m&&Math.abs(M-y)<m&&Math.abs(d-w)<m?tt(n):(h=v-x,l=M-y,f=d-w,e=p*(f*=_=1/Math.hypot(h,l,f))-g*(l*=_),o=g*(h*=_)-b*f,i=b*l-p*h,(_=Math.hypot(e,o,i))?(e*=_=1/_,o*=_,i*=_):(e=0,o=0,i=0),u=l*i-f*o,s=f*e-h*i,c=h*o-l*e,(_=Math.hypot(u,s,c))?(u*=_=1/_,s*=_,c*=_):(u=0,s=0,c=0),n[0]=e,n[1]=u,n[2]=h,n[3]=0,n[4]=o,n[5]=s,n[6]=l,n[7]=0,n[8]=i,n[9]=c,n[10]=f,n[11]=0,n[12]=-(e*v+o*M+i*d),n[13]=-(u*v+s*M+c*d),n[14]=-(h*v+l*M+f*d),n[15]=1,n)}function Ft(n,t,r,a){var e=t[0],o=t[1],i=t[2],u=a[0],s=a[1],c=a[2],h=e-r[0],l=o-r[1],f=i-r[2],m=h*h+l*l+f*f;m>0&&(h*=m=1/Math.sqrt(m),l*=m,f*=m);var _=s*f-c*l,v=c*h-u*f,M=u*l-s*h;return(m=_*_+v*v+M*M)>0&&(_*=m=1/Math.sqrt(m),v*=m,M*=m),n[0]=_,n[1]=v,n[2]=M,n[3]=0,n[4]=l*M-f*v,n[5]=f*_-h*M,n[6]=h*v-l*_,n[7]=0,n[8]=h,n[9]=l,n[10]=f,n[11]=0,n[12]=e,n[13]=o,n[14]=i,n[15]=1,n}function Ot(n){return"mat4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+", "+n[8]+", "+n[9]+", "+n[10]+", "+n[11]+", "+n[12]+", "+n[13]+", "+n[14]+", "+n[15]+")"}function Nt(n){return Math.hypot(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])}function Ct(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n[3]=t[3]+r[3],n[4]=t[4]+r[4],n[5]=t[5]+r[5],n[6]=t[6]+r[6],n[7]=t[7]+r[7],n[8]=t[8]+r[8],n[9]=t[9]+r[9],n[10]=t[10]+r[10],n[11]=t[11]+r[11],n[12]=t[12]+r[12],n[13]=t[13]+r[13],n[14]=t[14]+r[14],n[15]=t[15]+r[15],n}function It(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n[3]=t[3]-r[3],n[4]=t[4]-r[4],n[5]=t[5]-r[5],n[6]=t[6]-r[6],n[7]=t[7]-r[7],n[8]=t[8]-r[8],n[9]=t[9]-r[9],n[10]=t[10]-r[10],n[11]=t[11]-r[11],n[12]=t[12]-r[12],n[13]=t[13]-r[13],n[14]=t[14]-r[14],n[15]=t[15]-r[15],n}function Dt(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n[4]=t[4]*r,n[5]=t[5]*r,n[6]=t[6]*r,n[7]=t[7]*r,n[8]=t[8]*r,n[9]=t[9]*r,n[10]=t[10]*r,n[11]=t[11]*r,n[12]=t[12]*r,n[13]=t[13]*r,n[14]=t[14]*r,n[15]=t[15]*r,n}function qt(n,t,r,a){return n[0]=t[0]+r[0]*a,n[1]=t[1]+r[1]*a,n[2]=t[2]+r[2]*a,n[3]=t[3]+r[3]*a,n[4]=t[4]+r[4]*a,n[5]=t[5]+r[5]*a,n[6]=t[6]+r[6]*a,n[7]=t[7]+r[7]*a,n[8]=t[8]+r[8]*a,n[9]=t[9]+r[9]*a,n[10]=t[10]+r[10]*a,n[11]=t[11]+r[11]*a,n[12]=t[12]+r[12]*a,n[13]=t[13]+r[13]*a,n[14]=t[14]+r[14]*a,n[15]=t[15]+r[15]*a,n}function Vt(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]&&n[8]===t[8]&&n[9]===t[9]&&n[10]===t[10]&&n[11]===t[11]&&n[12]===t[12]&&n[13]===t[13]&&n[14]===t[14]&&n[15]===t[15]}function Bt(n,t){var r=n[0],a=n[1],e=n[2],o=n[3],i=n[4],u=n[5],s=n[6],c=n[7],h=n[8],l=n[9],f=n[10],_=n[11],v=n[12],M=n[13],d=n[14],b=n[15],p=t[0],g=t[1],x=t[2],y=t[3],w=t[4],S=t[5],A=t[6],P=t[7],z=t[8],R=t[9],E=t[10],T=t[11],L=t[12],F=t[13],O=t[14],N=t[15];return Math.abs(r-p)<=m*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(a-g)<=m*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(e-x)<=m*Math.max(1,Math.abs(e),Math.abs(x))&&Math.abs(o-y)<=m*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(i-w)<=m*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(u-S)<=m*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(s-A)<=m*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(c-P)<=m*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(h-z)<=m*Math.max(1,Math.abs(h),Math.abs(z))&&Math.abs(l-R)<=m*Math.max(1,Math.abs(l),Math.abs(R))&&Math.abs(f-E)<=m*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(_-T)<=m*Math.max(1,Math.abs(_),Math.abs(T))&&Math.abs(v-L)<=m*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(M-F)<=m*Math.max(1,Math.abs(M),Math.abs(F))&&Math.abs(d-O)<=m*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(b-N)<=m*Math.max(1,Math.abs(b),Math.abs(N))}var Gt=it,jt=It;function kt(){var n=new _(3);return _!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n}function Ht(n){var t=new _(3);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function Ut(n){var t=n[0],r=n[1],a=n[2];return Math.hypot(t,r,a)}function Xt(n,t,r){var a=new _(3);return a[0]=n,a[1]=t,a[2]=r,a}function Kt(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function Yt(n,t,r,a){return n[0]=t,n[1]=r,n[2]=a,n}function Zt(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n}function Qt(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n}function Wt(n,t,r){return n[0]=t[0]*r[0],n[1]=t[1]*r[1],n[2]=t[2]*r[2],n}function $t(n,t,r){return n[0]=t[0]/r[0],n[1]=t[1]/r[1],n[2]=t[2]/r[2],n}function Jt(n,t){return n[0]=Math.ceil(t[0]),n[1]=Math.ceil(t[1]),n[2]=Math.ceil(t[2]),n}function nr(n,t){return n[0]=Math.floor(t[0]),n[1]=Math.floor(t[1]),n[2]=Math.floor(t[2]),n}function tr(n,t,r){return n[0]=Math.min(t[0],r[0]),n[1]=Math.min(t[1],r[1]),n[2]=Math.min(t[2],r[2]),n}function rr(n,t,r){return n[0]=Math.max(t[0],r[0]),n[1]=Math.max(t[1],r[1]),n[2]=Math.max(t[2],r[2]),n}function ar(n,t){return n[0]=Math.round(t[0]),n[1]=Math.round(t[1]),n[2]=Math.round(t[2]),n}function er(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n}function or(n,t,r,a){return n[0]=t[0]+r[0]*a,n[1]=t[1]+r[1]*a,n[2]=t[2]+r[2]*a,n}function ir(n,t){var r=t[0]-n[0],a=t[1]-n[1],e=t[2]-n[2];return Math.hypot(r,a,e)}function ur(n,t){var r=t[0]-n[0],a=t[1]-n[1],e=t[2]-n[2];return r*r+a*a+e*e}function sr(n){var t=n[0],r=n[1],a=n[2];return t*t+r*r+a*a}function cr(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n}function hr(n,t){return n[0]=1/t[0],n[1]=1/t[1],n[2]=1/t[2],n}function lr(n,t){var r=t[0],a=t[1],e=t[2],o=r*r+a*a+e*e;return o>0&&(o=1/Math.sqrt(o)),n[0]=t[0]*o,n[1]=t[1]*o,n[2]=t[2]*o,n}function fr(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function mr(n,t,r){var a=t[0],e=t[1],o=t[2],i=r[0],u=r[1],s=r[2];return n[0]=e*s-o*u,n[1]=o*i-a*s,n[2]=a*u-e*i,n}function _r(n,t,r,a){var e=t[0],o=t[1],i=t[2];return n[0]=e+a*(r[0]-e),n[1]=o+a*(r[1]-o),n[2]=i+a*(r[2]-i),n}function vr(n,t,r,a,e,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,c=i*(o-1),h=i*(3-2*o);return n[0]=t[0]*u+r[0]*s+a[0]*c+e[0]*h,n[1]=t[1]*u+r[1]*s+a[1]*c+e[1]*h,n[2]=t[2]*u+r[2]*s+a[2]*c+e[2]*h,n}function Mr(n,t,r,a,e,o){var i=1-o,u=i*i,s=o*o,c=u*i,h=3*o*u,l=3*s*i,f=s*o;return n[0]=t[0]*c+r[0]*h+a[0]*l+e[0]*f,n[1]=t[1]*c+r[1]*h+a[1]*l+e[1]*f,n[2]=t[2]*c+r[2]*h+a[2]*l+e[2]*f,n}function dr(n,t){t=t||1;var r=2*v()*Math.PI,a=2*v()-1,e=Math.sqrt(1-a*a)*t;return n[0]=Math.cos(r)*e,n[1]=Math.sin(r)*e,n[2]=a*t,n}function br(n,t,r){var a=t[0],e=t[1],o=t[2],i=r[3]*a+r[7]*e+r[11]*o+r[15];return i=i||1,n[0]=(r[0]*a+r[4]*e+r[8]*o+r[12])/i,n[1]=(r[1]*a+r[5]*e+r[9]*o+r[13])/i,n[2]=(r[2]*a+r[6]*e+r[10]*o+r[14])/i,n}function pr(n,t,r){var a=t[0],e=t[1],o=t[2];return n[0]=a*r[0]+e*r[3]+o*r[6],n[1]=a*r[1]+e*r[4]+o*r[7],n[2]=a*r[2]+e*r[5]+o*r[8],n}function gr(n,t,r){var a=r[0],e=r[1],o=r[2],i=r[3],u=t[0],s=t[1],c=t[2],h=e*c-o*s,l=o*u-a*c,f=a*s-e*u,m=e*f-o*l,_=o*h-a*f,v=a*l-e*h,M=2*i;return h*=M,l*=M,f*=M,m*=2,_*=2,v*=2,n[0]=u+h+m,n[1]=s+l+_,n[2]=c+f+v,n}function xr(n,t,r,a){var e=[],o=[];return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],o[0]=e[0],o[1]=e[1]*Math.cos(a)-e[2]*Math.sin(a),o[2]=e[1]*Math.sin(a)+e[2]*Math.cos(a),n[0]=o[0]+r[0],n[1]=o[1]+r[1],n[2]=o[2]+r[2],n}function yr(n,t,r,a){var e=[],o=[];return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],o[0]=e[2]*Math.sin(a)+e[0]*Math.cos(a),o[1]=e[1],o[2]=e[2]*Math.cos(a)-e[0]*Math.sin(a),n[0]=o[0]+r[0],n[1]=o[1]+r[1],n[2]=o[2]+r[2],n}function wr(n,t,r,a){var e=[],o=[];return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],o[0]=e[0]*Math.cos(a)-e[1]*Math.sin(a),o[1]=e[0]*Math.sin(a)+e[1]*Math.cos(a),o[2]=e[2],n[0]=o[0]+r[0],n[1]=o[1]+r[1],n[2]=o[2]+r[2],n}function Sr(n,t){var r=n[0],a=n[1],e=n[2],o=t[0],i=t[1],u=t[2],s=Math.sqrt(r*r+a*a+e*e)*Math.sqrt(o*o+i*i+u*u),c=s&&fr(n,t)/s;return Math.acos(Math.min(Math.max(c,-1),1))}function Ar(n){return n[0]=0,n[1]=0,n[2]=0,n}function Pr(n){return"vec3("+n[0]+", "+n[1]+", "+n[2]+")"}function zr(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]}function Rr(n,t){var r=n[0],a=n[1],e=n[2],o=t[0],i=t[1],u=t[2];return Math.abs(r-o)<=m*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-i)<=m*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(e-u)<=m*Math.max(1,Math.abs(e),Math.abs(u))}var Er,Tr=Qt,Lr=Wt,Fr=$t,Or=ir,Nr=ur,Cr=Ut,Ir=sr,Dr=(Er=kt(),function(n,t,r,a,e,o){var i,u;for(t||(t=3),r||(r=0),u=a?Math.min(a*t+r,n.length):n.length,i=r;i<u;i+=t)Er[0]=n[i],Er[1]=n[i+1],Er[2]=n[i+2],e(Er,Er,o),n[i]=Er[0],n[i+1]=Er[1],n[i+2]=Er[2];return n});function qr(){var n=new _(4);return _!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[3]=0),n}function Vr(n){var t=new _(4);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function Br(n,t,r,a){var e=new _(4);return e[0]=n,e[1]=t,e[2]=r,e[3]=a,e}function Gr(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function jr(n,t,r,a,e){return n[0]=t,n[1]=r,n[2]=a,n[3]=e,n}function kr(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n[3]=t[3]+r[3],n}function Hr(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],n[3]=t[3]-r[3],n}function Ur(n,t,r){return n[0]=t[0]*r[0],n[1]=t[1]*r[1],n[2]=t[2]*r[2],n[3]=t[3]*r[3],n}function Xr(n,t,r){return n[0]=t[0]/r[0],n[1]=t[1]/r[1],n[2]=t[2]/r[2],n[3]=t[3]/r[3],n}function Kr(n,t){return n[0]=Math.ceil(t[0]),n[1]=Math.ceil(t[1]),n[2]=Math.ceil(t[2]),n[3]=Math.ceil(t[3]),n}function Yr(n,t){return n[0]=Math.floor(t[0]),n[1]=Math.floor(t[1]),n[2]=Math.floor(t[2]),n[3]=Math.floor(t[3]),n}function Zr(n,t,r){return n[0]=Math.min(t[0],r[0]),n[1]=Math.min(t[1],r[1]),n[2]=Math.min(t[2],r[2]),n[3]=Math.min(t[3],r[3]),n}function Qr(n,t,r){return n[0]=Math.max(t[0],r[0]),n[1]=Math.max(t[1],r[1]),n[2]=Math.max(t[2],r[2]),n[3]=Math.max(t[3],r[3]),n}function Wr(n,t){return n[0]=Math.round(t[0]),n[1]=Math.round(t[1]),n[2]=Math.round(t[2]),n[3]=Math.round(t[3]),n}function $r(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n}function Jr(n,t,r,a){return n[0]=t[0]+r[0]*a,n[1]=t[1]+r[1]*a,n[2]=t[2]+r[2]*a,n[3]=t[3]+r[3]*a,n}function na(n,t){var r=t[0]-n[0],a=t[1]-n[1],e=t[2]-n[2],o=t[3]-n[3];return Math.hypot(r,a,e,o)}function ta(n,t){var r=t[0]-n[0],a=t[1]-n[1],e=t[2]-n[2],o=t[3]-n[3];return r*r+a*a+e*e+o*o}function ra(n){var t=n[0],r=n[1],a=n[2],e=n[3];return Math.hypot(t,r,a,e)}function aa(n){var t=n[0],r=n[1],a=n[2],e=n[3];return t*t+r*r+a*a+e*e}function ea(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=-t[3],n}function oa(n,t){return n[0]=1/t[0],n[1]=1/t[1],n[2]=1/t[2],n[3]=1/t[3],n}function ia(n,t){var r=t[0],a=t[1],e=t[2],o=t[3],i=r*r+a*a+e*e+o*o;return i>0&&(i=1/Math.sqrt(i)),n[0]=r*i,n[1]=a*i,n[2]=e*i,n[3]=o*i,n}function ua(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function sa(n,t,r,a){var e=r[0]*a[1]-r[1]*a[0],o=r[0]*a[2]-r[2]*a[0],i=r[0]*a[3]-r[3]*a[0],u=r[1]*a[2]-r[2]*a[1],s=r[1]*a[3]-r[3]*a[1],c=r[2]*a[3]-r[3]*a[2],h=t[0],l=t[1],f=t[2],m=t[3];return n[0]=l*c-f*s+m*u,n[1]=-h*c+f*i-m*o,n[2]=h*s-l*i+m*e,n[3]=-h*u+l*o-f*e,n}function ca(n,t,r,a){var e=t[0],o=t[1],i=t[2],u=t[3];return n[0]=e+a*(r[0]-e),n[1]=o+a*(r[1]-o),n[2]=i+a*(r[2]-i),n[3]=u+a*(r[3]-u),n}function ha(n,t){var r,a,e,o,i,u;t=t||1;do{i=(r=2*v()-1)*r+(a=2*v()-1)*a}while(i>=1);do{u=(e=2*v()-1)*e+(o=2*v()-1)*o}while(u>=1);var s=Math.sqrt((1-i)/u);return n[0]=t*r,n[1]=t*a,n[2]=t*e*s,n[3]=t*o*s,n}function la(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3];return n[0]=r[0]*a+r[4]*e+r[8]*o+r[12]*i,n[1]=r[1]*a+r[5]*e+r[9]*o+r[13]*i,n[2]=r[2]*a+r[6]*e+r[10]*o+r[14]*i,n[3]=r[3]*a+r[7]*e+r[11]*o+r[15]*i,n}function fa(n,t,r){var a=t[0],e=t[1],o=t[2],i=r[0],u=r[1],s=r[2],c=r[3],h=c*a+u*o-s*e,l=c*e+s*a-i*o,f=c*o+i*e-u*a,m=-i*a-u*e-s*o;return n[0]=h*c+m*-i+l*-s-f*-u,n[1]=l*c+m*-u+f*-i-h*-s,n[2]=f*c+m*-s+h*-u-l*-i,n[3]=t[3],n}function ma(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n}function _a(n){return"vec4("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}function va(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]}function Ma(n,t){var r=n[0],a=n[1],e=n[2],o=n[3],i=t[0],u=t[1],s=t[2],c=t[3];return Math.abs(r-i)<=m*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=m*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(e-s)<=m*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(o-c)<=m*Math.max(1,Math.abs(o),Math.abs(c))}var da=Hr,ba=Ur,pa=Xr,ga=na,xa=ta,ya=ra,wa=aa,Sa=function(){var n=qr();return function(t,r,a,e,o,i){var u,s;for(r||(r=4),a||(a=0),s=e?Math.min(e*r+a,t.length):t.length,u=a;u<s;u+=r)n[0]=t[u],n[1]=t[u+1],n[2]=t[u+2],n[3]=t[u+3],o(n,n,i),t[u]=n[0],t[u+1]=n[1],t[u+2]=n[2],t[u+3]=n[3];return t}}();function Aa(){var n=new _(4);return _!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0),n[3]=1,n}function Pa(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n}function za(n,t,r){r*=.5;var a=Math.sin(r);return n[0]=a*t[0],n[1]=a*t[1],n[2]=a*t[2],n[3]=Math.cos(r),n}function Ra(n,t){var r=2*Math.acos(t[3]),a=Math.sin(r/2);return a>m?(n[0]=t[0]/a,n[1]=t[1]/a,n[2]=t[2]/a):(n[0]=1,n[1]=0,n[2]=0),r}function Ea(n,t){var r=ee(n,t);return Math.acos(2*r*r-1)}function Ta(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3],u=r[0],s=r[1],c=r[2],h=r[3];return n[0]=a*h+i*u+e*c-o*s,n[1]=e*h+i*s+o*u-a*c,n[2]=o*h+i*c+a*s-e*u,n[3]=i*h-a*u-e*s-o*c,n}function La(n,t,r){r*=.5;var a=t[0],e=t[1],o=t[2],i=t[3],u=Math.sin(r),s=Math.cos(r);return n[0]=a*s+i*u,n[1]=e*s+o*u,n[2]=o*s-e*u,n[3]=i*s-a*u,n}function Fa(n,t,r){r*=.5;var a=t[0],e=t[1],o=t[2],i=t[3],u=Math.sin(r),s=Math.cos(r);return n[0]=a*s-o*u,n[1]=e*s+i*u,n[2]=o*s+a*u,n[3]=i*s-e*u,n}function Oa(n,t,r){r*=.5;var a=t[0],e=t[1],o=t[2],i=t[3],u=Math.sin(r),s=Math.cos(r);return n[0]=a*s+e*u,n[1]=e*s-a*u,n[2]=o*s+i*u,n[3]=i*s-o*u,n}function Na(n,t){var r=t[0],a=t[1],e=t[2];return n[0]=r,n[1]=a,n[2]=e,n[3]=Math.sqrt(Math.abs(1-r*r-a*a-e*e)),n}function Ca(n,t){var r=t[0],a=t[1],e=t[2],o=t[3],i=Math.sqrt(r*r+a*a+e*e),u=Math.exp(o),s=i>0?u*Math.sin(i)/i:0;return n[0]=r*s,n[1]=a*s,n[2]=e*s,n[3]=u*Math.cos(i),n}function Ia(n,t){var r=t[0],a=t[1],e=t[2],o=t[3],i=Math.sqrt(r*r+a*a+e*e),u=i>0?Math.atan2(i,o)/i:0;return n[0]=r*u,n[1]=a*u,n[2]=e*u,n[3]=.5*Math.log(r*r+a*a+e*e+o*o),n}function Da(n,t,r){return Ia(n,t),ae(n,n,r),Ca(n,n),n}function qa(n,t,r,a){var e,o,i,u,s,c=t[0],h=t[1],l=t[2],f=t[3],_=r[0],v=r[1],M=r[2],d=r[3];return(o=c*_+h*v+l*M+f*d)<0&&(o=-o,_=-_,v=-v,M=-M,d=-d),1-o>m?(e=Math.acos(o),i=Math.sin(e),u=Math.sin((1-a)*e)/i,s=Math.sin(a*e)/i):(u=1-a,s=a),n[0]=u*c+s*_,n[1]=u*h+s*v,n[2]=u*l+s*M,n[3]=u*f+s*d,n}function Va(n){var t=v(),r=v(),a=v(),e=Math.sqrt(1-t),o=Math.sqrt(t);return n[0]=e*Math.sin(2*Math.PI*r),n[1]=e*Math.cos(2*Math.PI*r),n[2]=o*Math.sin(2*Math.PI*a),n[3]=o*Math.cos(2*Math.PI*a),n}function Ba(n,t){var r=t[0],a=t[1],e=t[2],o=t[3],i=r*r+a*a+e*e+o*o,u=i?1/i:0;return n[0]=-r*u,n[1]=-a*u,n[2]=-e*u,n[3]=o*u,n}function Ga(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n}function ja(n,t){var r,a=t[0]+t[4]+t[8];if(a>0)r=Math.sqrt(a+1),n[3]=.5*r,r=.5/r,n[0]=(t[5]-t[7])*r,n[1]=(t[6]-t[2])*r,n[2]=(t[1]-t[3])*r;else{var e=0;t[4]>t[0]&&(e=1),t[8]>t[3*e+e]&&(e=2);var o=(e+1)%3,i=(e+2)%3;r=Math.sqrt(t[3*e+e]-t[3*o+o]-t[3*i+i]+1),n[e]=.5*r,r=.5/r,n[3]=(t[3*o+i]-t[3*i+o])*r,n[o]=(t[3*o+e]+t[3*e+o])*r,n[i]=(t[3*i+e]+t[3*e+i])*r}return n}function ka(n,t,r,a){var e=.5*Math.PI/180;t*=e,r*=e,a*=e;var o=Math.sin(t),i=Math.cos(t),u=Math.sin(r),s=Math.cos(r),c=Math.sin(a),h=Math.cos(a);return n[0]=o*s*h-i*u*c,n[1]=i*u*h+o*s*c,n[2]=i*s*c-o*u*h,n[3]=i*s*h+o*u*c,n}function Ha(n){return"quat("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+")"}var Ua,Xa,Ka,Ya,Za,Qa,Wa=Vr,$a=Br,Ja=Gr,ne=jr,te=kr,re=Ta,ae=$r,ee=ua,oe=ca,ie=ra,ue=ie,se=aa,ce=se,he=ia,le=va,fe=Ma,me=(Ua=kt(),Xa=Xt(1,0,0),Ka=Xt(0,1,0),function(n,t,r){var a=fr(t,r);return a<-.999999?(mr(Ua,Xa,t),Cr(Ua)<1e-6&&mr(Ua,Ka,t),lr(Ua,Ua),za(n,Ua,Math.PI),n):a>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(mr(Ua,t,r),n[0]=Ua[0],n[1]=Ua[1],n[2]=Ua[2],n[3]=1+a,he(n,n))}),_e=(Ya=Aa(),Za=Aa(),function(n,t,r,a,e,o){return qa(Ya,t,e,o),qa(Za,r,a,o),qa(n,Ya,Za,2*o*(1-o)),n}),ve=(Qa=bn(),function(n,t,r,a){return Qa[0]=r[0],Qa[3]=r[1],Qa[6]=r[2],Qa[1]=a[0],Qa[4]=a[1],Qa[7]=a[2],Qa[2]=-t[0],Qa[5]=-t[1],Qa[8]=-t[2],he(n,ja(n,Qa))});function Me(){var n=new _(8);return _!=Float32Array&&(n[0]=0,n[1]=0,n[2]=0,n[4]=0,n[5]=0,n[6]=0,n[7]=0),n[3]=1,n}function de(n){var t=new _(8);return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t}function be(n,t,r,a,e,o,i,u){var s=new _(8);return s[0]=n,s[1]=t,s[2]=r,s[3]=a,s[4]=e,s[5]=o,s[6]=i,s[7]=u,s}function pe(n,t,r,a,e,o,i){var u=new _(8);u[0]=n,u[1]=t,u[2]=r,u[3]=a;var s=.5*e,c=.5*o,h=.5*i;return u[4]=s*a+c*r-h*t,u[5]=c*a+h*n-s*r,u[6]=h*a+s*t-c*n,u[7]=-s*n-c*t-h*r,u}function ge(n,t,r){var a=.5*r[0],e=.5*r[1],o=.5*r[2],i=t[0],u=t[1],s=t[2],c=t[3];return n[0]=i,n[1]=u,n[2]=s,n[3]=c,n[4]=a*c+e*s-o*u,n[5]=e*c+o*i-a*s,n[6]=o*c+a*u-e*i,n[7]=-a*i-e*u-o*s,n}function xe(n,t){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n[4]=.5*t[0],n[5]=.5*t[1],n[6]=.5*t[2],n[7]=0,n}function ye(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=0,n[5]=0,n[6]=0,n[7]=0,n}function we(n,t){var r=Aa();wt(r,t);var a=new _(3);return xt(a,t),ge(n,r,a),n}function Se(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n}function Ae(n){return n[0]=0,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n[6]=0,n[7]=0,n}function Pe(n,t,r,a,e,o,i,u,s){return n[0]=t,n[1]=r,n[2]=a,n[3]=e,n[4]=o,n[5]=i,n[6]=u,n[7]=s,n}var ze=Ja;function Re(n,t){return n[0]=t[4],n[1]=t[5],n[2]=t[6],n[3]=t[7],n}var Ee=Ja;function Te(n,t){return n[4]=t[0],n[5]=t[1],n[6]=t[2],n[7]=t[3],n}function Le(n,t){var r=t[4],a=t[5],e=t[6],o=t[7],i=-t[0],u=-t[1],s=-t[2],c=t[3];return n[0]=2*(r*c+o*i+a*s-e*u),n[1]=2*(a*c+o*u+e*i-r*s),n[2]=2*(e*c+o*s+r*u-a*i),n}function Fe(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3],u=.5*r[0],s=.5*r[1],c=.5*r[2],h=t[4],l=t[5],f=t[6],m=t[7];return n[0]=a,n[1]=e,n[2]=o,n[3]=i,n[4]=i*u+e*c-o*s+h,n[5]=i*s+o*u-a*c+l,n[6]=i*c+a*s-e*u+f,n[7]=-a*u-e*s-o*c+m,n}function Oe(n,t,r){var a=-t[0],e=-t[1],o=-t[2],i=t[3],u=t[4],s=t[5],c=t[6],h=t[7],l=u*i+h*a+s*o-c*e,f=s*i+h*e+c*a-u*o,m=c*i+h*o+u*e-s*a,_=h*i-u*a-s*e-c*o;return La(n,t,r),a=n[0],e=n[1],o=n[2],i=n[3],n[4]=l*i+_*a+f*o-m*e,n[5]=f*i+_*e+m*a-l*o,n[6]=m*i+_*o+l*e-f*a,n[7]=_*i-l*a-f*e-m*o,n}function Ne(n,t,r){var a=-t[0],e=-t[1],o=-t[2],i=t[3],u=t[4],s=t[5],c=t[6],h=t[7],l=u*i+h*a+s*o-c*e,f=s*i+h*e+c*a-u*o,m=c*i+h*o+u*e-s*a,_=h*i-u*a-s*e-c*o;return Fa(n,t,r),a=n[0],e=n[1],o=n[2],i=n[3],n[4]=l*i+_*a+f*o-m*e,n[5]=f*i+_*e+m*a-l*o,n[6]=m*i+_*o+l*e-f*a,n[7]=_*i-l*a-f*e-m*o,n}function Ce(n,t,r){var a=-t[0],e=-t[1],o=-t[2],i=t[3],u=t[4],s=t[5],c=t[6],h=t[7],l=u*i+h*a+s*o-c*e,f=s*i+h*e+c*a-u*o,m=c*i+h*o+u*e-s*a,_=h*i-u*a-s*e-c*o;return Oa(n,t,r),a=n[0],e=n[1],o=n[2],i=n[3],n[4]=l*i+_*a+f*o-m*e,n[5]=f*i+_*e+m*a-l*o,n[6]=m*i+_*o+l*e-f*a,n[7]=_*i-l*a-f*e-m*o,n}function Ie(n,t,r){var a=r[0],e=r[1],o=r[2],i=r[3],u=t[0],s=t[1],c=t[2],h=t[3];return n[0]=u*i+h*a+s*o-c*e,n[1]=s*i+h*e+c*a-u*o,n[2]=c*i+h*o+u*e-s*a,n[3]=h*i-u*a-s*e-c*o,u=t[4],s=t[5],c=t[6],h=t[7],n[4]=u*i+h*a+s*o-c*e,n[5]=s*i+h*e+c*a-u*o,n[6]=c*i+h*o+u*e-s*a,n[7]=h*i-u*a-s*e-c*o,n}function De(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3],u=r[0],s=r[1],c=r[2],h=r[3];return n[0]=a*h+i*u+e*c-o*s,n[1]=e*h+i*s+o*u-a*c,n[2]=o*h+i*c+a*s-e*u,n[3]=i*h-a*u-e*s-o*c,u=r[4],s=r[5],c=r[6],h=r[7],n[4]=a*h+i*u+e*c-o*s,n[5]=e*h+i*s+o*u-a*c,n[6]=o*h+i*c+a*s-e*u,n[7]=i*h-a*u-e*s-o*c,n}function qe(n,t,r,a){if(Math.abs(a)<m)return Se(n,t);var e=Math.hypot(r[0],r[1],r[2]);a*=.5;var o=Math.sin(a),i=o*r[0]/e,u=o*r[1]/e,s=o*r[2]/e,c=Math.cos(a),h=t[0],l=t[1],f=t[2],_=t[3];n[0]=h*c+_*i+l*s-f*u,n[1]=l*c+_*u+f*i-h*s,n[2]=f*c+_*s+h*u-l*i,n[3]=_*c-h*i-l*u-f*s;var v=t[4],M=t[5],d=t[6],b=t[7];return n[4]=v*c+b*i+M*s-d*u,n[5]=M*c+b*u+d*i-v*s,n[6]=d*c+b*s+v*u-M*i,n[7]=b*c-v*i-M*u-d*s,n}function Ve(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n[2]=t[2]+r[2],n[3]=t[3]+r[3],n[4]=t[4]+r[4],n[5]=t[5]+r[5],n[6]=t[6]+r[6],n[7]=t[7]+r[7],n}function Be(n,t,r){var a=t[0],e=t[1],o=t[2],i=t[3],u=r[4],s=r[5],c=r[6],h=r[7],l=t[4],f=t[5],m=t[6],_=t[7],v=r[0],M=r[1],d=r[2],b=r[3];return n[0]=a*b+i*v+e*d-o*M,n[1]=e*b+i*M+o*v-a*d,n[2]=o*b+i*d+a*M-e*v,n[3]=i*b-a*v-e*M-o*d,n[4]=a*h+i*u+e*c-o*s+l*b+_*v+f*d-m*M,n[5]=e*h+i*s+o*u-a*c+f*b+_*M+m*v-l*d,n[6]=o*h+i*c+a*s-e*u+m*b+_*d+l*M-f*v,n[7]=i*h-a*u-e*s-o*c+_*b-l*v-f*M-m*d,n}var Ge=Be;function je(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n[2]=t[2]*r,n[3]=t[3]*r,n[4]=t[4]*r,n[5]=t[5]*r,n[6]=t[6]*r,n[7]=t[7]*r,n}var ke=ee;function He(n,t,r,a){var e=1-a;return ke(t,r)<0&&(a=-a),n[0]=t[0]*e+r[0]*a,n[1]=t[1]*e+r[1]*a,n[2]=t[2]*e+r[2]*a,n[3]=t[3]*e+r[3]*a,n[4]=t[4]*e+r[4]*a,n[5]=t[5]*e+r[5]*a,n[6]=t[6]*e+r[6]*a,n[7]=t[7]*e+r[7]*a,n}function Ue(n,t){var r=Ze(t);return n[0]=-t[0]/r,n[1]=-t[1]/r,n[2]=-t[2]/r,n[3]=t[3]/r,n[4]=-t[4]/r,n[5]=-t[5]/r,n[6]=-t[6]/r,n[7]=t[7]/r,n}function Xe(n,t){return n[0]=-t[0],n[1]=-t[1],n[2]=-t[2],n[3]=t[3],n[4]=-t[4],n[5]=-t[5],n[6]=-t[6],n[7]=t[7],n}var Ke=ie,Ye=Ke,Ze=se,Qe=Ze;function We(n,t){var r=Ze(t);if(r>0){r=Math.sqrt(r);var a=t[0]/r,e=t[1]/r,o=t[2]/r,i=t[3]/r,u=t[4],s=t[5],c=t[6],h=t[7],l=a*u+e*s+o*c+i*h;n[0]=a,n[1]=e,n[2]=o,n[3]=i,n[4]=(u-a*l)/r,n[5]=(s-e*l)/r,n[6]=(c-o*l)/r,n[7]=(h-i*l)/r}return n}function $e(n){return"quat2("+n[0]+", "+n[1]+", "+n[2]+", "+n[3]+", "+n[4]+", "+n[5]+", "+n[6]+", "+n[7]+")"}function Je(n,t){return n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2]&&n[3]===t[3]&&n[4]===t[4]&&n[5]===t[5]&&n[6]===t[6]&&n[7]===t[7]}function no(n,t){var r=n[0],a=n[1],e=n[2],o=n[3],i=n[4],u=n[5],s=n[6],c=n[7],h=t[0],l=t[1],f=t[2],_=t[3],v=t[4],M=t[5],d=t[6],b=t[7];return Math.abs(r-h)<=m*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(a-l)<=m*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(e-f)<=m*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(o-_)<=m*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(i-v)<=m*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(u-M)<=m*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(s-d)<=m*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(c-b)<=m*Math.max(1,Math.abs(c),Math.abs(b))}function to(){var n=new _(2);return _!=Float32Array&&(n[0]=0,n[1]=0),n}function ro(n){var t=new _(2);return t[0]=n[0],t[1]=n[1],t}function ao(n,t){var r=new _(2);return r[0]=n,r[1]=t,r}function eo(n,t){return n[0]=t[0],n[1]=t[1],n}function oo(n,t,r){return n[0]=t,n[1]=r,n}function io(n,t,r){return n[0]=t[0]+r[0],n[1]=t[1]+r[1],n}function uo(n,t,r){return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n}function so(n,t,r){return n[0]=t[0]*r[0],n[1]=t[1]*r[1],n}function co(n,t,r){return n[0]=t[0]/r[0],n[1]=t[1]/r[1],n}function ho(n,t){return n[0]=Math.ceil(t[0]),n[1]=Math.ceil(t[1]),n}function lo(n,t){return n[0]=Math.floor(t[0]),n[1]=Math.floor(t[1]),n}function fo(n,t,r){return n[0]=Math.min(t[0],r[0]),n[1]=Math.min(t[1],r[1]),n}function mo(n,t,r){return n[0]=Math.max(t[0],r[0]),n[1]=Math.max(t[1],r[1]),n}function _o(n,t){return n[0]=Math.round(t[0]),n[1]=Math.round(t[1]),n}function vo(n,t,r){return n[0]=t[0]*r,n[1]=t[1]*r,n}function Mo(n,t,r,a){return n[0]=t[0]+r[0]*a,n[1]=t[1]+r[1]*a,n}function bo(n,t){var r=t[0]-n[0],a=t[1]-n[1];return Math.hypot(r,a)}function po(n,t){var r=t[0]-n[0],a=t[1]-n[1];return r*r+a*a}function go(n){var t=n[0],r=n[1];return Math.hypot(t,r)}function xo(n){var t=n[0],r=n[1];return t*t+r*r}function yo(n,t){return n[0]=-t[0],n[1]=-t[1],n}function wo(n,t){return n[0]=1/t[0],n[1]=1/t[1],n}function So(n,t){var r=t[0],a=t[1],e=r*r+a*a;return e>0&&(e=1/Math.sqrt(e)),n[0]=t[0]*e,n[1]=t[1]*e,n}function Ao(n,t){return n[0]*t[0]+n[1]*t[1]}function Po(n,t,r){var a=t[0]*r[1]-t[1]*r[0];return n[0]=n[1]=0,n[2]=a,n}function zo(n,t,r,a){var e=t[0],o=t[1];return n[0]=e+a*(r[0]-e),n[1]=o+a*(r[1]-o),n}function Ro(n,t){t=t||1;var r=2*v()*Math.PI;return n[0]=Math.cos(r)*t,n[1]=Math.sin(r)*t,n}function Eo(n,t,r){var a=t[0],e=t[1];return n[0]=r[0]*a+r[2]*e,n[1]=r[1]*a+r[3]*e,n}function To(n,t,r){var a=t[0],e=t[1];return n[0]=r[0]*a+r[2]*e+r[4],n[1]=r[1]*a+r[3]*e+r[5],n}function Lo(n,t,r){var a=t[0],e=t[1];return n[0]=r[0]*a+r[3]*e+r[6],n[1]=r[1]*a+r[4]*e+r[7],n}function Fo(n,t,r){var a=t[0],e=t[1];return n[0]=r[0]*a+r[4]*e+r[12],n[1]=r[1]*a+r[5]*e+r[13],n}function Oo(n,t,r,a){var e=t[0]-r[0],o=t[1]-r[1],i=Math.sin(a),u=Math.cos(a);return n[0]=e*u-o*i+r[0],n[1]=e*i+o*u+r[1],n}function No(n,t){var r=n[0],a=n[1],e=t[0],o=t[1],i=Math.sqrt(r*r+a*a)*Math.sqrt(e*e+o*o),u=i&&(r*e+a*o)/i;return Math.acos(Math.min(Math.max(u,-1),1))}function Co(n){return n[0]=0,n[1]=0,n}function Io(n){return"vec2("+n[0]+", "+n[1]+")"}function Do(n,t){return n[0]===t[0]&&n[1]===t[1]}function qo(n,t){var r=n[0],a=n[1],e=t[0],o=t[1];return Math.abs(r-e)<=m*Math.max(1,Math.abs(r),Math.abs(e))&&Math.abs(a-o)<=m*Math.max(1,Math.abs(a),Math.abs(o))}var Vo=go,Bo=uo,Go=so,jo=co,ko=bo,Ho=po,Uo=xo,Xo=function(){var n=to();return function(t,r,a,e,o,i){var u,s;for(r||(r=2),a||(a=0),s=e?Math.min(e*r+a,t.length):t.length,u=a;u<s;u+=r)n[0]=t[u],n[1]=t[u+1],o(n,n,i),t[u]=n[0],t[u+1]=n[1];return t}}()},4558:(n,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Example=void 0;const a=r(4160);class e extends a.Initializable{showSpinner(){document.getElementsByClassName("spinner").item(0).style.display="inline"}hideSpinner(){document.getElementsByClassName("spinner").item(0).style.display="none"}expose(){window.canvas=this.canvas,window.context=this.canvas.context,window.controller=this.canvas.controller,window.renderer=this.renderer}initialize(n){const t=this.onInitialize(n);return this.renderer.loadingStatus$.subscribe((n=>{n===a.LoadingStatus.Finished?this.hideSpinner():n===a.LoadingStatus.Started&&this.showSpinner()})),this.expose(),t}uninitialize(){this.onUninitialize()}enableFullscreenOnCtrlClick(){const n=this.canvas.element;n.addEventListener("click",(t=>{t.ctrlKey&&a.viewer.Fullscreen.toggle(n)}))}}t.Example=e},474:n=>{n.exports="precision highp float;\n\n\n#if __VERSION__ == 100\n    #define texture(sampler, coord) texture2D(sampler, coord)\n#else \n    #define varying in\n#endif\n\n\n#if __VERSION__ == 100\n    #define fragColor gl_FragColor\n#else\n    layout(location = 0) out vec4 fragColor;\n#endif\n\nin vec2 v_uv;\n\nuniform int u_kernelSize;\nuniform vec2 u_frameSize;\n\nuniform sampler2D u_source;\n\n#define TARGET_KERNEL_SIZE 5\n\n#if TARGET_KERNEL_SIZE==5\n\nconst int kernelSize = 5;\nconst int kernelHalfSize = 2;\nconst float kernel[25] = float[25](\n    1.0,  4.0,  6.0,  4.0, 1.0,\n    4.0, 16.0, 24.0, 16.0, 4.0,\n    6.0, 24.0, 36.0, 24.0, 6.0,\n    4.0, 16.0, 24.0, 16.0, 4.0,\n    1.0,  4.0,  6.0,  4.0, 1.0\n);\n\n#elif TARGET_KERNEL_SIZE==7\n\nconst int kernelSize = 7;\nconst int kernelHalfSize = 3;\nconst float kernel[49] = float[49](\n     1.0,  6.0, 15.0, 20.0, 15.0,  6.0,  1.0,\n     6.0, 36.0, 90.0,120.0, 90.0, 36.0,  6.0,\n    15.0, 90.0,225.0,300.0,225.0, 90.0, 15.0,\n    20.0,120.0,300.0,400.0,300.0,120.0, 20.0,\n    15.0, 90.0,225.0,300.0,225.0, 90.0, 15.0,\n     6.0, 36.0, 90.0,120.0, 90.0, 36.0,  6.0,\n     1.0,  6.0, 15.0, 20.0, 15.0,  6.0,  1.0\n);\n\n#else\n\nconst int kernelSize = 1;\nconst int kernelHalfSize = 0;\nconst float kernel[1] = float[1](\n    1.0\n);\n\n#endif\n\nvoid main(void)\n{\n    vec2 offset = vec2(1.0) / vec2(u_frameSize);\n\n    vec4 result = vec4(0.0);\n    float weight_sum = 0.0;\n\n    for (int y = 0; y < kernelSize; ++y) {\n        for (int x = 0; x < kernelSize; ++x) {\n            vec2 local_uv = v_uv + vec2(x - kernelHalfSize, y - kernelHalfSize) * offset;\n\n            if (local_uv.x < 0.0 || local_uv.x > 1.0 || local_uv.y < 0.0 || local_uv.y > 1.0) {\n                continue;\n            }\n\n            vec4 color = texture(u_source, local_uv);\n            float weight = kernel[y * kernelSize + x];\n            result += weight * color;\n            weight_sum += weight;\n        }\n    }\n\n    if (weight_sum < 0.0001) {\n        fragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        return;\n    }\n\n    fragColor = vec4(result.rgb / vec3(weight_sum), 1.0);\n}\n"},102:n=>{n.exports="precision highp float;\n\n\n#if __VERSION__ == 100\n    #define texture(sampler, coord) texture2D(sampler, coord)\n#else \n    #define varying in\n#endif\n\n\n#if __VERSION__ == 100\n    #define fragColor gl_FragColor\n#else\n    layout(location = 0) out vec4 fragColor;\n#endif\n\nin vec2 v_uv;\n\nuniform vec2 u_frameSize;\n\nuniform sampler2D u_color;\nuniform sampler2D u_depth;\nuniform sampler2D u_aoMap;\n\nconst float aoPower = 1.0;\nconst float aoFocus = 0.4;\n\nvoid main(void)\n{\n    vec4 colorValue = texture(u_color, v_uv);\n    // vec4 depthValue = texture(u_depth, v_uv);\n    vec4 aoValue = texture(u_aoMap, v_uv);\n\n    vec3 aoScale = pow(aoValue.rrr, vec3(aoPower));\n    vec3 finalColor  = mix(colorValue.rgb * aoScale, aoScale, aoFocus);\n\n    fragColor = vec4(finalColor, 1.0);\n}\n"},7058:n=>{n.exports="precision highp float;\n\n\n#if __VERSION__ == 100\n    #define texture(sampler, coord) texture2D(sampler, coord)\n#else \n    #define varying in\n#endif\n\n\nvec3 pbrNormal(in vec3 position, in vec2 uv, in vec3 normal_v, in sampler2D normal_t)\n{\n    // Retrieve the tangent space matrix\n    mat3 tbn;\n\n    vec3 pos_dx = dFdx(position);\n    vec3 pos_dy = dFdy(position);\n\n    vec3 tex_dx = dFdx(vec3(uv, 0.0));\n    vec3 tex_dy = dFdy(vec3(uv, 0.0));\n\n    vec3 t = (tex_dy.t * pos_dx - tex_dx.t * pos_dy) / (tex_dx.s * tex_dy.t - tex_dy.s * tex_dx.t);\n\n    vec3 ng;\n    ng = normalize(normal_v);\n\n    t = normalize(t - ng * dot(ng, t));\n    vec3 b = normalize(cross(ng, t));\n    tbn = mat3(t, b, ng);\n\n    vec3 n = texture(normal_t, uv).rgb;\n    n = normalize(tbn * ((2.0 * n - 1.0) * vec3(1.0, 1.0, 1.0)));\n\n    n *= (2.0 * float(gl_FrontFacing) - 1.0);\n\n    return n;\n}\n\n\n\nvec3 phong(vec3 position, vec3 normal, vec3 eye)\n{\n    vec3 k_a = vec3(0.05, 0.05, 0.05);\n    vec3 k_d = vec3(0.80, 0.80, 0.80);\n    vec3 k_s = vec3(0.70, 0.70, 0.70);\n    float shininess = 0.25 * 128.0;\n\n    vec3 k_e = vec3(0.0, 0.0, 0.0);\n\n    vec3 I_d0 = vec3(255.0 / 255.0, 250.0 / 255.0, 192.0 / 255.0);\n    vec3 I_s0 = I_d0;\n\n    vec3 I_d1 = vec3( 64.0 / 255.0, 128.0 / 255.0, 192.0 / 255.0);\n    vec3 I_s1 = I_d1;\n\n    vec3 N = normalize(normal);\n    vec3 V = normalize(eye - position);\n\n    vec3 L0 = normalize(vec3(+2.0, 3.0, 2.0));\n    vec3 L1 = normalize(vec3(-3.0,-1.0, 1.0));\n\n    vec3 R0 = reflect(-L0, N);\n    vec3 R1 = reflect(-L1, N);\n\n    vec3 I_a_global = vec3( 29.0 / 255.0,  35.0 / 255.0,  56.0 / 255.0);\n\n    float NdotL0 = clamp(dot(N, L0), 0.0, 1.0);\n    float NdotL1 = clamp(dot(N, L1), 0.0, 1.0);\n    float RdotV0 = clamp(dot(R0, V), 0.0, 1.0);\n    float RdotV1 = clamp(dot(R1, V), 0.0, 1.0);\n\n    vec3 I = I_a_global * k_a + k_e\n        + I_d0 * k_d * NdotL0\n        + I_s0 * k_s * pow(RdotV0, shininess)\n        + I_d1 * k_d * NdotL1\n        + I_s1 * k_s * pow(RdotV1, shininess);\n\n    return I;\n}\n\n\n#if __VERSION__ == 100\n    #define fragColor gl_FragColor\n#else\n    layout(location = 0) out vec4 fragColor;\n    layout(location = 1) out vec3 fragNormal;\n    layout(location = 2) out float fragDepth;\n#endif\n\nuniform vec2 u_frameSize;\nuniform vec3 u_eye;\n\nuniform sampler2D u_normal;\n\nvarying vec3 v_position;\nvarying vec2 v_uv;\nvarying vec3 v_normal;\n\n\nvoid main(void)\n{\n    vec3 normal = pbrNormal(v_position, v_uv, v_normal, u_normal);\n    vec3 f_phong = phong(v_position, normal, u_eye);\n\n    vec3 color = f_phong;\n\n    fragColor = vec4(color, 1.0);\n    fragNormal = vec3(normal);\n    fragDepth = gl_FragCoord.z;\n}\n"},5542:n=>{n.exports="precision highp float;\n\n// Adapted from https://github.com/KhronosGroup/glTF-WebGL-PBR\n\n\n#if __VERSION__ == 100\n    #define texture(sampler, coord) texture2D(sampler, coord)\n#else\n    #define varying out\n#endif\n\n\n\n#if __VERSION__ == 100\n    attribute vec4 a_position;\n    attribute vec4 a_normal;\n    attribute vec2 a_texcoord_0;\n#else\n    layout (location = 0) in vec4 a_position;\n    layout (location = 1) in vec3 a_normal;\n    layout (location = 3) in vec2 a_texcoord_0;\n#endif\n\n\nuniform mat4 u_viewProjection;\nuniform mat4 u_model;\n\nuniform vec3 u_eye;\n\nvarying vec3 v_position;\nvarying vec2 v_uv;\nvarying vec3 v_normal;\n\n\nvoid main(void)\n{\n    vec4 pos = u_model * a_position;\n\n    v_position = vec3(pos.xyz) / pos.w;\n    v_normal = normalize(vec3(u_model * vec4(a_normal.xyz, 0.0)));\n\n    v_uv = a_texcoord_0;\n\n    gl_Position = u_viewProjection * u_model * a_position;\n}\n"},8589:n=>{n.exports="precision highp float;\n\n\n#if __VERSION__ == 100\n    #define texture(sampler, coord) texture2D(sampler, coord)\n#else \n    #define varying in\n#endif\n\n\n#if __VERSION__ == 100\n    #define fragColor gl_FragColor\n#else\n    layout(location = 0) out vec4 fragColor;\n#endif\n\nin vec2 v_uv;\n\nuniform vec2 u_frameSize;\nuniform mat4 u_viewProjectionInverse;\nuniform mat4 u_viewProjection;\n\nuniform sampler2D u_normal;\nuniform sampler2D u_depth;\n\n/* RANDOM */\n\nuint seed = 4u;\nvoid hash(){\n    seed ^= 2747636419u;\n    seed *= 2654435769u;\n    seed ^= seed >> 16;\n    seed *= 2654435769u;\n    seed ^= seed >> 16;\n    seed *= 2654435769u;\n}\n\nfloat random(){\n    hash();\n    return float(seed)/4294967295.0;\n}\n\nvoid initRandomGenerator(vec2 uv, vec2 dim, int f){\n    seed = uint(uv.y*dim.x + uv.x) + uint(f)*uint(dim.x)*uint(dim.y);\n}\n\n/* // RANDOM */\n\n/* SAMPLING KERNEL */\n\n#define PI 3.14159265359\nvec3 newDir(vec3 n){\n    float theta = random()*2.0*PI;\n    float z = random()*2.0-1.0;\n    vec3 v = vec3(sqrt(1.0-z*z)*cos(theta), sqrt(1.0-z*z)*sin(theta), z);\n    if(dot(n, v) < 0.0) return -v;\n    return v;\n}\n\nvec3 sampleVec(vec3 n, float radius){\n    vec3 d = newDir(n);\n    float r = random();\n    d *= mix(0.001, radius, r*r);\n    return d;\n}\n\n/* // SAMPLING KERNEL */\n\n/* MAIN */\n\nvoid main(void)\n{\n    initRandomGenerator(v_uv, u_frameSize, int(2034.3423*v_uv.x+324.234564543*v_uv.y));\n\n    //ssao\n    int max_sample = 64;\n    float radius = 0.15;\n\n    vec3 n = texture(u_normal, v_uv).xyz;\n    float depth = texture(u_depth, v_uv).x;\n\n    float ao = 0.0;\n    float number_of_samples = 0.0;\n\n    vec4 pos_ndc = vec4(2.0*v_uv - vec2(1.0), depth, 1.0);\n    vec4 pos_world = u_viewProjectionInverse * pos_ndc;\n    vec3 pos = pos_world.xyz / pos_world.w;\n\n    for(int i = 0; i < max_sample; i++) {\n        vec3 samplePos = pos + sampleVec(n, radius);\n\n        vec4 ndc = u_viewProjection * vec4(samplePos, 1.0);\n        ndc /= ndc.w;\n        vec2 uv2 = ndc.xy * 0.5 + 0.5;\n\n        if (ndc.z < 1.0 && ndc.z > 0.0 && uv2.x >= 0.0 && uv2.x <= 1.0 && uv2.y >= 0.0 && uv2.y <= 1.0) {\n            float sampleDepth = texture(u_depth, uv2).r;\n\n            ao += float(sampleDepth < ndc.z);\n            number_of_samples += 1.0;\n        }\n    }\n\n    if (number_of_samples < 1.0) {\n        fragColor = vec4(1.0, 1.0, 1.0, 1.0);\n        return;\n    }\n\n    ao /= number_of_samples;\n    ao = 1.0 - ao;\n\n    fragColor = vec4(ao, ao, ao, 1.0);\n}\n"},6608:n=>{n.exports="\nprecision lowp float;\n\n\n#if __VERSION__ == 100\n    #define texture(sampler, coord) texture2D(sampler, coord)\n#else\n    #define varying out\n#endif\n\n\n\n#if __VERSION__ == 100\n    attribute vec2 a_vertex;\n#else\n    layout(location = 0) in vec2 a_vertex;\n#endif\n\n\nvarying vec2 v_uv;\n\n\nvoid main(void)\n{\n    v_uv = a_vertex * 0.5 + 0.5;\n\n    gl_Position = vec4(a_vertex, 0.0, 1.0);\n}\n"},4160:t=>{"use strict";t.exports=n}},r={};function a(n){var e=r[n];if(void 0!==e)return e.exports;var o=r[n]={exports:{}};return t[n](o,o.exports,a),o.exports}a.d=(n,t)=>{for(var r in t)a.o(t,r)&&!a.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},a.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),a.r=n=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var e={};return(()=>{"use strict";var n=e;Object.defineProperty(n,"__esModule",{value:!0}),n.AmbientOcclusionExample=n.AmbientOcclusionRenderer=void 0;const t=a(3659),r=a(4160),o=a(4160),i=a(4558);class u extends o.Renderer{onInitialize(n,e,i){const u=this._context.gl;this._context.enable(["OES_standard_derivatives","WEBGL_color_buffer_float","OES_texture_float","OES_texture_float_linear"]),this._loader=new o.GLTFLoader(this._context),this._ndcGeometry=new o.NdcFillingTriangle(this._context),this._ndcGeometry.initialize(),this._camera=new o.Camera,this._camera.center=t.vec3.fromValues(0,0,0),this._camera.up=t.vec3.fromValues(0,1,0),this._camera.eye=t.vec3.fromValues(0,1,2),this._camera.near=.05,this._camera.far=12,this._navigation=new o.Navigation(e,i),this._navigation.camera=this._camera,this._sceneColor=new o.Texture2D(this._context),this._sceneColor.initialize(1,1,u.RGB8,u.RGB,u.UNSIGNED_BYTE),this._sceneColor.filter(u.LINEAR,u.LINEAR),this._sceneNormal=new o.Texture2D(this._context),this._sceneNormal.initialize(1,1,u.RGBA32F,u.RGBA,u.FLOAT),this._sceneNormal.filter(u.LINEAR,u.LINEAR),this._sceneLinearDepth=new o.Texture2D(this._context),this._sceneLinearDepth.initialize(1,1,u.R32F,u.RED,u.FLOAT),this._sceneLinearDepth.filter(u.LINEAR,u.LINEAR),this._sceneDepth=new o.Renderbuffer(this._context,"Scene_Depth"),this._sceneDepth.initialize(1,1,u.DEPTH_COMPONENT16),this._sceneFbo=new o.Framebuffer(this._context,"Scene_FBO"),this._sceneFbo.initialize([[u.COLOR_ATTACHMENT0,this._sceneColor],[u.COLOR_ATTACHMENT0+1,this._sceneNormal],[u.COLOR_ATTACHMENT0+2,this._sceneLinearDepth],[u.DEPTH_ATTACHMENT,this._sceneDepth]]),this._sceneFbo.clearColor(this._clearColor,u.COLOR_ATTACHMENT0),this._sceneFbo.clearColor([.5,.5,.5,0],u.COLOR_ATTACHMENT0+1),this._sceneFbo.clearColor([1,1,1,0],u.COLOR_ATTACHMENT0+2),this._aoNoisyMap=new o.Texture2D(this._context),this._aoNoisyMap.initialize(1,1,u.RGBA32F,u.RGBA,u.FLOAT),this._aoNoisyMap.filter(u.LINEAR,u.LINEAR),this._aoFbo=new o.Framebuffer(this._context,"AO_FBO"),this._aoFbo.initialize([[u.COLOR_ATTACHMENT0,this._aoNoisyMap]]),this._aoMap=new o.Texture2D(this._context),this._aoMap.initialize(1,1,u.RGBA32F,u.RGBA,u.FLOAT),this._aoMap.filter(u.LINEAR,u.LINEAR),this._blurredAOFbo=new o.Framebuffer(this._context,"BlurredAO_FBO"),this._blurredAOFbo.initialize([[u.COLOR_ATTACHMENT0,this._aoMap]]),this._outputFbo=new o.DefaultFramebuffer(this._context,"Default_FBO"),this._outputFbo.initialize();const s=new o.Shader(n,u.VERTEX_SHADER,"geometry.vert");s.initialize(a(5542));const c=new o.Shader(n,u.FRAGMENT_SHADER,"geometry.frag");c.initialize(a(7058)),this._sceneProgram=new o.Program(n,"SceneProgram"),this._sceneProgram.initialize([s,c],!0),this._sceneProgram.link(),this._sceneProgram.bind(),this._uViewProjectionLocation=this._sceneProgram.uniform("u_viewProjection"),this._uModelLocation=this._sceneProgram.uniform("u_model"),this._uEyeLocation=this._sceneProgram.uniform("u_eye"),this._uNormalLocation=this._sceneProgram.uniform("u_normal"),this._uSceneFrameSizeLocation=this._sceneProgram.uniform("u_frameSize");const h=new o.Shader(n,u.VERTEX_SHADER,"ndctriangle.vert");h.initialize(a(6608));const l=new o.Shader(n,u.FRAGMENT_SHADER,"ssao.frag");l.initialize(a(8589)),this._aoProgram=new o.Program(n,"AOProgram"),this._aoProgram.initialize([h,l],!0),this._aoProgram.link(),this._aoProgram.bind(),this._uDepthTextureLocation=this._aoProgram.uniform("u_depth"),this._uNormalTextureLocation=this._aoProgram.uniform("u_normal"),this._uAOFrameSizeLocation=this._aoProgram.uniform("u_frameSize"),this._uViewProjectionLocation2=this._aoProgram.uniform("u_viewProjection"),this._uViewProjectionInverseLocation=this._aoProgram.uniform("u_viewProjectionInverse");const f=new o.Shader(n,u.FRAGMENT_SHADER,"blur.frag");f.initialize(a(474)),this._blurProgram=new o.Program(n,"BlurProgram"),this._blurProgram.initialize([h,f],!0),this._blurProgram.link(),this._blurProgram.bind(),this._uKernelSizeLocation=this._blurProgram.uniform("u_kernelSize"),this._uSourceLocation=this._blurProgram.uniform("u_source"),this._uBlurFrameSizeLocation=this._blurProgram.uniform("u_frameSize");const m=new o.Shader(n,u.FRAGMENT_SHADER,"composition.frag");return m.initialize(a(102)),this._compositionProgram=new o.Program(n,"CompositionProgram"),this._compositionProgram.initialize([h,m],!0),this._compositionProgram.link(),this._compositionProgram.bind(),this._uColorLocation=this._compositionProgram.uniform("u_color"),this._uDepthLocation=this._compositionProgram.uniform("u_depth"),this._uAOMapLocation=this._compositionProgram.uniform("u_aoMap"),this._uCompositionFrameSizeLocation=this._compositionProgram.uniform("u_frameSize"),this._forwardPass=new o.ForwardSceneRenderPass(n),this._forwardPass.initialize(),this._forwardPass.camera=this._camera,this._forwardPass.target=this._sceneFbo,this._forwardPass.program=this._sceneProgram,this._forwardPass.updateModelTransform=n=>{u.uniformMatrix4fv(this._uModelLocation,!1,n)},this._forwardPass.updateViewProjectionTransform=n=>{u.uniformMatrix4fv(this._uViewProjectionLocation,!1,n)},this._forwardPass.bindUniforms=()=>{u.uniform3fv(this._uEyeLocation,this._camera.eye),u.uniform1i(this._uNormalLocation,2),u.uniform2f(this._uSceneFrameSizeLocation,this._frameSize[0],this._frameSize[1])},this._forwardPass.bindGeometry=n=>{},this._forwardPass.bindMaterial=n=>{const t=n;r.auxiliaries.assert(void 0!==t,`Material ${n.name} is not a PBR material.`),t.normalTexture.bind(u.TEXTURE2)},this.loadAsset(),!0}onUninitialize(){super.uninitialize()}onDiscarded(){this._altered.alter("canvasSize"),this._altered.alter("clearColor"),this._altered.alter("frameSize"),this._altered.alter("multiFrameNumber")}onUpdate(){const n=this._context.gl;return this._altered.frameSize&&(this._camera.viewport=[this._frameSize[0],this._frameSize[1]],this._camera.aspect=this._frameSize[0]/this._frameSize[1]),this._altered.clearColor&&(this._sceneFbo.clearColor(this._clearColor,n.COLOR_ATTACHMENT0),this._forwardPass.clearColor=this._clearColor),this._navigation.update(),this._forwardPass.update(),this._camera.altered&&(this._aoProgram.bind(),n.uniformMatrix4fv(this._uViewProjectionLocation2,!1,this._camera.viewProjection),n.uniformMatrix4fv(this._uViewProjectionInverseLocation,!1,this._camera.viewProjectionInverse)),this._altered.any||this._camera.altered}onPrepare(){const n=this._context.gl;this._altered.frameSize&&(this._sceneFbo.resize(this._frameSize[0],this._frameSize[1]),this._aoFbo.resize(this._frameSize[0],this._frameSize[1]),this._blurredAOFbo.resize(this._frameSize[0],this._frameSize[1])),this._forwardPass.prepare(),this._aoProgram.bind(),n.uniform2f(this._uAOFrameSizeLocation,this._frameSize[0],this._frameSize[1]),n.uniform1i(this._uNormalTextureLocation,0),n.uniform1i(this._uDepthTextureLocation,1),this._blurProgram.bind(),n.uniform1i(this._uKernelSizeLocation,5),n.uniform1i(this._uSourceLocation,0),n.uniform2f(this._uBlurFrameSizeLocation,this._frameSize[0],this._frameSize[1]),this._compositionProgram.bind(),n.uniform1i(this._uColorLocation,0),n.uniform1i(this._uDepthLocation,1),n.uniform1i(this._uAOMapLocation,2),n.uniform2f(this._uCompositionFrameSizeLocation,this._frameSize[0],this._frameSize[1]),this._altered.reset(),this._camera.altered=!1}onFrame(n){const t=this._context.gl;this.isLoading||(this._sceneFbo.bind(),t.drawBuffers([t.COLOR_ATTACHMENT0,t.COLOR_ATTACHMENT0+1,t.COLOR_ATTACHMENT0+2]),this._sceneFbo.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT,!1,!1),t.clearBufferfv(t.COLOR,1,[.5,.5,.5,1]),t.clearBufferfv(t.COLOR,2,[1,1,1,1]),this._sceneProgram.bind(),this._forwardPass.frame(),this._aoFbo.bind(),t.drawBuffers([t.COLOR_ATTACHMENT0]),this._aoFbo.clear(t.COLOR_BUFFER_BIT,!1,!1),this._sceneNormal.bind(t.TEXTURE0),this._sceneLinearDepth.bind(t.TEXTURE1),this._aoProgram.bind(),this._ndcGeometry.bind(),this._ndcGeometry.draw(),this._ndcGeometry.unbind(),this._blurredAOFbo.bind(),t.drawBuffers([t.COLOR_ATTACHMENT0]),this._blurredAOFbo.clear(t.COLOR_BUFFER_BIT,!1,!1),this._aoNoisyMap.bind(t.TEXTURE0),this._blurProgram.bind(),this._ndcGeometry.bind(),this._ndcGeometry.draw(),this._ndcGeometry.unbind())}onSwap(){const n=this._context.gl;this.isLoading||(this._outputFbo.bind(),n.drawBuffers([n.BACK]),this._outputFbo.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT,!1,!1),this._sceneColor.bind(n.TEXTURE0),this._sceneLinearDepth.bind(n.TEXTURE1),this._aoMap.bind(n.TEXTURE2),this._compositionProgram.bind(),this._ndcGeometry.bind(),this._ndcGeometry.draw(),this._ndcGeometry.unbind())}loadAsset(){this._forwardPass.scene=void 0,this._loader.uninitialize(),this._loader.loadAsset("/examples/data/matrix-chair.glb").then((()=>{this._forwardPass.scene=this._loader.defaultScene,this.finishLoading(),this.invalidate(!0)}))}}n.AmbientOcclusionRenderer=u;class s extends i.Example{onInitialize(n){return this._canvas=new o.Canvas(n,{antialias:!1}),this._canvas.controller.multiFrameNumber=1,this._canvas.framePrecision=o.Wizard.Precision.byte,this._canvas.frameScale=[1,1],this._renderer=new u,this._canvas.renderer=this._renderer,!0}onUninitialize(){this._canvas.dispose(),this._renderer.uninitialize()}get canvas(){return this._canvas}get renderer(){return this._renderer}}n.AmbientOcclusionExample=s})(),e})()));
//# sourceMappingURL=ambient-occlusion-example.js.map