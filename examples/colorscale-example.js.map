{"version":3,"file":"colorscale-example.js","mappings":"CAAA,SAA2CA,EAAMC,GAChD,GAAsB,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,EAAQG,QAAQ,mBAC7B,GAAqB,mBAAXC,QAAyBA,OAAOC,IAC9CD,OAAO,CAAC,aAAcJ,OAClB,CACJ,IAAIM,EAAuB,iBAAZL,QAAuBD,EAAQG,QAAQ,cAAgBH,EAAQD,EAAgB,WAC9F,IAAI,IAAIQ,KAAKD,GAAuB,iBAAZL,QAAuBA,QAAUF,GAAMQ,GAAKD,EAAEC,EACvE,CACA,CATD,CASGC,MAAOC,G,2GCNV,gBAWA,MAAsBC,UAAgB,EAAAC,cAKxB,WAAAC,GACiBC,SAASC,uBAAuB,WAAWC,KAAK,GACvCC,MAAMC,QAAU,QACpD,CAKU,WAAAC,GACiBL,SAASC,uBAAuB,WAAWC,KAAK,GACvCC,MAAMC,QAAU,MACpD,CAEU,MAAAE,GAELC,OAAuB,OAAIC,KAAKC,OAChCF,OAAwB,QAAIC,KAAKC,OAAOC,QACxCH,OAA2B,WAAIC,KAAKC,OAAOE,WAE3CJ,OAAyB,SAAIC,KAAKI,QACvC,CAEA,UAAAC,CAAWC,GACP,MAAMC,EAASP,KAAKQ,aAAaF,GAYjC,OAVAN,KAAKI,SAASK,eAAeC,WAAWC,IAChCA,IAAW,EAAAC,cAAcC,SACzBb,KAAKH,cACEc,IAAW,EAAAC,cAAcE,SAChCd,KAAKT,a,IAIbS,KAAKF,SAEES,CACX,CAEA,YAAAQ,GACIf,KAAKgB,gBACT,CAUA,2BAAAC,GAEI,MAAMC,EAAIlB,KAAKC,OAAOK,QACtBY,EAAEC,iBAAiB,SAAUC,IACrBA,EAAMC,SAAW,EAAAC,OAAOC,WAAWC,OAAON,E,GAEtD,EA7DJ,W,UCdArC,EAAOD,QAAU,2Z,WCAjBC,EAAOD,QAAU,+c,wBCAjBC,EAAOD,QAAUQ,C,GCCbqC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAahD,QAGrB,IAAIC,EAAS4C,EAAyBE,GAAY,CAGjD/C,QAAS,CAAC,GAOX,OAHAkD,EAAoBH,GAAU9C,EAAQA,EAAOD,QAAS8C,GAG/C7C,EAAOD,OACf,C,sHCnBA,gBAEA,UAqBA,UAOA,MAAMmD,UAA2B,EAAAC,SAAjC,c,oBAEc,KAAAC,aAAc,EAEd,KAAAC,WAAa,IAAIC,MACjB,KAAAC,SAAqD,CAE3D,CAAC,YAAa,UAAW,GAAG,GAC5B,CAAC,YAAa,UAAW,IAAI,GAC7B,CAAC,YAAa,UAAW,GAAG,GAC5B,CAAC,YAAa,UAAW,IAAI,GAE7B,CAAC,WAAY,UAAW,GAAG,GAC3B,CAAC,WAAY,UAAW,IAAI,GAC5B,CAAC,YAAa,QAAS,GAAG,GAC1B,CAAC,YAAa,QAAS,IAAI,GAE3B,CAAC,cAAe,QAAS,GAAG,GAC5B,CAAC,cAAe,QAAS,GAAG,GAC5B,CAAC,YAAa,SAAU,GAAG,GAC3B,CAAC,YAAa,SAAU,IAAI,GAE5B,CAAC,cAAe,WAAY,GAAG,GAC/B,CAAC,cAAe,WAAY,IAAI,GAChC,CAAC,YAAa,QAAS,IAAI,GAC3B,CAAC,YAAa,QAAS,KAAK,GAE5B,CAAC,cAAe,OAAQ,GAAG,GAC3B,CAAC,cAAe,OAAQ,IAAI,GAC5B,CAAC,cAAe,SAAU,GAAG,GAC7B,CAAC,cAAe,OAAQ,GAAG,GAE3B,CAAC,cAAe,OAAQ,GAAG,GAC3B,CAAC,cAAe,OAAQ,GAAG,GAC3B,CAAC,cAAe,OAAQ,GAAG,GAC3B,CAAC,cAAe,OAAQ,GAAG,GAE3B,CAAC,cAAe,SAAU,GAAG,GAC7B,CAAC,cAAe,SAAU,GAAG,GAC7B,CAAC,cAAe,UAAW,GAAG,GAC9B,CAAC,cAAe,QAAS,GAAG,IAItB,KAAAC,QAAU,IAAIF,MAEd,KAAAG,UAAY,IAAIH,KAyN9B,CApMc,YAAA3B,CAAaN,EAAkBqC,GAGrC,MAAMC,EAAKtC,EAAQsC,GAInBxC,KAAKyC,YAAc,IAAI,EAAAC,mBAAmB1C,KAAK2C,SAAU,cACzD3C,KAAKyC,YAAYpC,aAEjBL,KAAK4C,SAAW,IAAI,EAAAC,oBAAoB7C,KAAK2C,UAC7C3C,KAAK4C,SAASvC,aAGd,MAAMyC,EAAO,IAAI,EAAAC,OAAO7C,EAASsC,EAAGQ,cAAe,mBACnDF,EAAKzC,WAAW,EAAQ,OACxB,MAAM4C,EAAO,IAAI,EAAAF,OAAO7C,EAASsC,EAAGU,gBAAiB,mBACrDD,EAAK5C,WAAW,EAAQ,MAExBL,KAAKmD,SAAW,IAAI,EAAAC,QAAQlD,EAAS,qBACrCF,KAAKmD,SAAS9C,WAAW,CAACyC,EAAMG,IAAO,GAEvCjD,KAAKmD,SAASE,UAAU,aAAcrD,KAAK4C,SAASU,gBACpDtD,KAAKmD,SAASI,OACdvD,KAAKmD,SAASK,OAEdxD,KAAKyD,SAAWzD,KAAKmD,SAASO,QAAQ,YACtC1D,KAAK2D,SAAW3D,KAAKmD,SAASO,QAAQ,YACtClB,EAAGoB,UAAU5D,KAAKmD,SAASO,QAAQ,aAAc,GAEjD1D,KAAKmD,SAASU,SAKd7D,KAAK8D,QAAU,IAAI,EAAAC,OAInB/D,KAAKgE,WAAa,IAAI,EAAAC,gBAAgB/D,GACtCF,KAAKgE,WAAW3D,aAChBL,KAAKgE,WAAWE,OAASlE,KAAK8D,QAC9B9D,KAAKgE,WAAWG,OAASnE,KAAKyC,YAC9BzC,KAAKgE,WAAWI,WAAY,EAE5B,EAAAC,SAASC,SAAS,iCAAkCpE,GAC/CqE,MAAMC,IACH,IAAK,MAAMC,KAASzE,KAAKgE,WAAWU,OAChCD,EAAMD,SAAWA,EAErBxE,KAAK2E,UAAYH,EACjBxE,KAAK4E,eACL5E,KAAK6E,gBACL7E,KAAK8E,YAAY,IAEpBC,OAAOC,GAAW,EAAAC,YAAYC,IAAI,EAAAD,YAAYE,SAASC,MAAOJ,KAGnE,MAAMK,EAA8B,CAACnG,EAC/BoG,EAAgBC,EAAgBC,EAAeC,KAEjDzF,KAAKkC,WAAWhD,GAAK,EAAAwG,KAAKC,SAE1B3F,KAAKqC,QAAQnD,GAAK,IAAI,EAAA0G,gBAAgB,IAAI,EAAAC,KAAK,GAAGP,MAAWC,MAAWC,KAAU,EAAAM,MAAMC,KAAKC,SAC7FhG,KAAKqC,QAAQnD,GAAG+G,WAAa,EAAAH,MAAMI,WAAWC,IAE9CnG,KAAKsC,UAAUpD,GAAK,IAAI,EAAAkH,UAAUlG,EAAS,UAAUqF,KACrDvF,KAAKsC,UAAUpD,GAAGmB,WAAWmF,EAAO,EAAGhD,EAAG6D,IAAK7D,EAAG6D,IAAK7D,EAAG8D,eAE1D,EAAAC,WAAWC,WAAW,QAAQlB,SAAeC,EAAQC,GAAOjB,MAAMkC,IAC1DhB,GACAgB,EAAMhB,SAEV,MAAMiB,EAAOD,EAAME,QAAQ,EAAAC,MAAMC,MAAMR,KAAK,GAC5CrG,KAAKsC,UAAUpD,GAAGwH,KAAKA,GAAM,GAAM,EAAM,GAC3C,EAGN1G,KAAKkC,WAAW4E,OAAS9G,KAAKqC,QAAQyE,OAAS9G,KAAKsC,UAAUwE,OAAS9G,KAAKoC,SAAS0E,OAErF,IAAK,IAAI5H,EAAI,EAAGA,EAAIc,KAAKoC,SAAS0E,SAAU5H,EACxCmG,EAA4BnG,EACxBc,KAAKoC,SAASlD,GAAG,GAAIc,KAAKoC,SAASlD,GAAG,GAAIc,KAAKoC,SAASlD,GAAG,GAAIc,KAAKoC,SAASlD,GAAG,IAGxFc,KAAKgE,WAAWU,OAAS1E,KAAKqC,QAE9B,IAAK,MAAMoC,KAASzE,KAAKgE,WAAWU,OAChCD,EAAMsC,SAAW,GAAO,EAAAjB,MAAMkB,mBAC9BvC,EAAMwC,MAAMC,QAAQ,QACpBzC,EAAM0C,aAAe,EAAArB,MAAMsB,KAAKC,MAGpC,OAAO,CACX,CAKU,cAAArG,GACNsG,MAAMvG,eAENf,KAAKyC,YAAY1B,eACjBf,KAAKgE,WAAWjD,cACpB,CAEU,WAAAwG,GACNvH,KAAKwH,SAASC,MAAM,cACpBzH,KAAKwH,SAASC,MAAM,cACpBzH,KAAKwH,SAASC,MAAM,aACpBzH,KAAKwH,SAASC,MAAM,mBACxB,CASU,QAAAC,GAEN,IAAK,MAAMjD,KAASzE,KAAKgE,WAAWU,OAChC,GAAID,EAAMkD,SAAWlD,EAAMwC,MAAMU,QAC7B,OAAO,EAGf,OAAO3H,KAAKwH,SAASI,KAAO5H,KAAK8D,QAAQ6D,OAC7C,CAMU,SAAAE,GAEN,GAAI7H,KAAKwH,SAASM,WAAY,CAC1B9H,KAAK8D,QAAQiE,OAAS/H,KAAKgI,YAAY,GAAKhI,KAAKgI,YAAY,GAC7DhI,KAAK8D,QAAQmE,SAAWjI,KAAKgI,YAE7B,IAAK,IAAI9I,EAAI,EAAGA,EAAIc,KAAKoC,SAAS0E,SAAU5H,EAAG,CAC3C,MAAOgJ,EAAGC,GAAK,CAACjJ,EAAI,EAAGkJ,KAAKC,MAAMnJ,EAAI,IACtCc,KAAKkC,WAAWhD,GAAG,GAAe,KAATgJ,EAAI,GAAgB,IAAJA,EAAW,EACpDlI,KAAKkC,WAAWhD,GAAG,GAAe,KAATiJ,EAAI,GAAgB,GAAJA,EAAW,EAAM,G,CAG9DnI,KAAK4E,c,CAGL5E,KAAKwH,SAASc,YACdtI,KAAKyC,YAAY6F,WAAWtI,KAAKuI,aAGrCvI,KAAKgE,WAAWwE,SAEhBxI,KAAKwH,SAASiB,QACdzI,KAAK8D,QAAQ6D,SAAU,CAC3B,CAMU,OAAAe,CAAQC,GACd,MAAMnG,EAAKxC,KAAK2C,SAASH,GAEzBA,EAAGyF,SAAS,EAAG,EAAGjI,KAAK8D,QAAQmE,SAAS,GAAIjI,KAAK8D,QAAQmE,SAAS,IAClEjI,KAAKyC,YAAYmG,MAAMpG,EAAGqG,iBAAmBrG,EAAGsG,kBAAkB,GAAM,GAExE9I,KAAKgE,WAAW+E,QAEhB/I,KAAKmD,SAASK,OAEdhB,EAAGwG,UAAUhJ,KAAKyD,SAAU,GAAM,GAAO,EAAMzD,KAAK8D,QAAQiE,QAE5D,IAAK,IAAI7I,EAAI,EAAGA,EAAIc,KAAKoC,SAAS0E,SAAU5H,EACxCc,KAAKsC,UAAUpD,GAAGsE,KAAKhB,EAAGyG,UAE1BzG,EAAG0G,WAAWlJ,KAAK2D,SAAU3D,KAAKkC,WAAWhD,IAC7Cc,KAAK4C,SAASuG,OAGlBnJ,KAAKmD,SAASU,QAClB,CAEU,YAAAe,GACN,IAAK5E,KAAKgE,WAAWoF,YACjB,OAEJ,MAAMC,EAAM,EAAA3D,KAAK4D,WAAiC,GAAtBtJ,KAAKgI,YAAY,GAAgC,GAAtBhI,KAAKgI,YAAY,IAExE,IAAK,IAAI9I,EAAI,EAAGA,EAAIc,KAAKoC,SAAS0E,SAAU5H,EACxCc,KAAKqC,QAAQnD,GAAGqK,SAAW,EAAA7D,KAAK8D,IAAI,EAAA9D,KAAKC,SAAU3F,KAAKkC,WAAWhD,GAAImK,EAE/E,EAKJ,MAAaI,UAA0B,EAAApK,QAKnC,YAAAmB,CAAaF,GAUT,OARAN,KAAK0J,QAAU,IAAI,EAAAC,OAAOrJ,EAAS,CAAEsJ,WAAW,IAChD5J,KAAK0J,QAAQvJ,WAAW0J,iBAAmB,EAC3C7J,KAAK0J,QAAQI,eAAiB,EAAAC,OAAOC,UAAUC,KAC/CjK,KAAK0J,QAAQQ,WAAa,CAAC,EAAK,GAEhClK,KAAKmK,UAAY,IAAIpI,EACrB/B,KAAK0J,QAAQtJ,SAAWJ,KAAKmK,WAEtB,CACX,CAEA,cAAAnJ,GACIhB,KAAK0J,QAAQU,UACZpK,KAAKmK,UAAuBpJ,cACjC,CAEA,UAAId,GACA,OAAOD,KAAK0J,OAChB,CAEA,YAAItJ,GACA,OAAOJ,KAAKmK,SAChB,EA7BJ,qB","sources":["webpack:///webpack/universalModuleDefinition","webpack:///./example.ts","webpack:///./data/colorscale.frag","webpack:///./data/colorscale.vert","webpack:///external umd \"gloperate\"","webpack:///webpack/bootstrap","webpack:///./colorscale-example.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"gloperate\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"gloperate\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"gloperate\")) : factory(root[\"gloperate\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, (__WEBPACK_EXTERNAL_MODULE__4160__) => {\nreturn ","\n/* spellchecker: disable */\n\nimport {\n    Canvas,\n    Initializable,\n    LoadingStatus,\n    Renderer,\n    viewer,\n} from 'webgl-operate';\n\n/* spellchecker: enable */\n\n\nexport abstract class Example extends Initializable {\n\n    /**\n     * Hide the loading spinner.\n     */\n    protected showSpinner(): void {\n        const spinnerElement = document.getElementsByClassName('spinner').item(0)!;\n        (spinnerElement as HTMLElement).style.display = 'inline';\n    }\n\n    /**\n     * Hide the loading spinner.\n     */\n    protected hideSpinner(): void {\n        const spinnerElement = document.getElementsByClassName('spinner').item(0)!;\n        (spinnerElement as HTMLElement).style.display = 'none';\n    }\n\n    protected expose(): void {\n\n        (window as any)['canvas'] = this.canvas;\n        (window as any)['context'] = this.canvas.context;\n        (window as any)['controller'] = this.canvas.controller;\n\n        (window as any)['renderer'] = this.renderer;\n    }\n\n    initialize(element: HTMLCanvasElement | string): boolean {\n        const result = this.onInitialize(element);\n\n        this.renderer.loadingStatus$.subscribe((status: LoadingStatus) => {\n            if (status === LoadingStatus.Finished) {\n                this.hideSpinner();\n            } else if (status === LoadingStatus.Started) {\n                this.showSpinner();\n            }\n        });\n\n        this.expose();\n\n        return result;\n    }\n\n    uninitialize(): void {\n        this.onUninitialize();\n    }\n\n    abstract onInitialize(element: HTMLCanvasElement | string): boolean;\n\n    abstract onUninitialize(): void;\n\n    abstract get renderer(): Renderer;\n\n    abstract get canvas(): Canvas;\n\n    enableFullscreenOnCtrlClick(): void {\n\n        const e = this.canvas.element;\n        e.addEventListener('click', (event) => {\n            if (event.ctrlKey) { viewer.Fullscreen.toggle(e); }\n        });\n    }\n}\n","module.exports = \"\\nprecision lowp float;\\n\\n\\n#if __VERSION__ == 100\\n    #define texture(sampler, coord) texture2D(sampler, coord)\\n#else \\n    #define varying in\\n#endif\\n\\n\\n\\nuniform sampler2D u_texture;\\n\\n#if __VERSION__ == 100\\n    #define fragColor gl_FragColor\\n#else\\n    layout(location = 0) out vec4 fragColor;\\n#endif\\n\\n\\nvarying vec2 v_uv;\\n\\n\\nvoid main(void)\\n{\\n    fragColor = texture(u_texture, v_uv);\\n}\\n\"","module.exports = \"\\nprecision lowp float;\\n\\n\\n#if __VERSION__ == 100\\n    #define texture(sampler, coord) texture2D(sampler, coord)\\n#else\\n    #define varying out\\n#endif\\n\\n\\n\\n#if __VERSION__ == 100\\n    attribute vec2 a_vertex;\\n\\n#else\\n    layout(location = 0) in vec2 a_vertex;\\n#endif\\n\\n\\nuniform vec2 u_extent;\\nuniform vec2 u_offset;\\n\\nvarying vec2 v_uv;\\n\\nvoid main()\\n{\\n    v_uv = a_vertex;\\n    gl_Position = vec4(u_offset + u_extent * a_vertex, 0.0, 1.0);\\n}\\n\"","module.exports = __WEBPACK_EXTERNAL_MODULE__4160__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\n/* spellchecker: disable */\n\nimport { auxiliaries, vec2 } from 'webgl-operate';\n\nimport {\n    Camera,\n    Canvas,\n    Color,\n    ColorScale,\n    Context,\n    DefaultFramebuffer,\n    FontFace,\n    Invalidate,\n    Label,\n    LabelRenderPass,\n    NdcFillingRectangle,\n    Position2DLabel,\n    Program,\n    Renderer,\n    Shader,\n    Text,\n    Texture2D,\n    Wizard,\n} from 'webgl-operate';\n\nimport { Example } from './example';\n\n/* spellchecker: enable */\n\n// tslint:disable:max-classes-per-file\n\n\nclass ColorScaleRenderer extends Renderer {\n\n    protected _extensions = false;\n\n    protected _positions = new Array<vec2>();\n    protected _presets: Array<[string, string, number, boolean]> = [\n\n        ['smithwalt', 'viridis', 7, false],\n        ['smithwalt', 'viridis', 64, false],\n        ['smithwalt', 'inferno', 7, false],\n        ['smithwalt', 'inferno', 64, false],\n\n        ['marcosci', 'cividis', 7, false],\n        ['marcosci', 'cividis', 64, false],\n        ['smithwalt', 'magma', 7, false],\n        ['smithwalt', 'magma', 64, false],\n\n        ['colorbrewer', 'Greys', 4, true],\n        ['colorbrewer', 'Greys', 7, true],\n        ['smithwalt', 'plasma', 7, false],\n        ['smithwalt', 'plasma', 64, false],\n\n        ['colorbrewer', 'Spectral', 7, true],\n        ['colorbrewer', 'Spectral', 64, true],\n        ['mikhailov', 'turbo', 16, false],\n        ['mikhailov', 'turbo', 128, false],\n\n        ['colorbrewer', 'BrBG', 7, true],\n        ['colorbrewer', 'RdBu', 64, true],\n        ['colorbrewer', 'RdYlBu', 7, true],\n        ['colorbrewer', 'PuOr', 7, true],\n\n        ['colorbrewer', 'OrRd', 4, false],\n        ['colorbrewer', 'OrRd', 7, false],\n        ['colorbrewer', 'RdPu', 4, false],\n        ['colorbrewer', 'RdPu', 7, false],\n\n        ['colorbrewer', 'Accent', 7, false],\n        ['colorbrewer', 'Paired', 7, false],\n        ['colorbrewer', 'Pastel2', 7, false],\n        ['colorbrewer', 'Dark2', 7, false],\n    ];\n\n    protected _labelPass: LabelRenderPass;\n    protected _labels = new Array<Position2DLabel>();\n\n    protected _textures = new Array<Texture2D>();\n    protected _ndcrect: NdcFillingRectangle;\n    protected _program: Program;\n\n    protected _uExtent: WebGLUniformLocation;\n    protected _uOffset: WebGLUniformLocation;\n\n    protected _camera: Camera;\n\n    protected _defaultFBO: DefaultFramebuffer;\n\n    protected _fontFace: FontFace | undefined;\n\n\n    /**\n     * Initializes and sets up rendering passes, navigation, loads a font face and links shaders with program.\n     * @param context - valid context to create the object for.\n     * @param identifier - meaningful name for identification of this instance.\n     * @param mouseEventProvider - required for mouse interaction\n     * @returns - whether initialization was successful\n     */\n    protected onInitialize(context: Context, callback: Invalidate,\n        /* eventProvider: eventProvider */): boolean {\n\n        const gl = context.gl;\n\n        /* Create framebuffers, textures, and render buffers. */\n\n        this._defaultFBO = new DefaultFramebuffer(this._context, 'DefaultFBO');\n        this._defaultFBO.initialize();\n\n        this._ndcrect = new NdcFillingRectangle(this._context);\n        this._ndcrect.initialize();\n\n\n        const vert = new Shader(context, gl.VERTEX_SHADER, 'colorscale.vert');\n        vert.initialize(require('./data/colorscale.vert'));\n        const frag = new Shader(context, gl.FRAGMENT_SHADER, 'colorscale.frag');\n        frag.initialize(require('./data/colorscale.frag'));\n\n        this._program = new Program(context, 'ColorScaleProgram');\n        this._program.initialize([vert, frag], false);\n\n        this._program.attribute('a_position', this._ndcrect.vertexLocation);\n        this._program.link();\n        this._program.bind();\n\n        this._uExtent = this._program.uniform('u_extent');\n        this._uOffset = this._program.uniform('u_offset');\n        gl.uniform1i(this._program.uniform('u_texture'), 0);\n\n        this._program.unbind();\n\n\n        /* Create and configure test navigation. */\n\n        this._camera = new Camera();\n\n        /* Create and configure label pass. */\n\n        this._labelPass = new LabelRenderPass(context);\n        this._labelPass.initialize();\n        this._labelPass.camera = this._camera;\n        this._labelPass.target = this._defaultFBO;\n        this._labelPass.depthMask = false;\n\n        FontFace.fromFile('./data/opensans2048p160d16.fnt', context)\n            .then((fontFace) => {\n                for (const label of this._labelPass.labels) {\n                    label.fontFace = fontFace;\n                }\n                this._fontFace = fontFace;\n                this.updateLabels();\n                this.finishLoading();\n                this.invalidate();\n            })\n            .catch((reason) => auxiliaries.log(auxiliaries.LogLevel.Error, reason));\n\n\n        const createLabeledColorScaleRect = (i: number\n            , source: string, preset: string, steps: number, invert: boolean): void => {\n\n            this._positions[i] = vec2.create();\n\n            this._labels[i] = new Position2DLabel(new Text(`${source}: ${preset} #${steps}`), Label.Type.Dynamic);\n            this._labels[i].lineAnchor = Label.LineAnchor.Top;\n\n            this._textures[i] = new Texture2D(context, `Texture${preset}`);\n            this._textures[i].initialize(steps, 1, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE);\n\n            ColorScale.fromPreset(`data/${source}.json`, preset, steps).then((scale: ColorScale) => {\n                if (invert) {\n                    scale.invert();\n                }\n                const data = scale.bitsUI8(Color.Space.RGB, false);\n                this._textures[i].data(data, true, false);\n            });\n        };\n\n        this._positions.length = this._labels.length = this._textures.length = this._presets.length;\n\n        for (let i = 0; i < this._presets.length; ++i) {\n            createLabeledColorScaleRect(i,\n                this._presets[i][0], this._presets[i][1], this._presets[i][2], this._presets[i][3]);\n        }\n\n        this._labelPass.labels = this._labels;\n\n        for (const label of this._labelPass.labels) {\n            label.fontSize = 15.0 * Label.devicePixelRatio();\n            label.color.fromHex('#fff');\n            label.fontSizeUnit = Label.Unit.Pixel;\n        }\n\n        return true;\n    }\n\n    /**\n     * Uninitializes Buffers, Textures, and Program.\n     */\n    protected onUninitialize(): void {\n        super.uninitialize();\n\n        this._defaultFBO.uninitialize();\n        this._labelPass.uninitialize();\n    }\n\n    protected onDiscarded(): void {\n        this._altered.alter('canvasSize');\n        this._altered.alter('clearColor');\n        this._altered.alter('frameSize');\n        this._altered.alter('multiFrameNumber');\n    }\n\n    /**\n     * This is invoked in order to check if rendering of a frame is required by means of implementation specific\n     * evaluation (e.g., lazy non continuous rendering). Regardless of the return value a new frame (preparation,\n     * frame, swap) might be invoked anyway, e.g., when update is forced or canvas or context properties have\n     * changed or the renderer was invalidated @see{@link invalidate}.\n     * @returns whether to redraw\n     */\n    protected onUpdate(): boolean {\n\n        for (const label of this._labelPass.labels) {\n            if (label.altered || label.color.altered) {\n                return true;\n            }\n        }\n        return this._altered.any || this._camera.altered;\n    }\n\n    /**\n     * This is invoked in order to prepare rendering of one or more frames, regarding multi-frame rendering and\n     * camera-updates.\n     */\n    protected onPrepare(): void {\n\n        if (this._altered.canvasSize) {\n            this._camera.aspect = this._canvasSize[0] / this._canvasSize[1];\n            this._camera.viewport = this._canvasSize;\n\n            for (let i = 0; i < this._presets.length; ++i) {\n                const [x, y] = [i % 4, Math.floor(i / 4)];\n                this._positions[i][0] = (x + 1) * 0.05 + x * 0.45 - 1.0;\n                this._positions[i][1] = (y + 1) * 0.15 + y * 0.10 - 1.0 + 0.05;\n            }\n\n            this.updateLabels();\n        }\n\n        if (this._altered.clearColor) {\n            this._defaultFBO.clearColor(this._clearColor);\n        }\n\n        this._labelPass.update();\n\n        this._altered.reset();\n        this._camera.altered = false;\n    }\n\n    /**\n     * After (1) update and (2) preparation are invoked, a frame is invoked. Renders both 2D and 3D labels.\n     * @param frameNumber - for intermediate frames in accumulation rendering\n     */\n    protected onFrame(frameNumber: number): void {\n        const gl = this._context.gl;\n\n        gl.viewport(0, 0, this._camera.viewport[0], this._camera.viewport[1]);\n        this._defaultFBO.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT, true, false);\n\n        this._labelPass.frame();\n\n        this._program.bind();\n\n        gl.uniform2f(this._uExtent, 0.40, 0.40 / 7.0 * this._camera.aspect);\n\n        for (let i = 0; i < this._presets.length; ++i) {\n            this._textures[i].bind(gl.TEXTURE0);\n\n            gl.uniform2fv(this._uOffset, this._positions[i]);\n            this._ndcrect.draw();\n        }\n\n        this._program.unbind();\n    }\n\n    protected updateLabels(): void {\n        if (!this._labelPass.initialized) {\n            return;\n        }\n        const s05 = vec2.fromValues(this._canvasSize[0] * 0.5, this._canvasSize[1] * 0.5);\n\n        for (let i = 0; i < this._presets.length; ++i) {\n            this._labels[i].position = vec2.mul(vec2.create(), this._positions[i], s05);\n        }\n    }\n\n}\n\n\nexport class ColorScaleExample extends Example {\n\n    private _canvas: Canvas;\n    private _renderer: ColorScaleRenderer;\n\n    onInitialize(element: HTMLCanvasElement | string): boolean {\n\n        this._canvas = new Canvas(element, { antialias: false });\n        this._canvas.controller.multiFrameNumber = 1;\n        this._canvas.framePrecision = Wizard.Precision.byte;\n        this._canvas.frameScale = [1.0, 1.0];\n\n        this._renderer = new ColorScaleRenderer();\n        this._canvas.renderer = this._renderer;\n\n        return true;\n    }\n\n    onUninitialize(): void {\n        this._canvas.dispose();\n        (this._renderer as Renderer).uninitialize();\n    }\n\n    get canvas(): Canvas {\n        return this._canvas;\n    }\n\n    get renderer(): ColorScaleRenderer {\n        return this._renderer;\n    }\n\n}\n"],"names":["root","factory","exports","module","require","define","amd","a","i","self","__WEBPACK_EXTERNAL_MODULE__4160__","Example","Initializable","showSpinner","document","getElementsByClassName","item","style","display","hideSpinner","expose","window","this","canvas","context","controller","renderer","initialize","element","result","onInitialize","loadingStatus$","subscribe","status","LoadingStatus","Finished","Started","uninitialize","onUninitialize","enableFullscreenOnCtrlClick","e","addEventListener","event","ctrlKey","viewer","Fullscreen","toggle","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","ColorScaleRenderer","Renderer","_extensions","_positions","Array","_presets","_labels","_textures","callback","gl","_defaultFBO","DefaultFramebuffer","_context","_ndcrect","NdcFillingRectangle","vert","Shader","VERTEX_SHADER","frag","FRAGMENT_SHADER","_program","Program","attribute","vertexLocation","link","bind","_uExtent","uniform","_uOffset","uniform1i","unbind","_camera","Camera","_labelPass","LabelRenderPass","camera","target","depthMask","FontFace","fromFile","then","fontFace","label","labels","_fontFace","updateLabels","finishLoading","invalidate","catch","reason","auxiliaries","log","LogLevel","Error","createLabeledColorScaleRect","source","preset","steps","invert","vec2","create","Position2DLabel","Text","Label","Type","Dynamic","lineAnchor","LineAnchor","Top","Texture2D","RGB","UNSIGNED_BYTE","ColorScale","fromPreset","scale","data","bitsUI8","Color","Space","length","fontSize","devicePixelRatio","color","fromHex","fontSizeUnit","Unit","Pixel","super","onDiscarded","_altered","alter","onUpdate","altered","any","onPrepare","canvasSize","aspect","_canvasSize","viewport","x","y","Math","floor","clearColor","_clearColor","update","reset","onFrame","frameNumber","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","frame","uniform2f","TEXTURE0","uniform2fv","draw","initialized","s05","fromValues","position","mul","ColorScaleExample","_canvas","Canvas","antialias","multiFrameNumber","framePrecision","Wizard","Precision","byte","frameScale","_renderer","dispose"],"sourceRoot":""}