!function(t,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r(require("gloperate"));else if("function"==typeof define&&define.amd)define(["gloperate"],r);else{var e="object"==typeof exports?r(require("gloperate")):r(t.gloperate);for(var n in e)("object"==typeof exports?exports:t)[n]=e[n]}}(self,(t=>(()=>{var r={3659:(t,r,e)=>{"use strict";e.r(r),e.d(r,{glMatrix:()=>n,mat2:()=>a,mat2d:()=>i,mat3:()=>o,mat4:()=>s,quat:()=>h,quat2:()=>f,vec2:()=>l,vec3:()=>u,vec4:()=>c});var n={};e.r(n),e.d(n,{ARRAY_TYPE:()=>M,EPSILON:()=>v,RANDOM:()=>m,equals:()=>p,setMatrixArrayType:()=>d,toRadian:()=>_});var a={};e.r(a),e.d(a,{LDU:()=>O,add:()=>U,adjoint:()=>P,clone:()=>g,copy:()=>y,create:()=>x,determinant:()=>S,equals:()=>V,exactEquals:()=>N,frob:()=>D,fromRotation:()=>L,fromScaling:()=>q,fromValues:()=>F,identity:()=>A,invert:()=>C,mul:()=>Y,multiply:()=>T,multiplyScalar:()=>j,multiplyScalarAndAdd:()=>H,rotate:()=>R,scale:()=>z,set:()=>w,str:()=>B,sub:()=>k,subtract:()=>I,transpose:()=>E});var i={};e.r(i),e.d(i,{add:()=>ct,clone:()=>G,copy:()=>W,create:()=>X,determinant:()=>J,equals:()=>Mt,exactEquals:()=>vt,frob:()=>ut,fromRotation:()=>at,fromScaling:()=>it,fromTranslation:()=>ot,fromValues:()=>K,identity:()=>Q,invert:()=>$,mul:()=>mt,multiply:()=>tt,multiplyScalar:()=>ft,multiplyScalarAndAdd:()=>lt,rotate:()=>rt,scale:()=>et,set:()=>Z,str:()=>st,sub:()=>dt,subtract:()=>ht,translate:()=>nt});var o={};e.r(o),e.d(o,{add:()=>Vt,adjoint:()=>Et,clone:()=>pt,copy:()=>xt,create:()=>bt,determinant:()=>Ct,equals:()=>Xt,exactEquals:()=>kt,frob:()=>Nt,fromMat2d:()=>Bt,fromMat4:()=>_t,fromQuat:()=>Dt,fromRotation:()=>Lt,fromScaling:()=>qt,fromTranslation:()=>zt,fromValues:()=>gt,identity:()=>At,invert:()=>wt,mul:()=>Gt,multiply:()=>Pt,multiplyScalar:()=>Ht,multiplyScalarAndAdd:()=>Yt,normalFromMat4:()=>Ot,projection:()=>Ut,rotate:()=>Tt,scale:()=>Rt,set:()=>yt,str:()=>It,sub:()=>Wt,subtract:()=>jt,translate:()=>St,transpose:()=>Ft});var s={};e.r(s),e.d(s,{add:()=>qr,adjoint:()=>nr,clone:()=>Kt,copy:()=>Zt,create:()=>Qt,determinant:()=>ar,equals:()=>Ir,exactEquals:()=>Ur,frob:()=>Lr,fromQuat:()=>wr,fromQuat2:()=>pr,fromRotation:()=>Mr,fromRotationTranslation:()=>_r,fromRotationTranslationScale:()=>Ar,fromRotationTranslationScaleOrigin:()=>Fr,fromScaling:()=>vr,fromTranslation:()=>lr,fromValues:()=>$t,fromXRotation:()=>mr,fromYRotation:()=>dr,fromZRotation:()=>br,frustum:()=>Er,getRotation:()=>yr,getScaling:()=>gr,getTranslation:()=>xr,identity:()=>tr,invert:()=>er,lookAt:()=>Tr,mul:()=>Nr,multiply:()=>ir,multiplyScalar:()=>Dr,multiplyScalarAndAdd:()=>Or,ortho:()=>Sr,perspective:()=>Cr,perspectiveFromFieldOfView:()=>Pr,rotate:()=>ur,rotateX:()=>cr,rotateY:()=>hr,rotateZ:()=>fr,scale:()=>sr,set:()=>Jt,str:()=>zr,sub:()=>Vr,subtract:()=>Br,targetTo:()=>Rr,translate:()=>or,transpose:()=>rr});var u={};e.r(u),e.d(u,{add:()=>Wr,angle:()=>Ae,bezier:()=>me,ceil:()=>$r,clone:()=>Hr,copy:()=>Xr,create:()=>jr,cross:()=>le,dist:()=>ze,distance:()=>ie,div:()=>Re,divide:()=>Zr,dot:()=>fe,equals:()=>Ce,exactEquals:()=>Ee,floor:()=>Jr,forEach:()=>De,fromValues:()=>kr,hermite:()=>Me,inverse:()=>ce,len:()=>qe,length:()=>Yr,lerp:()=>ve,max:()=>re,min:()=>te,mul:()=>Te,multiply:()=>Kr,negate:()=>ue,normalize:()=>he,random:()=>de,rotateX:()=>xe,rotateY:()=>ge,rotateZ:()=>ye,round:()=>ee,scale:()=>ne,scaleAndAdd:()=>ae,set:()=>Gr,sqrDist:()=>Le,sqrLen:()=>Be,squaredDistance:()=>oe,squaredLength:()=>se,str:()=>we,sub:()=>Se,subtract:()=>Qr,transformMat3:()=>_e,transformMat4:()=>be,transformQuat:()=>pe,zero:()=>Fe});var c={};e.r(c),e.d(c,{add:()=>je,ceil:()=>Xe,clone:()=>Ue,copy:()=>Ne,create:()=>Oe,cross:()=>un,dist:()=>xn,distance:()=>Je,div:()=>pn,divide:()=>ke,dot:()=>sn,equals:()=>dn,exactEquals:()=>mn,floor:()=>Ge,forEach:()=>Fn,fromValues:()=>Ie,inverse:()=>an,len:()=>yn,length:()=>rn,lerp:()=>cn,max:()=>Qe,min:()=>We,mul:()=>_n,multiply:()=>Ye,negate:()=>nn,normalize:()=>on,random:()=>hn,round:()=>Ke,scale:()=>Ze,scaleAndAdd:()=>$e,set:()=>Ve,sqrDist:()=>gn,sqrLen:()=>An,squaredDistance:()=>tn,squaredLength:()=>en,str:()=>Mn,sub:()=>bn,subtract:()=>He,transformMat4:()=>fn,transformQuat:()=>ln,zero:()=>vn});var h={};e.r(h),e.d(h,{add:()=>ra,calculateW:()=>qn,clone:()=>Zn,conjugate:()=>Vn,copy:()=>Jn,create:()=>wn,dot:()=>aa,equals:()=>la,exactEquals:()=>fa,exp:()=>Bn,fromEuler:()=>Hn,fromMat3:()=>jn,fromValues:()=>$n,getAngle:()=>Sn,getAxisAngle:()=>Pn,identity:()=>En,invert:()=>Nn,len:()=>sa,length:()=>oa,lerp:()=>ia,ln:()=>Dn,mul:()=>ea,multiply:()=>Tn,normalize:()=>ha,pow:()=>On,random:()=>In,rotateX:()=>Rn,rotateY:()=>zn,rotateZ:()=>Ln,rotationTo:()=>va,scale:()=>na,set:()=>ta,setAxes:()=>ma,setAxisAngle:()=>Cn,slerp:()=>Un,sqlerp:()=>Ma,sqrLen:()=>ca,squaredLength:()=>ua,str:()=>Yn});var f={};e.r(f),e.d(f,{add:()=>Ia,clone:()=>ba,conjugate:()=>Xa,copy:()=>Fa,create:()=>da,dot:()=>Ha,equals:()=>ti,exactEquals:()=>Ja,fromMat4:()=>Aa,fromRotation:()=>ya,fromRotationTranslation:()=>xa,fromRotationTranslationValues:()=>pa,fromTranslation:()=>ga,fromValues:()=>_a,getDual:()=>Pa,getReal:()=>Ca,getTranslation:()=>Ra,identity:()=>wa,invert:()=>ka,len:()=>Wa,length:()=>Ga,lerp:()=>Ya,mul:()=>Va,multiply:()=>Na,normalize:()=>Za,rotateAroundAxis:()=>Ua,rotateByQuatAppend:()=>Da,rotateByQuatPrepend:()=>Oa,rotateX:()=>La,rotateY:()=>qa,rotateZ:()=>Ba,scale:()=>ja,set:()=>Ea,setDual:()=>Ta,setReal:()=>Sa,sqrLen:()=>Ka,squaredLength:()=>Qa,str:()=>$a,translate:()=>za});var l={};e.r(l),e.d(l,{add:()=>oi,angle:()=>Li,ceil:()=>hi,clone:()=>ei,copy:()=>ai,create:()=>ri,cross:()=>wi,dist:()=>ji,distance:()=>bi,div:()=>Vi,divide:()=>ci,dot:()=>Fi,equals:()=>Oi,exactEquals:()=>Di,floor:()=>fi,forEach:()=>ki,fromValues:()=>ni,inverse:()=>yi,len:()=>Ui,length:()=>pi,lerp:()=>Ei,max:()=>vi,min:()=>li,mul:()=>Ni,multiply:()=>ui,negate:()=>gi,normalize:()=>Ai,random:()=>Ci,rotate:()=>zi,round:()=>Mi,scale:()=>mi,scaleAndAdd:()=>di,set:()=>ii,sqrDist:()=>Hi,sqrLen:()=>Yi,squaredDistance:()=>_i,squaredLength:()=>xi,str:()=>Bi,sub:()=>Ii,subtract:()=>si,transformMat2:()=>Pi,transformMat2d:()=>Si,transformMat3:()=>Ti,transformMat4:()=>Ri,zero:()=>qi});var v=1e-6,M="undefined"!=typeof Float32Array?Float32Array:Array,m=Math.random;function d(t){M=t}var b=Math.PI/180;function _(t){return t*b}function p(t,r){return Math.abs(t-r)<=v*Math.max(1,Math.abs(t),Math.abs(r))}function x(){var t=new M(4);return M!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function g(t){var r=new M(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r}function y(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function A(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function F(t,r,e,n){var a=new M(4);return a[0]=t,a[1]=r,a[2]=e,a[3]=n,a}function w(t,r,e,n,a){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t}function E(t,r){if(t===r){var e=r[1];t[1]=r[2],t[2]=e}else t[0]=r[0],t[1]=r[2],t[2]=r[1],t[3]=r[3];return t}function C(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=e*i-a*n;return o?(o=1/o,t[0]=i*o,t[1]=-n*o,t[2]=-a*o,t[3]=e*o,t):null}function P(t,r){var e=r[0];return t[0]=r[3],t[1]=-r[1],t[2]=-r[2],t[3]=e,t}function S(t){return t[0]*t[3]-t[2]*t[1]}function T(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=e[0],u=e[1],c=e[2],h=e[3];return t[0]=n*s+i*u,t[1]=a*s+o*u,t[2]=n*c+i*h,t[3]=a*c+o*h,t}function R(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=Math.sin(e),u=Math.cos(e);return t[0]=n*u+i*s,t[1]=a*u+o*s,t[2]=n*-s+i*u,t[3]=a*-s+o*u,t}function z(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=e[0],u=e[1];return t[0]=n*s,t[1]=a*s,t[2]=i*u,t[3]=o*u,t}function L(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t}function q(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t}function B(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function D(t){return Math.hypot(t[0],t[1],t[2],t[3])}function O(t,r,e,n){return t[2]=n[2]/n[0],e[0]=n[0],e[1]=n[1],e[3]=n[3]-t[2]*e[1],[t,r,e]}function U(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function I(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function N(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function V(t,r){var e=t[0],n=t[1],a=t[2],i=t[3],o=r[0],s=r[1],u=r[2],c=r[3];return Math.abs(e-o)<=v*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-s)<=v*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-u)<=v*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(i-c)<=v*Math.max(1,Math.abs(i),Math.abs(c))}function j(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function H(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}Math.hypot||(Math.hypot=function(){for(var t=0,r=arguments.length;r--;)t+=arguments[r]*arguments[r];return Math.sqrt(t)});var Y=T,k=I;function X(){var t=new M(6);return M!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function G(t){var r=new M(6);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function W(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t}function Q(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function K(t,r,e,n,a,i){var o=new M(6);return o[0]=t,o[1]=r,o[2]=e,o[3]=n,o[4]=a,o[5]=i,o}function Z(t,r,e,n,a,i,o){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t}function $(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=r[4],s=r[5],u=e*i-n*a;return u?(u=1/u,t[0]=i*u,t[1]=-n*u,t[2]=-a*u,t[3]=e*u,t[4]=(a*s-i*o)*u,t[5]=(n*o-e*s)*u,t):null}function J(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],c=e[0],h=e[1],f=e[2],l=e[3],v=e[4],M=e[5];return t[0]=n*c+i*h,t[1]=a*c+o*h,t[2]=n*f+i*l,t[3]=a*f+o*l,t[4]=n*v+i*M+s,t[5]=a*v+o*M+u,t}function rt(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],c=Math.sin(e),h=Math.cos(e);return t[0]=n*h+i*c,t[1]=a*h+o*c,t[2]=n*-c+i*h,t[3]=a*-c+o*h,t[4]=s,t[5]=u,t}function et(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],c=e[0],h=e[1];return t[0]=n*c,t[1]=a*c,t[2]=i*h,t[3]=o*h,t[4]=s,t[5]=u,t}function nt(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],c=e[0],h=e[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=n*c+i*h+s,t[5]=a*c+o*h+u,t}function at(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t[4]=0,t[5]=0,t}function it(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=r[1],t[4]=0,t[5]=0,t}function ot(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=r[0],t[5]=r[1],t}function st(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ut(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ct(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t}function ht(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t}function ft(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t}function lt(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t[4]=r[4]+e[4]*n,t[5]=r[5]+e[5]*n,t}function vt(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]}function Mt(t,r){var e=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=r[0],c=r[1],h=r[2],f=r[3],l=r[4],M=r[5];return Math.abs(e-u)<=v*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(n-c)<=v*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-h)<=v*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-f)<=v*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-l)<=v*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(s-M)<=v*Math.max(1,Math.abs(s),Math.abs(M))}var mt=tt,dt=ht;function bt(){var t=new M(9);return M!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function _t(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[4],t[4]=r[5],t[5]=r[6],t[6]=r[8],t[7]=r[9],t[8]=r[10],t}function pt(t){var r=new M(9);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r}function xt(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function gt(t,r,e,n,a,i,o,s,u){var c=new M(9);return c[0]=t,c[1]=r,c[2]=e,c[3]=n,c[4]=a,c[5]=i,c[6]=o,c[7]=s,c[8]=u,c}function yt(t,r,e,n,a,i,o,s,u,c){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t}function At(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ft(t,r){if(t===r){var e=r[1],n=r[2],a=r[5];t[1]=r[3],t[2]=r[6],t[3]=e,t[5]=r[7],t[6]=n,t[7]=a}else t[0]=r[0],t[1]=r[3],t[2]=r[6],t[3]=r[1],t[4]=r[4],t[5]=r[7],t[6]=r[2],t[7]=r[5],t[8]=r[8];return t}function wt(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=r[4],s=r[5],u=r[6],c=r[7],h=r[8],f=h*o-s*c,l=-h*i+s*u,v=c*i-o*u,M=e*f+n*l+a*v;return M?(M=1/M,t[0]=f*M,t[1]=(-h*n+a*c)*M,t[2]=(s*n-a*o)*M,t[3]=l*M,t[4]=(h*e-a*u)*M,t[5]=(-s*e+a*i)*M,t[6]=v*M,t[7]=(-c*e+n*u)*M,t[8]=(o*e-n*i)*M,t):null}function Et(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=r[4],s=r[5],u=r[6],c=r[7],h=r[8];return t[0]=o*h-s*c,t[1]=a*c-n*h,t[2]=n*s-a*o,t[3]=s*u-i*h,t[4]=e*h-a*u,t[5]=a*i-e*s,t[6]=i*c-o*u,t[7]=n*u-e*c,t[8]=e*o-n*i,t}function Ct(t){var r=t[0],e=t[1],n=t[2],a=t[3],i=t[4],o=t[5],s=t[6],u=t[7],c=t[8];return r*(c*i-o*u)+e*(-c*a+o*s)+n*(u*a-i*s)}function Pt(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],c=r[6],h=r[7],f=r[8],l=e[0],v=e[1],M=e[2],m=e[3],d=e[4],b=e[5],_=e[6],p=e[7],x=e[8];return t[0]=l*n+v*o+M*c,t[1]=l*a+v*s+M*h,t[2]=l*i+v*u+M*f,t[3]=m*n+d*o+b*c,t[4]=m*a+d*s+b*h,t[5]=m*i+d*u+b*f,t[6]=_*n+p*o+x*c,t[7]=_*a+p*s+x*h,t[8]=_*i+p*u+x*f,t}function St(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],c=r[6],h=r[7],f=r[8],l=e[0],v=e[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=u,t[6]=l*n+v*o+c,t[7]=l*a+v*s+h,t[8]=l*i+v*u+f,t}function Tt(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],c=r[6],h=r[7],f=r[8],l=Math.sin(e),v=Math.cos(e);return t[0]=v*n+l*o,t[1]=v*a+l*s,t[2]=v*i+l*u,t[3]=v*o-l*n,t[4]=v*s-l*a,t[5]=v*u-l*i,t[6]=c,t[7]=h,t[8]=f,t}function Rt(t,r,e){var n=e[0],a=e[1];return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=a*r[3],t[4]=a*r[4],t[5]=a*r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t}function zt(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=r[0],t[7]=r[1],t[8]=1,t}function Lt(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=0,t[3]=-e,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function qt(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=r[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Bt(t,r){return t[0]=r[0],t[1]=r[1],t[2]=0,t[3]=r[2],t[4]=r[3],t[5]=0,t[6]=r[4],t[7]=r[5],t[8]=1,t}function Dt(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=e+e,s=n+n,u=a+a,c=e*o,h=n*o,f=n*s,l=a*o,v=a*s,M=a*u,m=i*o,d=i*s,b=i*u;return t[0]=1-f-M,t[3]=h-b,t[6]=l+d,t[1]=h+b,t[4]=1-c-M,t[7]=v-m,t[2]=l-d,t[5]=v+m,t[8]=1-c-f,t}function Ot(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=r[4],s=r[5],u=r[6],c=r[7],h=r[8],f=r[9],l=r[10],v=r[11],M=r[12],m=r[13],d=r[14],b=r[15],_=e*s-n*o,p=e*u-a*o,x=e*c-i*o,g=n*u-a*s,y=n*c-i*s,A=a*c-i*u,F=h*m-f*M,w=h*d-l*M,E=h*b-v*M,C=f*d-l*m,P=f*b-v*m,S=l*b-v*d,T=_*S-p*P+x*C+g*E-y*w+A*F;return T?(T=1/T,t[0]=(s*S-u*P+c*C)*T,t[1]=(u*E-o*S-c*w)*T,t[2]=(o*P-s*E+c*F)*T,t[3]=(a*P-n*S-i*C)*T,t[4]=(e*S-a*E+i*w)*T,t[5]=(n*E-e*P-i*F)*T,t[6]=(m*A-d*y+b*g)*T,t[7]=(d*x-M*A-b*p)*T,t[8]=(M*y-m*x+b*_)*T,t):null}function Ut(t,r,e){return t[0]=2/r,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function It(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Nt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Vt(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t[6]=r[6]+e[6],t[7]=r[7]+e[7],t[8]=r[8]+e[8],t}function jt(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t[6]=r[6]-e[6],t[7]=r[7]-e[7],t[8]=r[8]-e[8],t}function Ht(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t[8]=r[8]*e,t}function Yt(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t[4]=r[4]+e[4]*n,t[5]=r[5]+e[5]*n,t[6]=r[6]+e[6]*n,t[7]=r[7]+e[7]*n,t[8]=r[8]+e[8]*n,t}function kt(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]}function Xt(t,r){var e=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6],c=t[7],h=t[8],f=r[0],l=r[1],M=r[2],m=r[3],d=r[4],b=r[5],_=r[6],p=r[7],x=r[8];return Math.abs(e-f)<=v*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-l)<=v*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-M)<=v*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(i-m)<=v*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(o-d)<=v*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(s-b)<=v*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(u-_)<=v*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(c-p)<=v*Math.max(1,Math.abs(c),Math.abs(p))&&Math.abs(h-x)<=v*Math.max(1,Math.abs(h),Math.abs(x))}var Gt=Pt,Wt=jt;function Qt(){var t=new M(16);return M!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Kt(t){var r=new M(16);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function Zt(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function $t(t,r,e,n,a,i,o,s,u,c,h,f,l,v,m,d){var b=new M(16);return b[0]=t,b[1]=r,b[2]=e,b[3]=n,b[4]=a,b[5]=i,b[6]=o,b[7]=s,b[8]=u,b[9]=c,b[10]=h,b[11]=f,b[12]=l,b[13]=v,b[14]=m,b[15]=d,b}function Jt(t,r,e,n,a,i,o,s,u,c,h,f,l,v,M,m,d){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t[9]=h,t[10]=f,t[11]=l,t[12]=v,t[13]=M,t[14]=m,t[15]=d,t}function tr(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function rr(t,r){if(t===r){var e=r[1],n=r[2],a=r[3],i=r[6],o=r[7],s=r[11];t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=e,t[6]=r[9],t[7]=r[13],t[8]=n,t[9]=i,t[11]=r[14],t[12]=a,t[13]=o,t[14]=s}else t[0]=r[0],t[1]=r[4],t[2]=r[8],t[3]=r[12],t[4]=r[1],t[5]=r[5],t[6]=r[9],t[7]=r[13],t[8]=r[2],t[9]=r[6],t[10]=r[10],t[11]=r[14],t[12]=r[3],t[13]=r[7],t[14]=r[11],t[15]=r[15];return t}function er(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=r[4],s=r[5],u=r[6],c=r[7],h=r[8],f=r[9],l=r[10],v=r[11],M=r[12],m=r[13],d=r[14],b=r[15],_=e*s-n*o,p=e*u-a*o,x=e*c-i*o,g=n*u-a*s,y=n*c-i*s,A=a*c-i*u,F=h*m-f*M,w=h*d-l*M,E=h*b-v*M,C=f*d-l*m,P=f*b-v*m,S=l*b-v*d,T=_*S-p*P+x*C+g*E-y*w+A*F;return T?(T=1/T,t[0]=(s*S-u*P+c*C)*T,t[1]=(a*P-n*S-i*C)*T,t[2]=(m*A-d*y+b*g)*T,t[3]=(l*y-f*A-v*g)*T,t[4]=(u*E-o*S-c*w)*T,t[5]=(e*S-a*E+i*w)*T,t[6]=(d*x-M*A-b*p)*T,t[7]=(h*A-l*x+v*p)*T,t[8]=(o*P-s*E+c*F)*T,t[9]=(n*E-e*P-i*F)*T,t[10]=(M*y-m*x+b*_)*T,t[11]=(f*x-h*y-v*_)*T,t[12]=(s*w-o*C-u*F)*T,t[13]=(e*C-n*w+a*F)*T,t[14]=(m*p-M*g-d*_)*T,t[15]=(h*g-f*p+l*_)*T,t):null}function nr(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=r[4],s=r[5],u=r[6],c=r[7],h=r[8],f=r[9],l=r[10],v=r[11],M=r[12],m=r[13],d=r[14],b=r[15];return t[0]=s*(l*b-v*d)-f*(u*b-c*d)+m*(u*v-c*l),t[1]=-(n*(l*b-v*d)-f*(a*b-i*d)+m*(a*v-i*l)),t[2]=n*(u*b-c*d)-s*(a*b-i*d)+m*(a*c-i*u),t[3]=-(n*(u*v-c*l)-s*(a*v-i*l)+f*(a*c-i*u)),t[4]=-(o*(l*b-v*d)-h*(u*b-c*d)+M*(u*v-c*l)),t[5]=e*(l*b-v*d)-h*(a*b-i*d)+M*(a*v-i*l),t[6]=-(e*(u*b-c*d)-o*(a*b-i*d)+M*(a*c-i*u)),t[7]=e*(u*v-c*l)-o*(a*v-i*l)+h*(a*c-i*u),t[8]=o*(f*b-v*m)-h*(s*b-c*m)+M*(s*v-c*f),t[9]=-(e*(f*b-v*m)-h*(n*b-i*m)+M*(n*v-i*f)),t[10]=e*(s*b-c*m)-o*(n*b-i*m)+M*(n*c-i*s),t[11]=-(e*(s*v-c*f)-o*(n*v-i*f)+h*(n*c-i*s)),t[12]=-(o*(f*d-l*m)-h*(s*d-u*m)+M*(s*l-u*f)),t[13]=e*(f*d-l*m)-h*(n*d-a*m)+M*(n*l-a*f),t[14]=-(e*(s*d-u*m)-o*(n*d-a*m)+M*(n*u-a*s)),t[15]=e*(s*l-u*f)-o*(n*l-a*f)+h*(n*u-a*s),t}function ar(t){var r=t[0],e=t[1],n=t[2],a=t[3],i=t[4],o=t[5],s=t[6],u=t[7],c=t[8],h=t[9],f=t[10],l=t[11],v=t[12],M=t[13],m=t[14],d=t[15];return(r*o-e*i)*(f*d-l*m)-(r*s-n*i)*(h*d-l*M)+(r*u-a*i)*(h*m-f*M)+(e*s-n*o)*(c*d-l*v)-(e*u-a*o)*(c*m-f*v)+(n*u-a*s)*(c*M-h*v)}function ir(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],c=r[6],h=r[7],f=r[8],l=r[9],v=r[10],M=r[11],m=r[12],d=r[13],b=r[14],_=r[15],p=e[0],x=e[1],g=e[2],y=e[3];return t[0]=p*n+x*s+g*f+y*m,t[1]=p*a+x*u+g*l+y*d,t[2]=p*i+x*c+g*v+y*b,t[3]=p*o+x*h+g*M+y*_,p=e[4],x=e[5],g=e[6],y=e[7],t[4]=p*n+x*s+g*f+y*m,t[5]=p*a+x*u+g*l+y*d,t[6]=p*i+x*c+g*v+y*b,t[7]=p*o+x*h+g*M+y*_,p=e[8],x=e[9],g=e[10],y=e[11],t[8]=p*n+x*s+g*f+y*m,t[9]=p*a+x*u+g*l+y*d,t[10]=p*i+x*c+g*v+y*b,t[11]=p*o+x*h+g*M+y*_,p=e[12],x=e[13],g=e[14],y=e[15],t[12]=p*n+x*s+g*f+y*m,t[13]=p*a+x*u+g*l+y*d,t[14]=p*i+x*c+g*v+y*b,t[15]=p*o+x*h+g*M+y*_,t}function or(t,r,e){var n,a,i,o,s,u,c,h,f,l,v,M,m=e[0],d=e[1],b=e[2];return r===t?(t[12]=r[0]*m+r[4]*d+r[8]*b+r[12],t[13]=r[1]*m+r[5]*d+r[9]*b+r[13],t[14]=r[2]*m+r[6]*d+r[10]*b+r[14],t[15]=r[3]*m+r[7]*d+r[11]*b+r[15]):(n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],u=r[5],c=r[6],h=r[7],f=r[8],l=r[9],v=r[10],M=r[11],t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=u,t[6]=c,t[7]=h,t[8]=f,t[9]=l,t[10]=v,t[11]=M,t[12]=n*m+s*d+f*b+r[12],t[13]=a*m+u*d+l*b+r[13],t[14]=i*m+c*d+v*b+r[14],t[15]=o*m+h*d+M*b+r[15]),t}function sr(t,r,e){var n=e[0],a=e[1],i=e[2];return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=r[3]*n,t[4]=r[4]*a,t[5]=r[5]*a,t[6]=r[6]*a,t[7]=r[7]*a,t[8]=r[8]*i,t[9]=r[9]*i,t[10]=r[10]*i,t[11]=r[11]*i,t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t}function ur(t,r,e,n){var a,i,o,s,u,c,h,f,l,M,m,d,b,_,p,x,g,y,A,F,w,E,C,P,S=n[0],T=n[1],R=n[2],z=Math.hypot(S,T,R);return z<v?null:(S*=z=1/z,T*=z,R*=z,a=Math.sin(e),o=1-(i=Math.cos(e)),s=r[0],u=r[1],c=r[2],h=r[3],f=r[4],l=r[5],M=r[6],m=r[7],d=r[8],b=r[9],_=r[10],p=r[11],x=S*S*o+i,g=T*S*o+R*a,y=R*S*o-T*a,A=S*T*o-R*a,F=T*T*o+i,w=R*T*o+S*a,E=S*R*o+T*a,C=T*R*o-S*a,P=R*R*o+i,t[0]=s*x+f*g+d*y,t[1]=u*x+l*g+b*y,t[2]=c*x+M*g+_*y,t[3]=h*x+m*g+p*y,t[4]=s*A+f*F+d*w,t[5]=u*A+l*F+b*w,t[6]=c*A+M*F+_*w,t[7]=h*A+m*F+p*w,t[8]=s*E+f*C+d*P,t[9]=u*E+l*C+b*P,t[10]=c*E+M*C+_*P,t[11]=h*E+m*C+p*P,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)}function cr(t,r,e){var n=Math.sin(e),a=Math.cos(e),i=r[4],o=r[5],s=r[6],u=r[7],c=r[8],h=r[9],f=r[10],l=r[11];return r!==t&&(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[4]=i*a+c*n,t[5]=o*a+h*n,t[6]=s*a+f*n,t[7]=u*a+l*n,t[8]=c*a-i*n,t[9]=h*a-o*n,t[10]=f*a-s*n,t[11]=l*a-u*n,t}function hr(t,r,e){var n=Math.sin(e),a=Math.cos(e),i=r[0],o=r[1],s=r[2],u=r[3],c=r[8],h=r[9],f=r[10],l=r[11];return r!==t&&(t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=i*a-c*n,t[1]=o*a-h*n,t[2]=s*a-f*n,t[3]=u*a-l*n,t[8]=i*n+c*a,t[9]=o*n+h*a,t[10]=s*n+f*a,t[11]=u*n+l*a,t}function fr(t,r,e){var n=Math.sin(e),a=Math.cos(e),i=r[0],o=r[1],s=r[2],u=r[3],c=r[4],h=r[5],f=r[6],l=r[7];return r!==t&&(t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t[0]=i*a+c*n,t[1]=o*a+h*n,t[2]=s*a+f*n,t[3]=u*a+l*n,t[4]=c*a-i*n,t[5]=h*a-o*n,t[6]=f*a-s*n,t[7]=l*a-u*n,t}function lr(t,r){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function vr(t,r){return t[0]=r[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Mr(t,r,e){var n,a,i,o=e[0],s=e[1],u=e[2],c=Math.hypot(o,s,u);return c<v?null:(o*=c=1/c,s*=c,u*=c,n=Math.sin(r),i=1-(a=Math.cos(r)),t[0]=o*o*i+a,t[1]=s*o*i+u*n,t[2]=u*o*i-s*n,t[3]=0,t[4]=o*s*i-u*n,t[5]=s*s*i+a,t[6]=u*s*i+o*n,t[7]=0,t[8]=o*u*i+s*n,t[9]=s*u*i-o*n,t[10]=u*u*i+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function mr(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function dr(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function br(t,r){var e=Math.sin(r),n=Math.cos(r);return t[0]=n,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _r(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=n+n,u=a+a,c=i+i,h=n*s,f=n*u,l=n*c,v=a*u,M=a*c,m=i*c,d=o*s,b=o*u,_=o*c;return t[0]=1-(v+m),t[1]=f+_,t[2]=l-b,t[3]=0,t[4]=f-_,t[5]=1-(h+m),t[6]=M+d,t[7]=0,t[8]=l+b,t[9]=M-d,t[10]=1-(h+v),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function pr(t,r){var e=new M(3),n=-r[0],a=-r[1],i=-r[2],o=r[3],s=r[4],u=r[5],c=r[6],h=r[7],f=n*n+a*a+i*i+o*o;return f>0?(e[0]=2*(s*o+h*n+u*i-c*a)/f,e[1]=2*(u*o+h*a+c*n-s*i)/f,e[2]=2*(c*o+h*i+s*a-u*n)/f):(e[0]=2*(s*o+h*n+u*i-c*a),e[1]=2*(u*o+h*a+c*n-s*i),e[2]=2*(c*o+h*i+s*a-u*n)),_r(t,r,e),t}function xr(t,r){return t[0]=r[12],t[1]=r[13],t[2]=r[14],t}function gr(t,r){var e=r[0],n=r[1],a=r[2],i=r[4],o=r[5],s=r[6],u=r[8],c=r[9],h=r[10];return t[0]=Math.hypot(e,n,a),t[1]=Math.hypot(i,o,s),t[2]=Math.hypot(u,c,h),t}function yr(t,r){var e=new M(3);gr(e,r);var n=1/e[0],a=1/e[1],i=1/e[2],o=r[0]*n,s=r[1]*a,u=r[2]*i,c=r[4]*n,h=r[5]*a,f=r[6]*i,l=r[8]*n,v=r[9]*a,m=r[10]*i,d=o+h+m,b=0;return d>0?(b=2*Math.sqrt(d+1),t[3]=.25*b,t[0]=(f-v)/b,t[1]=(l-u)/b,t[2]=(s-c)/b):o>h&&o>m?(b=2*Math.sqrt(1+o-h-m),t[3]=(f-v)/b,t[0]=.25*b,t[1]=(s+c)/b,t[2]=(l+u)/b):h>m?(b=2*Math.sqrt(1+h-o-m),t[3]=(l-u)/b,t[0]=(s+c)/b,t[1]=.25*b,t[2]=(f+v)/b):(b=2*Math.sqrt(1+m-o-h),t[3]=(s-c)/b,t[0]=(l+u)/b,t[1]=(f+v)/b,t[2]=.25*b),t}function Ar(t,r,e,n){var a=r[0],i=r[1],o=r[2],s=r[3],u=a+a,c=i+i,h=o+o,f=a*u,l=a*c,v=a*h,M=i*c,m=i*h,d=o*h,b=s*u,_=s*c,p=s*h,x=n[0],g=n[1],y=n[2];return t[0]=(1-(M+d))*x,t[1]=(l+p)*x,t[2]=(v-_)*x,t[3]=0,t[4]=(l-p)*g,t[5]=(1-(f+d))*g,t[6]=(m+b)*g,t[7]=0,t[8]=(v+_)*y,t[9]=(m-b)*y,t[10]=(1-(f+M))*y,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Fr(t,r,e,n,a){var i=r[0],o=r[1],s=r[2],u=r[3],c=i+i,h=o+o,f=s+s,l=i*c,v=i*h,M=i*f,m=o*h,d=o*f,b=s*f,_=u*c,p=u*h,x=u*f,g=n[0],y=n[1],A=n[2],F=a[0],w=a[1],E=a[2],C=(1-(m+b))*g,P=(v+x)*g,S=(M-p)*g,T=(v-x)*y,R=(1-(l+b))*y,z=(d+_)*y,L=(M+p)*A,q=(d-_)*A,B=(1-(l+m))*A;return t[0]=C,t[1]=P,t[2]=S,t[3]=0,t[4]=T,t[5]=R,t[6]=z,t[7]=0,t[8]=L,t[9]=q,t[10]=B,t[11]=0,t[12]=e[0]+F-(C*F+T*w+L*E),t[13]=e[1]+w-(P*F+R*w+q*E),t[14]=e[2]+E-(S*F+z*w+B*E),t[15]=1,t}function wr(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=e+e,s=n+n,u=a+a,c=e*o,h=n*o,f=n*s,l=a*o,v=a*s,M=a*u,m=i*o,d=i*s,b=i*u;return t[0]=1-f-M,t[1]=h+b,t[2]=l-d,t[3]=0,t[4]=h-b,t[5]=1-c-M,t[6]=v+m,t[7]=0,t[8]=l+d,t[9]=v-m,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Er(t,r,e,n,a,i,o){var s=1/(e-r),u=1/(a-n),c=1/(i-o);return t[0]=2*i*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*u,t[6]=0,t[7]=0,t[8]=(e+r)*s,t[9]=(a+n)*u,t[10]=(o+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*c,t[15]=0,t}function Cr(t,r,e,n,a){var i,o=1/Math.tan(r/2);return t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(i=1/(n-a),t[10]=(a+n)*i,t[14]=2*a*n*i):(t[10]=-1,t[14]=-2*n),t}function Pr(t,r,e,n){var a=Math.tan(r.upDegrees*Math.PI/180),i=Math.tan(r.downDegrees*Math.PI/180),o=Math.tan(r.leftDegrees*Math.PI/180),s=Math.tan(r.rightDegrees*Math.PI/180),u=2/(o+s),c=2/(a+i);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-s)*u*.5,t[9]=(a-i)*c*.5,t[10]=n/(e-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*e/(e-n),t[15]=0,t}function Sr(t,r,e,n,a,i,o){var s=1/(r-e),u=1/(n-a),c=1/(i-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(r+e)*s,t[13]=(a+n)*u,t[14]=(o+i)*c,t[15]=1,t}function Tr(t,r,e,n){var a,i,o,s,u,c,h,f,l,M,m=r[0],d=r[1],b=r[2],_=n[0],p=n[1],x=n[2],g=e[0],y=e[1],A=e[2];return Math.abs(m-g)<v&&Math.abs(d-y)<v&&Math.abs(b-A)<v?tr(t):(h=m-g,f=d-y,l=b-A,a=p*(l*=M=1/Math.hypot(h,f,l))-x*(f*=M),i=x*(h*=M)-_*l,o=_*f-p*h,(M=Math.hypot(a,i,o))?(a*=M=1/M,i*=M,o*=M):(a=0,i=0,o=0),s=f*o-l*i,u=l*a-h*o,c=h*i-f*a,(M=Math.hypot(s,u,c))?(s*=M=1/M,u*=M,c*=M):(s=0,u=0,c=0),t[0]=a,t[1]=s,t[2]=h,t[3]=0,t[4]=i,t[5]=u,t[6]=f,t[7]=0,t[8]=o,t[9]=c,t[10]=l,t[11]=0,t[12]=-(a*m+i*d+o*b),t[13]=-(s*m+u*d+c*b),t[14]=-(h*m+f*d+l*b),t[15]=1,t)}function Rr(t,r,e,n){var a=r[0],i=r[1],o=r[2],s=n[0],u=n[1],c=n[2],h=a-e[0],f=i-e[1],l=o-e[2],v=h*h+f*f+l*l;v>0&&(h*=v=1/Math.sqrt(v),f*=v,l*=v);var M=u*l-c*f,m=c*h-s*l,d=s*f-u*h;return(v=M*M+m*m+d*d)>0&&(M*=v=1/Math.sqrt(v),m*=v,d*=v),t[0]=M,t[1]=m,t[2]=d,t[3]=0,t[4]=f*d-l*m,t[5]=l*M-h*d,t[6]=h*m-f*M,t[7]=0,t[8]=h,t[9]=f,t[10]=l,t[11]=0,t[12]=a,t[13]=i,t[14]=o,t[15]=1,t}function zr(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Lr(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function qr(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t[6]=r[6]+e[6],t[7]=r[7]+e[7],t[8]=r[8]+e[8],t[9]=r[9]+e[9],t[10]=r[10]+e[10],t[11]=r[11]+e[11],t[12]=r[12]+e[12],t[13]=r[13]+e[13],t[14]=r[14]+e[14],t[15]=r[15]+e[15],t}function Br(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t[4]=r[4]-e[4],t[5]=r[5]-e[5],t[6]=r[6]-e[6],t[7]=r[7]-e[7],t[8]=r[8]-e[8],t[9]=r[9]-e[9],t[10]=r[10]-e[10],t[11]=r[11]-e[11],t[12]=r[12]-e[12],t[13]=r[13]-e[13],t[14]=r[14]-e[14],t[15]=r[15]-e[15],t}function Dr(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t[8]=r[8]*e,t[9]=r[9]*e,t[10]=r[10]*e,t[11]=r[11]*e,t[12]=r[12]*e,t[13]=r[13]*e,t[14]=r[14]*e,t[15]=r[15]*e,t}function Or(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t[4]=r[4]+e[4]*n,t[5]=r[5]+e[5]*n,t[6]=r[6]+e[6]*n,t[7]=r[7]+e[7]*n,t[8]=r[8]+e[8]*n,t[9]=r[9]+e[9]*n,t[10]=r[10]+e[10]*n,t[11]=r[11]+e[11]*n,t[12]=r[12]+e[12]*n,t[13]=r[13]+e[13]*n,t[14]=r[14]+e[14]*n,t[15]=r[15]+e[15]*n,t}function Ur(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]&&t[8]===r[8]&&t[9]===r[9]&&t[10]===r[10]&&t[11]===r[11]&&t[12]===r[12]&&t[13]===r[13]&&t[14]===r[14]&&t[15]===r[15]}function Ir(t,r){var e=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6],c=t[7],h=t[8],f=t[9],l=t[10],M=t[11],m=t[12],d=t[13],b=t[14],_=t[15],p=r[0],x=r[1],g=r[2],y=r[3],A=r[4],F=r[5],w=r[6],E=r[7],C=r[8],P=r[9],S=r[10],T=r[11],R=r[12],z=r[13],L=r[14],q=r[15];return Math.abs(e-p)<=v*Math.max(1,Math.abs(e),Math.abs(p))&&Math.abs(n-x)<=v*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(a-g)<=v*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(i-y)<=v*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(o-A)<=v*Math.max(1,Math.abs(o),Math.abs(A))&&Math.abs(s-F)<=v*Math.max(1,Math.abs(s),Math.abs(F))&&Math.abs(u-w)<=v*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(c-E)<=v*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(h-C)<=v*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(f-P)<=v*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(l-S)<=v*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(M-T)<=v*Math.max(1,Math.abs(M),Math.abs(T))&&Math.abs(m-R)<=v*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(d-z)<=v*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(b-L)<=v*Math.max(1,Math.abs(b),Math.abs(L))&&Math.abs(_-q)<=v*Math.max(1,Math.abs(_),Math.abs(q))}var Nr=ir,Vr=Br;function jr(){var t=new M(3);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Hr(t){var r=new M(3);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r}function Yr(t){var r=t[0],e=t[1],n=t[2];return Math.hypot(r,e,n)}function kr(t,r,e){var n=new M(3);return n[0]=t,n[1]=r,n[2]=e,n}function Xr(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t}function Gr(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t}function Wr(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t}function Qr(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t}function Kr(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t}function Zr(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t}function $r(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t}function Jr(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t}function te(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t}function re(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t}function ee(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t}function ne(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t}function ae(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t}function ie(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2];return Math.hypot(e,n,a)}function oe(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2];return e*e+n*n+a*a}function se(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n}function ue(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t}function ce(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t}function he(t,r){var e=r[0],n=r[1],a=r[2],i=e*e+n*n+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t}function fe(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]}function le(t,r,e){var n=r[0],a=r[1],i=r[2],o=e[0],s=e[1],u=e[2];return t[0]=a*u-i*s,t[1]=i*o-n*u,t[2]=n*s-a*o,t}function ve(t,r,e,n){var a=r[0],i=r[1],o=r[2];return t[0]=a+n*(e[0]-a),t[1]=i+n*(e[1]-i),t[2]=o+n*(e[2]-o),t}function Me(t,r,e,n,a,i){var o=i*i,s=o*(2*i-3)+1,u=o*(i-2)+i,c=o*(i-1),h=o*(3-2*i);return t[0]=r[0]*s+e[0]*u+n[0]*c+a[0]*h,t[1]=r[1]*s+e[1]*u+n[1]*c+a[1]*h,t[2]=r[2]*s+e[2]*u+n[2]*c+a[2]*h,t}function me(t,r,e,n,a,i){var o=1-i,s=o*o,u=i*i,c=s*o,h=3*i*s,f=3*u*o,l=u*i;return t[0]=r[0]*c+e[0]*h+n[0]*f+a[0]*l,t[1]=r[1]*c+e[1]*h+n[1]*f+a[1]*l,t[2]=r[2]*c+e[2]*h+n[2]*f+a[2]*l,t}function de(t,r){r=r||1;var e=2*m()*Math.PI,n=2*m()-1,a=Math.sqrt(1-n*n)*r;return t[0]=Math.cos(e)*a,t[1]=Math.sin(e)*a,t[2]=n*r,t}function be(t,r,e){var n=r[0],a=r[1],i=r[2],o=e[3]*n+e[7]*a+e[11]*i+e[15];return o=o||1,t[0]=(e[0]*n+e[4]*a+e[8]*i+e[12])/o,t[1]=(e[1]*n+e[5]*a+e[9]*i+e[13])/o,t[2]=(e[2]*n+e[6]*a+e[10]*i+e[14])/o,t}function _e(t,r,e){var n=r[0],a=r[1],i=r[2];return t[0]=n*e[0]+a*e[3]+i*e[6],t[1]=n*e[1]+a*e[4]+i*e[7],t[2]=n*e[2]+a*e[5]+i*e[8],t}function pe(t,r,e){var n=e[0],a=e[1],i=e[2],o=e[3],s=r[0],u=r[1],c=r[2],h=a*c-i*u,f=i*s-n*c,l=n*u-a*s,v=a*l-i*f,M=i*h-n*l,m=n*f-a*h,d=2*o;return h*=d,f*=d,l*=d,v*=2,M*=2,m*=2,t[0]=s+h+v,t[1]=u+f+M,t[2]=c+l+m,t}function xe(t,r,e,n){var a=[],i=[];return a[0]=r[0]-e[0],a[1]=r[1]-e[1],a[2]=r[2]-e[2],i[0]=a[0],i[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),i[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t}function ge(t,r,e,n){var a=[],i=[];return a[0]=r[0]-e[0],a[1]=r[1]-e[1],a[2]=r[2]-e[2],i[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),i[1]=a[1],i[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t}function ye(t,r,e,n){var a=[],i=[];return a[0]=r[0]-e[0],a[1]=r[1]-e[1],a[2]=r[2]-e[2],i[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),i[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),i[2]=a[2],t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t}function Ae(t,r){var e=t[0],n=t[1],a=t[2],i=r[0],o=r[1],s=r[2],u=Math.sqrt(e*e+n*n+a*a)*Math.sqrt(i*i+o*o+s*s),c=u&&fe(t,r)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function Fe(t){return t[0]=0,t[1]=0,t[2]=0,t}function we(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ee(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function Ce(t,r){var e=t[0],n=t[1],a=t[2],i=r[0],o=r[1],s=r[2];return Math.abs(e-i)<=v*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(n-o)<=v*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-s)<=v*Math.max(1,Math.abs(a),Math.abs(s))}var Pe,Se=Qr,Te=Kr,Re=Zr,ze=ie,Le=oe,qe=Yr,Be=se,De=(Pe=jr(),function(t,r,e,n,a,i){var o,s;for(r||(r=3),e||(e=0),s=n?Math.min(n*r+e,t.length):t.length,o=e;o<s;o+=r)Pe[0]=t[o],Pe[1]=t[o+1],Pe[2]=t[o+2],a(Pe,Pe,i),t[o]=Pe[0],t[o+1]=Pe[1],t[o+2]=Pe[2];return t});function Oe(){var t=new M(4);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Ue(t){var r=new M(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r}function Ie(t,r,e,n){var a=new M(4);return a[0]=t,a[1]=r,a[2]=e,a[3]=n,a}function Ne(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t}function Ve(t,r,e,n,a){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t}function je(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t}function He(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t}function Ye(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t[3]=r[3]*e[3],t}function ke(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t[3]=r[3]/e[3],t}function Xe(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t[2]=Math.ceil(r[2]),t[3]=Math.ceil(r[3]),t}function Ge(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t[2]=Math.floor(r[2]),t[3]=Math.floor(r[3]),t}function We(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t[3]=Math.min(r[3],e[3]),t}function Qe(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t[3]=Math.max(r[3],e[3]),t}function Ke(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t[2]=Math.round(r[2]),t[3]=Math.round(r[3]),t}function Ze(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t}function $e(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t}function Je(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2],i=r[3]-t[3];return Math.hypot(e,n,a,i)}function tn(t,r){var e=r[0]-t[0],n=r[1]-t[1],a=r[2]-t[2],i=r[3]-t[3];return e*e+n*n+a*a+i*i}function rn(t){var r=t[0],e=t[1],n=t[2],a=t[3];return Math.hypot(r,e,n,a)}function en(t){var r=t[0],e=t[1],n=t[2],a=t[3];return r*r+e*e+n*n+a*a}function nn(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t}function an(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t}function on(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=e*e+n*n+a*a+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e*o,t[1]=n*o,t[2]=a*o,t[3]=i*o,t}function sn(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]}function un(t,r,e,n){var a=e[0]*n[1]-e[1]*n[0],i=e[0]*n[2]-e[2]*n[0],o=e[0]*n[3]-e[3]*n[0],s=e[1]*n[2]-e[2]*n[1],u=e[1]*n[3]-e[3]*n[1],c=e[2]*n[3]-e[3]*n[2],h=r[0],f=r[1],l=r[2],v=r[3];return t[0]=f*c-l*u+v*s,t[1]=-h*c+l*o-v*i,t[2]=h*u-f*o+v*a,t[3]=-h*s+f*i-l*a,t}function cn(t,r,e,n){var a=r[0],i=r[1],o=r[2],s=r[3];return t[0]=a+n*(e[0]-a),t[1]=i+n*(e[1]-i),t[2]=o+n*(e[2]-o),t[3]=s+n*(e[3]-s),t}function hn(t,r){var e,n,a,i,o,s;r=r||1;do{o=(e=2*m()-1)*e+(n=2*m()-1)*n}while(o>=1);do{s=(a=2*m()-1)*a+(i=2*m()-1)*i}while(s>=1);var u=Math.sqrt((1-o)/s);return t[0]=r*e,t[1]=r*n,t[2]=r*a*u,t[3]=r*i*u,t}function fn(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3];return t[0]=e[0]*n+e[4]*a+e[8]*i+e[12]*o,t[1]=e[1]*n+e[5]*a+e[9]*i+e[13]*o,t[2]=e[2]*n+e[6]*a+e[10]*i+e[14]*o,t[3]=e[3]*n+e[7]*a+e[11]*i+e[15]*o,t}function ln(t,r,e){var n=r[0],a=r[1],i=r[2],o=e[0],s=e[1],u=e[2],c=e[3],h=c*n+s*i-u*a,f=c*a+u*n-o*i,l=c*i+o*a-s*n,v=-o*n-s*a-u*i;return t[0]=h*c+v*-o+f*-u-l*-s,t[1]=f*c+v*-s+l*-o-h*-u,t[2]=l*c+v*-u+h*-s-f*-o,t[3]=r[3],t}function vn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function Mn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function mn(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]}function dn(t,r){var e=t[0],n=t[1],a=t[2],i=t[3],o=r[0],s=r[1],u=r[2],c=r[3];return Math.abs(e-o)<=v*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-s)<=v*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-u)<=v*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(i-c)<=v*Math.max(1,Math.abs(i),Math.abs(c))}var bn=He,_n=Ye,pn=ke,xn=Je,gn=tn,yn=rn,An=en,Fn=function(){var t=Oe();return function(r,e,n,a,i,o){var s,u;for(e||(e=4),n||(n=0),u=a?Math.min(a*e+n,r.length):r.length,s=n;s<u;s+=e)t[0]=r[s],t[1]=r[s+1],t[2]=r[s+2],t[3]=r[s+3],i(t,t,o),r[s]=t[0],r[s+1]=t[1],r[s+2]=t[2],r[s+3]=t[3];return r}}();function wn(){var t=new M(4);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function En(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Cn(t,r,e){e*=.5;var n=Math.sin(e);return t[0]=n*r[0],t[1]=n*r[1],t[2]=n*r[2],t[3]=Math.cos(e),t}function Pn(t,r){var e=2*Math.acos(r[3]),n=Math.sin(e/2);return n>v?(t[0]=r[0]/n,t[1]=r[1]/n,t[2]=r[2]/n):(t[0]=1,t[1]=0,t[2]=0),e}function Sn(t,r){var e=aa(t,r);return Math.acos(2*e*e-1)}function Tn(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=e[0],u=e[1],c=e[2],h=e[3];return t[0]=n*h+o*s+a*c-i*u,t[1]=a*h+o*u+i*s-n*c,t[2]=i*h+o*c+n*u-a*s,t[3]=o*h-n*s-a*u-i*c,t}function Rn(t,r,e){e*=.5;var n=r[0],a=r[1],i=r[2],o=r[3],s=Math.sin(e),u=Math.cos(e);return t[0]=n*u+o*s,t[1]=a*u+i*s,t[2]=i*u-a*s,t[3]=o*u-n*s,t}function zn(t,r,e){e*=.5;var n=r[0],a=r[1],i=r[2],o=r[3],s=Math.sin(e),u=Math.cos(e);return t[0]=n*u-i*s,t[1]=a*u+o*s,t[2]=i*u+n*s,t[3]=o*u-a*s,t}function Ln(t,r,e){e*=.5;var n=r[0],a=r[1],i=r[2],o=r[3],s=Math.sin(e),u=Math.cos(e);return t[0]=n*u+a*s,t[1]=a*u-n*s,t[2]=i*u+o*s,t[3]=o*u-i*s,t}function qn(t,r){var e=r[0],n=r[1],a=r[2];return t[0]=e,t[1]=n,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-n*n-a*a)),t}function Bn(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=Math.sqrt(e*e+n*n+a*a),s=Math.exp(i),u=o>0?s*Math.sin(o)/o:0;return t[0]=e*u,t[1]=n*u,t[2]=a*u,t[3]=s*Math.cos(o),t}function Dn(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=Math.sqrt(e*e+n*n+a*a),s=o>0?Math.atan2(o,i)/o:0;return t[0]=e*s,t[1]=n*s,t[2]=a*s,t[3]=.5*Math.log(e*e+n*n+a*a+i*i),t}function On(t,r,e){return Dn(t,r),na(t,t,e),Bn(t,t),t}function Un(t,r,e,n){var a,i,o,s,u,c=r[0],h=r[1],f=r[2],l=r[3],M=e[0],m=e[1],d=e[2],b=e[3];return(i=c*M+h*m+f*d+l*b)<0&&(i=-i,M=-M,m=-m,d=-d,b=-b),1-i>v?(a=Math.acos(i),o=Math.sin(a),s=Math.sin((1-n)*a)/o,u=Math.sin(n*a)/o):(s=1-n,u=n),t[0]=s*c+u*M,t[1]=s*h+u*m,t[2]=s*f+u*d,t[3]=s*l+u*b,t}function In(t){var r=m(),e=m(),n=m(),a=Math.sqrt(1-r),i=Math.sqrt(r);return t[0]=a*Math.sin(2*Math.PI*e),t[1]=a*Math.cos(2*Math.PI*e),t[2]=i*Math.sin(2*Math.PI*n),t[3]=i*Math.cos(2*Math.PI*n),t}function Nn(t,r){var e=r[0],n=r[1],a=r[2],i=r[3],o=e*e+n*n+a*a+i*i,s=o?1/o:0;return t[0]=-e*s,t[1]=-n*s,t[2]=-a*s,t[3]=i*s,t}function Vn(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t}function jn(t,r){var e,n=r[0]+r[4]+r[8];if(n>0)e=Math.sqrt(n+1),t[3]=.5*e,e=.5/e,t[0]=(r[5]-r[7])*e,t[1]=(r[6]-r[2])*e,t[2]=(r[1]-r[3])*e;else{var a=0;r[4]>r[0]&&(a=1),r[8]>r[3*a+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;e=Math.sqrt(r[3*a+a]-r[3*i+i]-r[3*o+o]+1),t[a]=.5*e,e=.5/e,t[3]=(r[3*i+o]-r[3*o+i])*e,t[i]=(r[3*i+a]+r[3*a+i])*e,t[o]=(r[3*o+a]+r[3*a+o])*e}return t}function Hn(t,r,e,n){var a=.5*Math.PI/180;r*=a,e*=a,n*=a;var i=Math.sin(r),o=Math.cos(r),s=Math.sin(e),u=Math.cos(e),c=Math.sin(n),h=Math.cos(n);return t[0]=i*u*h-o*s*c,t[1]=o*s*h+i*u*c,t[2]=o*u*c-i*s*h,t[3]=o*u*h+i*s*c,t}function Yn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var kn,Xn,Gn,Wn,Qn,Kn,Zn=Ue,$n=Ie,Jn=Ne,ta=Ve,ra=je,ea=Tn,na=Ze,aa=sn,ia=cn,oa=rn,sa=oa,ua=en,ca=ua,ha=on,fa=mn,la=dn,va=(kn=jr(),Xn=kr(1,0,0),Gn=kr(0,1,0),function(t,r,e){var n=fe(r,e);return n<-.999999?(le(kn,Xn,r),qe(kn)<1e-6&&le(kn,Gn,r),he(kn,kn),Cn(t,kn,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(le(kn,r,e),t[0]=kn[0],t[1]=kn[1],t[2]=kn[2],t[3]=1+n,ha(t,t))}),Ma=(Wn=wn(),Qn=wn(),function(t,r,e,n,a,i){return Un(Wn,r,a,i),Un(Qn,e,n,i),Un(t,Wn,Qn,2*i*(1-i)),t}),ma=(Kn=bt(),function(t,r,e,n){return Kn[0]=e[0],Kn[3]=e[1],Kn[6]=e[2],Kn[1]=n[0],Kn[4]=n[1],Kn[7]=n[2],Kn[2]=-r[0],Kn[5]=-r[1],Kn[8]=-r[2],ha(t,jn(t,Kn))});function da(){var t=new M(8);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function ba(t){var r=new M(8);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r}function _a(t,r,e,n,a,i,o,s){var u=new M(8);return u[0]=t,u[1]=r,u[2]=e,u[3]=n,u[4]=a,u[5]=i,u[6]=o,u[7]=s,u}function pa(t,r,e,n,a,i,o){var s=new M(8);s[0]=t,s[1]=r,s[2]=e,s[3]=n;var u=.5*a,c=.5*i,h=.5*o;return s[4]=u*n+c*e-h*r,s[5]=c*n+h*t-u*e,s[6]=h*n+u*r-c*t,s[7]=-u*t-c*r-h*e,s}function xa(t,r,e){var n=.5*e[0],a=.5*e[1],i=.5*e[2],o=r[0],s=r[1],u=r[2],c=r[3];return t[0]=o,t[1]=s,t[2]=u,t[3]=c,t[4]=n*c+a*u-i*s,t[5]=a*c+i*o-n*u,t[6]=i*c+n*s-a*o,t[7]=-n*o-a*s-i*u,t}function ga(t,r){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*r[0],t[5]=.5*r[1],t[6]=.5*r[2],t[7]=0,t}function ya(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Aa(t,r){var e=wn();yr(e,r);var n=new M(3);return xr(n,r),xa(t,e,n),t}function Fa(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t}function wa(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ea(t,r,e,n,a,i,o,s,u){return t[0]=r,t[1]=e,t[2]=n,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=u,t}var Ca=Jn;function Pa(t,r){return t[0]=r[4],t[1]=r[5],t[2]=r[6],t[3]=r[7],t}var Sa=Jn;function Ta(t,r){return t[4]=r[0],t[5]=r[1],t[6]=r[2],t[7]=r[3],t}function Ra(t,r){var e=r[4],n=r[5],a=r[6],i=r[7],o=-r[0],s=-r[1],u=-r[2],c=r[3];return t[0]=2*(e*c+i*o+n*u-a*s),t[1]=2*(n*c+i*s+a*o-e*u),t[2]=2*(a*c+i*u+e*s-n*o),t}function za(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=.5*e[0],u=.5*e[1],c=.5*e[2],h=r[4],f=r[5],l=r[6],v=r[7];return t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=o*s+a*c-i*u+h,t[5]=o*u+i*s-n*c+f,t[6]=o*c+n*u-a*s+l,t[7]=-n*s-a*u-i*c+v,t}function La(t,r,e){var n=-r[0],a=-r[1],i=-r[2],o=r[3],s=r[4],u=r[5],c=r[6],h=r[7],f=s*o+h*n+u*i-c*a,l=u*o+h*a+c*n-s*i,v=c*o+h*i+s*a-u*n,M=h*o-s*n-u*a-c*i;return Rn(t,r,e),n=t[0],a=t[1],i=t[2],o=t[3],t[4]=f*o+M*n+l*i-v*a,t[5]=l*o+M*a+v*n-f*i,t[6]=v*o+M*i+f*a-l*n,t[7]=M*o-f*n-l*a-v*i,t}function qa(t,r,e){var n=-r[0],a=-r[1],i=-r[2],o=r[3],s=r[4],u=r[5],c=r[6],h=r[7],f=s*o+h*n+u*i-c*a,l=u*o+h*a+c*n-s*i,v=c*o+h*i+s*a-u*n,M=h*o-s*n-u*a-c*i;return zn(t,r,e),n=t[0],a=t[1],i=t[2],o=t[3],t[4]=f*o+M*n+l*i-v*a,t[5]=l*o+M*a+v*n-f*i,t[6]=v*o+M*i+f*a-l*n,t[7]=M*o-f*n-l*a-v*i,t}function Ba(t,r,e){var n=-r[0],a=-r[1],i=-r[2],o=r[3],s=r[4],u=r[5],c=r[6],h=r[7],f=s*o+h*n+u*i-c*a,l=u*o+h*a+c*n-s*i,v=c*o+h*i+s*a-u*n,M=h*o-s*n-u*a-c*i;return Ln(t,r,e),n=t[0],a=t[1],i=t[2],o=t[3],t[4]=f*o+M*n+l*i-v*a,t[5]=l*o+M*a+v*n-f*i,t[6]=v*o+M*i+f*a-l*n,t[7]=M*o-f*n-l*a-v*i,t}function Da(t,r,e){var n=e[0],a=e[1],i=e[2],o=e[3],s=r[0],u=r[1],c=r[2],h=r[3];return t[0]=s*o+h*n+u*i-c*a,t[1]=u*o+h*a+c*n-s*i,t[2]=c*o+h*i+s*a-u*n,t[3]=h*o-s*n-u*a-c*i,s=r[4],u=r[5],c=r[6],h=r[7],t[4]=s*o+h*n+u*i-c*a,t[5]=u*o+h*a+c*n-s*i,t[6]=c*o+h*i+s*a-u*n,t[7]=h*o-s*n-u*a-c*i,t}function Oa(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=e[0],u=e[1],c=e[2],h=e[3];return t[0]=n*h+o*s+a*c-i*u,t[1]=a*h+o*u+i*s-n*c,t[2]=i*h+o*c+n*u-a*s,t[3]=o*h-n*s-a*u-i*c,s=e[4],u=e[5],c=e[6],h=e[7],t[4]=n*h+o*s+a*c-i*u,t[5]=a*h+o*u+i*s-n*c,t[6]=i*h+o*c+n*u-a*s,t[7]=o*h-n*s-a*u-i*c,t}function Ua(t,r,e,n){if(Math.abs(n)<v)return Fa(t,r);var a=Math.hypot(e[0],e[1],e[2]);n*=.5;var i=Math.sin(n),o=i*e[0]/a,s=i*e[1]/a,u=i*e[2]/a,c=Math.cos(n),h=r[0],f=r[1],l=r[2],M=r[3];t[0]=h*c+M*o+f*u-l*s,t[1]=f*c+M*s+l*o-h*u,t[2]=l*c+M*u+h*s-f*o,t[3]=M*c-h*o-f*s-l*u;var m=r[4],d=r[5],b=r[6],_=r[7];return t[4]=m*c+_*o+d*u-b*s,t[5]=d*c+_*s+b*o-m*u,t[6]=b*c+_*u+m*s-d*o,t[7]=_*c-m*o-d*s-b*u,t}function Ia(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t[4]=r[4]+e[4],t[5]=r[5]+e[5],t[6]=r[6]+e[6],t[7]=r[7]+e[7],t}function Na(t,r,e){var n=r[0],a=r[1],i=r[2],o=r[3],s=e[4],u=e[5],c=e[6],h=e[7],f=r[4],l=r[5],v=r[6],M=r[7],m=e[0],d=e[1],b=e[2],_=e[3];return t[0]=n*_+o*m+a*b-i*d,t[1]=a*_+o*d+i*m-n*b,t[2]=i*_+o*b+n*d-a*m,t[3]=o*_-n*m-a*d-i*b,t[4]=n*h+o*s+a*c-i*u+f*_+M*m+l*b-v*d,t[5]=a*h+o*u+i*s-n*c+l*_+M*d+v*m-f*b,t[6]=i*h+o*c+n*u-a*s+v*_+M*b+f*d-l*m,t[7]=o*h-n*s-a*u-i*c+M*_-f*m-l*d-v*b,t}var Va=Na;function ja(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t[4]=r[4]*e,t[5]=r[5]*e,t[6]=r[6]*e,t[7]=r[7]*e,t}var Ha=aa;function Ya(t,r,e,n){var a=1-n;return Ha(r,e)<0&&(n=-n),t[0]=r[0]*a+e[0]*n,t[1]=r[1]*a+e[1]*n,t[2]=r[2]*a+e[2]*n,t[3]=r[3]*a+e[3]*n,t[4]=r[4]*a+e[4]*n,t[5]=r[5]*a+e[5]*n,t[6]=r[6]*a+e[6]*n,t[7]=r[7]*a+e[7]*n,t}function ka(t,r){var e=Qa(r);return t[0]=-r[0]/e,t[1]=-r[1]/e,t[2]=-r[2]/e,t[3]=r[3]/e,t[4]=-r[4]/e,t[5]=-r[5]/e,t[6]=-r[6]/e,t[7]=r[7]/e,t}function Xa(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=r[3],t[4]=-r[4],t[5]=-r[5],t[6]=-r[6],t[7]=r[7],t}var Ga=oa,Wa=Ga,Qa=ua,Ka=Qa;function Za(t,r){var e=Qa(r);if(e>0){e=Math.sqrt(e);var n=r[0]/e,a=r[1]/e,i=r[2]/e,o=r[3]/e,s=r[4],u=r[5],c=r[6],h=r[7],f=n*s+a*u+i*c+o*h;t[0]=n,t[1]=a,t[2]=i,t[3]=o,t[4]=(s-n*f)/e,t[5]=(u-a*f)/e,t[6]=(c-i*f)/e,t[7]=(h-o*f)/e}return t}function $a(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function Ja(t,r){return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]&&t[3]===r[3]&&t[4]===r[4]&&t[5]===r[5]&&t[6]===r[6]&&t[7]===r[7]}function ti(t,r){var e=t[0],n=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6],c=t[7],h=r[0],f=r[1],l=r[2],M=r[3],m=r[4],d=r[5],b=r[6],_=r[7];return Math.abs(e-h)<=v*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-f)<=v*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(a-l)<=v*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-M)<=v*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(o-m)<=v*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(s-d)<=v*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(u-b)<=v*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-_)<=v*Math.max(1,Math.abs(c),Math.abs(_))}function ri(){var t=new M(2);return M!=Float32Array&&(t[0]=0,t[1]=0),t}function ei(t){var r=new M(2);return r[0]=t[0],r[1]=t[1],r}function ni(t,r){var e=new M(2);return e[0]=t,e[1]=r,e}function ai(t,r){return t[0]=r[0],t[1]=r[1],t}function ii(t,r,e){return t[0]=r,t[1]=e,t}function oi(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t}function si(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t}function ui(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t}function ci(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t}function hi(t,r){return t[0]=Math.ceil(r[0]),t[1]=Math.ceil(r[1]),t}function fi(t,r){return t[0]=Math.floor(r[0]),t[1]=Math.floor(r[1]),t}function li(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t}function vi(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t}function Mi(t,r){return t[0]=Math.round(r[0]),t[1]=Math.round(r[1]),t}function mi(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t}function di(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t}function bi(t,r){var e=r[0]-t[0],n=r[1]-t[1];return Math.hypot(e,n)}function _i(t,r){var e=r[0]-t[0],n=r[1]-t[1];return e*e+n*n}function pi(t){var r=t[0],e=t[1];return Math.hypot(r,e)}function xi(t){var r=t[0],e=t[1];return r*r+e*e}function gi(t,r){return t[0]=-r[0],t[1]=-r[1],t}function yi(t,r){return t[0]=1/r[0],t[1]=1/r[1],t}function Ai(t,r){var e=r[0],n=r[1],a=e*e+n*n;return a>0&&(a=1/Math.sqrt(a)),t[0]=r[0]*a,t[1]=r[1]*a,t}function Fi(t,r){return t[0]*r[0]+t[1]*r[1]}function wi(t,r,e){var n=r[0]*e[1]-r[1]*e[0];return t[0]=t[1]=0,t[2]=n,t}function Ei(t,r,e,n){var a=r[0],i=r[1];return t[0]=a+n*(e[0]-a),t[1]=i+n*(e[1]-i),t}function Ci(t,r){r=r||1;var e=2*m()*Math.PI;return t[0]=Math.cos(e)*r,t[1]=Math.sin(e)*r,t}function Pi(t,r,e){var n=r[0],a=r[1];return t[0]=e[0]*n+e[2]*a,t[1]=e[1]*n+e[3]*a,t}function Si(t,r,e){var n=r[0],a=r[1];return t[0]=e[0]*n+e[2]*a+e[4],t[1]=e[1]*n+e[3]*a+e[5],t}function Ti(t,r,e){var n=r[0],a=r[1];return t[0]=e[0]*n+e[3]*a+e[6],t[1]=e[1]*n+e[4]*a+e[7],t}function Ri(t,r,e){var n=r[0],a=r[1];return t[0]=e[0]*n+e[4]*a+e[12],t[1]=e[1]*n+e[5]*a+e[13],t}function zi(t,r,e,n){var a=r[0]-e[0],i=r[1]-e[1],o=Math.sin(n),s=Math.cos(n);return t[0]=a*s-i*o+e[0],t[1]=a*o+i*s+e[1],t}function Li(t,r){var e=t[0],n=t[1],a=r[0],i=r[1],o=Math.sqrt(e*e+n*n)*Math.sqrt(a*a+i*i),s=o&&(e*a+n*i)/o;return Math.acos(Math.min(Math.max(s,-1),1))}function qi(t){return t[0]=0,t[1]=0,t}function Bi(t){return"vec2("+t[0]+", "+t[1]+")"}function Di(t,r){return t[0]===r[0]&&t[1]===r[1]}function Oi(t,r){var e=t[0],n=t[1],a=r[0],i=r[1];return Math.abs(e-a)<=v*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(n-i)<=v*Math.max(1,Math.abs(n),Math.abs(i))}var Ui=pi,Ii=si,Ni=ui,Vi=ci,ji=bi,Hi=_i,Yi=xi,ki=function(){var t=ri();return function(r,e,n,a,i,o){var s,u;for(e||(e=2),n||(n=0),u=a?Math.min(a*e+n,r.length):r.length,s=n;s<u;s+=e)t[0]=r[s],t[1]=r[s+1],i(t,t,o),r[s]=t[0],r[s+1]=t[1];return r}}()},4558:(t,r,e)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Example=void 0;const n=e(4160);class a extends n.Initializable{showSpinner(){document.getElementsByClassName("spinner").item(0).style.display="inline"}hideSpinner(){document.getElementsByClassName("spinner").item(0).style.display="none"}expose(){window.canvas=this.canvas,window.context=this.canvas.context,window.controller=this.canvas.controller,window.renderer=this.renderer}initialize(t){const r=this.onInitialize(t);return this.renderer.loadingStatus$.subscribe((t=>{t===n.LoadingStatus.Finished?this.hideSpinner():t===n.LoadingStatus.Started&&this.showSpinner()})),this.expose(),r}uninitialize(){this.onUninitialize()}enableFullscreenOnCtrlClick(){const t=this.canvas.element;t.addEventListener("click",(r=>{r.ctrlKey&&n.viewer.Fullscreen.toggle(t)}))}}r.Example=a},4543:t=>{t.exports="\nprecision lowp float;\n\n\n#if __VERSION__ == 100\n    #define texture(sampler, coord) texture2D(sampler, coord)\n#else \n    #define varying in\n#endif\n\n\n\nuniform sampler2D u_texture;\nuniform bool u_textured;\n\n\n#if __VERSION__ == 100\n    #define fragColor gl_FragColor\n#else\n    layout(location = 0) out vec4 fragColor;\n#endif\n\n\nvarying vec4 v_vertex;\nvarying vec2 v_uv;\n\nin vec4 v_clipPos;\nuniform bool u_enableClipping;\n\nbool shouldBeClipped (vec4 pos) {\n    vec3 lowerCheck = step(pos.xyz, vec3(-pos.w));\n    vec3 upperCheck = step(vec3(pos.w), pos.xyz);\n    return any(bvec3(lowerCheck)) || any(bvec3(upperCheck));\n}\n\nvoid main(void)\n{\n    vec4 diffuse = vec4(v_vertex.xyz * 0.5 + 0.5, 1.0);\n\n    if (u_textured) {\n        diffuse = texture(u_texture, v_uv);\n    }\n    if (u_enableClipping && shouldBeClipped(v_clipPos)) {\n        diffuse *= vec4(1.0, 0.0, 0.0, 1.0);\n        // discard;\n    }\n    fragColor = diffuse;\n}\n"},1272:t=>{t.exports="\nprecision lowp float;\n\n\n#if __VERSION__ == 100\n    #define texture(sampler, coord) texture2D(sampler, coord)\n#else\n    #define varying out\n#endif\n\n\n\n#if __VERSION__ == 100\n    attribute vec3 a_vertex;\n    attribute vec2 a_texCoord;\n#else\n    layout(location = 0) in vec3 a_vertex;\n    layout(location = 1) in vec2 a_texCoord;\n#endif\n\n\nuniform mat4 u_viewProjection;\nuniform mat4 u_model;\n\nuniform mat4 u_observedTransform;\nout vec4 v_clipPos;\n\nvarying vec4 v_vertex;\nvarying vec2 v_uv;\nvarying vec3 v_normal;\n\nvoid main()\n{\n    v_vertex = u_model * vec4(a_vertex, 1.0);\n    v_uv = a_texCoord;\n    v_normal = normalize(a_vertex);\n\n    vec4 pos = u_model * vec4(a_vertex, 1.0);\n    v_clipPos = u_observedTransform * pos;\n\n    gl_Position = u_viewProjection *  v_vertex;\n}\n"},8469:t=>{t.exports="precision lowp float;\n\nlayout(location = 0) out vec4 fragColor;\n\nin vec4 v_color;\n\nvoid main(void)\n{\n    fragColor = v_color;\n}\n"},302:t=>{t.exports="precision lowp float;\n\nlayout(location = 0) in vec3 a_vertex;\nlayout(location = 1) in vec3 a_color;\n\nuniform mat4 u_viewProjection;\n\nout vec4 v_color;\n\nvoid main()\n{\n    v_color = vec4(a_color, 1.0);\n\n    gl_Position = u_viewProjection * vec4(a_vertex, 1.0);\n}\n"},4160:r=>{"use strict";r.exports=t}},e={};function n(t){var a=e[t];if(void 0!==a)return a.exports;var i=e[t]={exports:{}};return r[t](i,i.exports,n),i.exports}n.d=(t,r)=>{for(var e in r)n.o(r,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:r[e]})},n.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};return(()=>{"use strict";var t=a;Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultSceneExample=void 0;const r=n(4160),e=n(3659),i=n(4558);class o extends r.Renderer{constructor(){super(...arguments),this._renderFrustumToFar=!0,this._frustumNearColor=e.vec3.fromValues(1,1,1),this._frustumFarColor=e.vec3.fromValues(.5,.5,.5),this._enableClipping=!0,this._observedEye=e.vec3.fromValues(0,0,5),this._observedCenter=e.vec3.fromValues(0,0,0),this._observedUp=e.vec3.fromValues(0,1,0),this._observedNear=1,this._observedFar=5}onInitialize(t,a,i){const o=t.gl,s=this._context.gl2facade;this._defaultFBO=new r.DefaultFramebuffer(t,"DefaultFBO"),this._defaultFBO.initialize(),this._observedCamera=new r.Camera(this._observedEye,this._observedCenter,this._observedUp),this._observedCamera.near=this._observedNear,this._observedCamera.far=this._observedFar;const u=r.Wizard.queryInternalTextureFormat(this._context,o.RGBA,r.Wizard.Precision.half);this._observedColorRender=new r.Texture2D(this._context,"ObservedColorRender"),this._observedColorRender.initialize(1,1,u[0],o.RGBA,u[1]),this._observedColorRender.filter(o.LINEAR,o.LINEAR),this._observedDepthBuffer=new r.Renderbuffer(this._context,"ObservedDepthBuffer"),this._observedDepthBuffer.initialize(1,1,o.DEPTH_COMPONENT16),this._observedFramebuffer=new r.Framebuffer(this._context,"ObservedFramebuffer"),this._observedFramebuffer.initialize([[s.COLOR_ATTACHMENT0,this._observedColorRender],[o.DEPTH_ATTACHMENT,this._observedDepthBuffer]]),this._cuboid=new r.CuboidGeometry(t,"Cuboid",!0,[2,2,2]),this._cuboid.initialize();const c=new r.Shader(t,o.VERTEX_SHADER,"mesh-clipping.vert");c.initialize(n(1272));const h=new r.Shader(t,o.FRAGMENT_SHADER,"mesh-clipping.frag");h.initialize(n(4543)),this._program=new r.Program(t,"CubeProgram"),this._program.initialize([c,h],!1),this._program.attribute("a_vertex",this._cuboid.vertexLocation),this._program.attribute("a_texCoord",this._cuboid.uvCoordLocation),this._program.link(),this._program.bind(),this._uViewProjection=this._program.uniform("u_viewProjection"),this._uObservedTransform=this._program.uniform("u_observedTransform"),this._uEnableClipping=this._program.uniform("u_enableClipping");const f=e.mat4.identity(e.mat4.create());o.uniformMatrix4fv(this._program.uniform("u_model"),!1,f),o.uniform1i(this._program.uniform("u_texture"),0),o.uniform1i(this._program.uniform("u_textured"),!1),this._texture=new r.Texture2D(t,"Texture"),this._texture.initialize(1,1,o.RGB,o.RGB,o.UNSIGNED_BYTE),this._texture.wrap(o.REPEAT,o.REPEAT),this._texture.filter(o.LINEAR,o.LINEAR_MIPMAP_LINEAR),this._texture.maxAnisotropy(r.Texture2D.MAX_ANISOTROPY),this._texture.fetch("/examples/data/blue-painted-planks-diff-1k-modified.webp").then((()=>{const r=t.gl;this._program.bind(),r.uniform1i(this._program.uniform("u_textured"),!0),this.finishLoading(),this.invalidate(!0)})),this._blit=new r.BlitPass(this._context),this._blit.initialize(),this._camera=new r.Camera,this._camera.center=e.vec3.fromValues(0,0,0),this._camera.up=e.vec3.fromValues(0,1,0),this._camera.eye=e.vec3.fromValues(0,0,5),this._camera.near=.5,this._camera.far=100,this._navigation=new r.Navigation(a,i),this._navigation.camera=this._camera,this._labelPass=new r.LabelRenderPass(t),this._labelPass.initialize(),this.updateObservedFrustum(this._observedCamera),this._frustumBuffer=o.createBuffer(),o.bindBuffer(o.ARRAY_BUFFER,this._frustumBuffer),o.bufferData(o.ARRAY_BUFFER,this._frustumData,o.STATIC_DRAW);const l=new r.Shader(this._context,o.VERTEX_SHADER,"lines.vert");l.initialize(n(302));const v=new r.Shader(this._context,o.FRAGMENT_SHADER,"lines.frag");return v.initialize(n(8469)),this._frustumProgram=new r.Program(this._context,"FrustumLinesProgram"),this._frustumProgram.initialize([l,v],!1),this._frustumProgram.link(),this._frustumProgram.bind(),this._frustumProgram.attribute("a_vertex",0),this._frustumProgram.attribute("a_color",1),this._labelPass.camera=this._camera,this._labelPass.target=this._defaultFBO,this._labelPass.depthMask=!1,r.FontFace.fromFile("./data/opensans2048p160d16.fnt",t).then((t=>{this.setupLabels(),this.updateObservedFrustum(this._observedCamera);for(const r of this._labelPass.labels)r.fontFace=t;this._fontFace=t,this.finishLoading(),this.invalidate(!0)})).catch((t=>r.auxiliaries.log(r.auxiliaries.LogLevel.Error,t))),!0}onUninitialize(){super.uninitialize(),this._cuboid.uninitialize(),this._program.uninitialize(),this._context.gl.deleteBuffer(this._frustumBuffer),this._frustumProgram.uninitialize(),this._labelPass.uninitialize(),this._defaultFBO.uninitialize()}onDiscarded(){this._altered.alter("canvasSize"),this._altered.alter("clearColor"),this._altered.alter("frameSize"),this._altered.alter("multiFrameNumber")}onUpdate(){return this._navigation.update(),this._altered.any||this._camera.altered}onPrepare(){this._altered.frameSize&&(this._observedFramebuffer.resize(this._frameSize[0],this._frameSize[1]),this._observedCamera.viewport=this._canvasSize,this._camera.viewport=this._canvasSize,this._zoomSrcBounds=e.vec4.fromValues(0,0,this._frameSize[0],this._frameSize[1])),this._altered.canvasSize&&(this._camera.aspect=this._canvasSize[0]/this._canvasSize[1],this._observedCamera.aspect=this._canvasSize[0]/this._canvasSize[1],this._camera.viewport=this._canvasSize,this._observedCamera.viewport=this._canvasSize,this._zoomDstBounds=e.vec4.fromValues(this._canvasSize[0]*(1-.2*this._camera.aspect),this._canvasSize[1]*(1-.2*this._camera.aspect),this._canvasSize[0]*(1-.008*this._camera.aspect),this._canvasSize[1]*(1-.008*this._camera.aspect))),this._altered.clearColor&&(this._observedFramebuffer.clearColor(this._clearColor),this._defaultFBO.clearColor(this._clearColor)),this._altered.reset(),this._camera.altered=!1,this._observedCamera.altered=!1}onFrame(t){this.observedFrame(),this.actualFrame()}observedFrame(){const t=this._context.gl;this._observedFramebuffer.bind(),this._observedFramebuffer.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT,!1,!1),t.viewport(0,0,this._frameSize[0],this._frameSize[1]),t.disable(t.CULL_FACE),t.enable(t.DEPTH_TEST),this._texture.bind(t.TEXTURE0),this._program.bind(),t.uniformMatrix4fv(this._uViewProjection,!1,this._observedCamera.viewProjection),this._cuboid.bind(),this._cuboid.draw(),this._cuboid.unbind(),this._program.unbind(),this._texture.unbind(t.TEXTURE0),t.cullFace(t.BACK),t.disable(t.CULL_FACE),this._observedFramebuffer.unbind()}actualFrame(){const t=this._context.gl;this._defaultFBO.bind(),this._defaultFBO.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT,!1,!1),t.viewport(0,0,this._frameSize[0],this._frameSize[1]),t.enable(t.CULL_FACE),t.cullFace(t.BACK),t.enable(t.DEPTH_TEST),this._texture.bind(t.TEXTURE0),this._program.bind(),t.uniformMatrix4fv(this._uViewProjection,!1,this._camera.viewProjection),t.uniformMatrix4fv(this._uObservedTransform,!1,this._observedCamera.viewProjection),t.uniform1i(this._uEnableClipping,+this._enableClipping),this._cuboid.bind(),this._cuboid.draw(),this._cuboid.unbind(),this._program.unbind(),this._texture.unbind(t.TEXTURE0),this._frustumProgram.bind(),t.uniformMatrix4fv(this._frustumProgram.uniform("u_viewProjection"),t.GL_FALSE,this._camera.viewProjection),this.updateObservedFrustum(this._observedCamera),this._frustumBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._frustumBuffer),t.bufferData(t.ARRAY_BUFFER,this._frustumData,t.STATIC_DRAW),t.vertexAttribPointer(0,3,t.FLOAT,t.FALSE,6*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(1,3,t.FLOAT,t.FALSE,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),t.enableVertexAttribArray(0),t.enableVertexAttribArray(1),t.drawArrays(t.LINES,0,this._frustumData.length/6),t.bindBuffer(t.ARRAY_BUFFER,r.Buffer.DEFAULT_BUFFER),t.disableVertexAttribArray(0),t.disableVertexAttribArray(1),this._frustumProgram.unbind(),t.cullFace(t.BACK),t.disable(t.CULL_FACE)}onSwap(){this._blit.framebuffer=this._observedFramebuffer,this._blit.readBuffer=this._context.gl2facade.COLOR_ATTACHMENT0,this._blit.target=this._defaultFBO,this._blit.drawBuffer=this._context.gl.BACK,this._blit.srcBounds=this._zoomSrcBounds,this._blit.dstBounds=this._zoomDstBounds,this._blit.frame()}vertFovToHorFov(t,r){return 2*Math.atan(Math.tan(t/2)*r)}calculateSideAndRUp(t,r){const n=e.vec3.cross(e.vec3.create(),t,r);e.vec3.normalize(n,n);const a=e.vec3.cross(e.vec3.create(),n,t);return e.vec3.normalize(a,a),{side:n,rUp:a}}buildCorner(t,r,n,a,i,o,s){return e.vec3.add(t,t,r),e.vec3.add(t,t,n),e.vec3.scaleAndAdd(t,t,a,i),e.vec3.scaleAndAdd(t,t,o,s)}updateObservedFrustum(t){const r=t.eye,n=t.near,a=t.far,i=e.vec3.sub(e.vec3.create(),t.center,r);e.vec3.normalize(i,i);const o=t.up,s=t.fovy*Math.PI/180,u=s/2,c=Math.tan(u),h=this.vertFovToHorFov(s,t.aspect)/2,f=Math.tan(h),{side:l,rUp:v}=this.calculateSideAndRUp(i,o),M=f*n,m=c*n,d=e.vec3.scale(e.vec3.create(),l,M),b=e.vec3.scale(e.vec3.create(),v,m),_=e.vec3.scale(e.vec3.create(),i,n),p=f*a,x=c*a,g=e.vec3.scale(e.vec3.create(),l,p),y=e.vec3.scale(e.vec3.create(),v,x),A=e.vec3.scale(e.vec3.create(),i,a),F=this.buildCorner(e.vec3.create(),r,_,b,-1,d,-1),w=this.buildCorner(e.vec3.create(),r,_,b,-1,d,1),E=this.buildCorner(e.vec3.create(),r,_,b,1,d,-1),C=this.buildCorner(e.vec3.create(),r,_,b,1,d,1),P=this.buildCorner(e.vec3.create(),r,A,y,-1,g,-1),S=this.buildCorner(e.vec3.create(),r,A,y,-1,g,1),T=this.buildCorner(e.vec3.create(),r,A,y,1,g,-1),R=this.buildCorner(e.vec3.create(),r,A,y,1,g,1),z=this._renderFrustumToFar?19:11,L=new Float32Array(2*z*6);let q=0;const B=this._frustumNearColor,D=this._frustumFarColor;L.set(F,3*q++),L.set(B,3*q++),L.set(w,3*q++),L.set(B,3*q++),L.set(w,3*q++),L.set(B,3*q++),L.set(C,3*q++),L.set(B,3*q++),L.set(C,3*q++),L.set(B,3*q++),L.set(E,3*q++),L.set(B,3*q++),L.set(E,3*q++),L.set(B,3*q++),L.set(F,3*q++),L.set(B,3*q++),L.set(t.eye,3*q++),L.set(B,3*q++),L.set(F,3*q++),L.set(B,3*q++),L.set(t.eye,3*q++),L.set(B,3*q++),L.set(w,3*q++),L.set(B,3*q++),L.set(t.eye,3*q++),L.set(B,3*q++),L.set(C,3*q++),L.set(B,3*q++),L.set(t.eye,3*q++),L.set(B,3*q++),L.set(E,3*q++),L.set(B,3*q++);const O=this.buildCorner(e.vec3.create(),r,_,b,1.1,d,.5),U=this.buildCorner(e.vec3.create(),r,_,b,1.1,d,-.5),I=this.buildCorner(e.vec3.create(),r,_,b,1.4,d,0);L.set(O,3*q++),L.set(B,3*q++),L.set(U,3*q++),L.set(B,3*q++),L.set(O,3*q++),L.set(B,3*q++),L.set(I,3*q++),L.set(B,3*q++),L.set(U,3*q++),L.set(B,3*q++),L.set(I,3*q++),L.set(B,3*q++),this._renderFrustumToFar&&(L.set(P,3*q++),L.set(D,3*q++),L.set(S,3*q++),L.set(D,3*q++),L.set(S,3*q++),L.set(D,3*q++),L.set(R,3*q++),L.set(D,3*q++),L.set(R,3*q++),L.set(D,3*q++),L.set(T,3*q++),L.set(D,3*q++),L.set(T,3*q++),L.set(D,3*q++),L.set(P,3*q++),L.set(D,3*q++),L.set(F,3*q++),L.set(D,3*q++),L.set(P,3*q++),L.set(D,3*q++),L.set(w,3*q++),L.set(D,3*q++),L.set(S,3*q++),L.set(D,3*q++),L.set(E,3*q++),L.set(D,3*q++),L.set(T,3*q++),L.set(D,3*q++),L.set(C,3*q++),L.set(D,3*q++),L.set(R,3*q++),L.set(D,3*q++)),this._frustumData=L}setupLabels(){const t=new r.Position3DLabel(new r.Text("Near-Clipping-Plane"),r.Label.Type.Dynamic);t.lineAnchor=r.Label.LineAnchor.Center,t.alignment=r.Label.Alignment.Left,t.position=[0,0,0],t.direction=[1,0,0],t.up=[0,1,0],t.fontSize=.3,t.fontSizeUnit=r.Label.Unit.World,t.color.fromHex("#ffffff");const e=new r.Position3DLabel(new r.Text("Far-Clipping-Plane"),r.Label.Type.Dynamic);e.lineAnchor=r.Label.LineAnchor.Center,e.alignment=r.Label.Alignment.Left,e.position=[0,0,0],e.direction=[1,0,0],e.up=[0,1,0],e.fontSize=.3,e.fontSizeUnit=r.Label.Unit.World,e.color.fromHex("#ffffff");const n=new r.Position3DLabel(new r.Text("Up"),r.Label.Type.Dynamic);n.lineAnchor=r.Label.LineAnchor.Bottom,n.alignment=r.Label.Alignment.Center,n.position=[0,0,0],n.direction=[1,0,0],n.up=[0,1,0],n.fontSize=.3,n.fontSizeUnit=r.Label.Unit.World,n.color.fromHex("#ffffff");const a=new r.Projected3DLabel(new r.Text("Eye"),r.Label.Type.Dynamic);a.lineAnchor=r.Label.LineAnchor.Center,a.alignment=r.Label.Alignment.Left,a.position=[0,0,0],a.fontSize=16,a.fontSizeUnit=r.Label.Unit.Mixed,a.color.fromHex("#ffffff"),this._labels=new Array,this._labels[0]=t,this._labels[1]=e,this._labels[2]=n,this._labels[3]=a,this._labelPass.labels=this._labels,this._labelPass.update()}updateLabels(){void 0!==this._labels&&this._labelPass.update()}}class s extends i.Example{onInitialize(t){return this._canvas=new r.Canvas(t,{antialias:!1}),this._canvas.controller.multiFrameNumber=1,this._canvas.framePrecision=r.Wizard.Precision.byte,this._canvas.frameScale=[1,1],this._renderer=new o,this._canvas.renderer=this._renderer,!0}onUninitialize(){this._canvas.dispose(),this._renderer.uninitialize()}get canvas(){return this._canvas}get renderer(){return this._renderer}}t.DefaultSceneExample=s})(),a})()));
//# sourceMappingURL=default-scene-example.js.map