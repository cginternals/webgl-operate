!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("gloperate"));else if("function"==typeof define&&define.amd)define(["gloperate"],t);else{var i="object"==typeof exports?t(require("gloperate")):t(e.gloperate);for(var r in i)("object"==typeof exports?exports:e)[r]=i[r]}}(self,(e=>(()=>{var t={4558:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Example=void 0;const r=i(4160);class s extends r.Initializable{showSpinner(){document.getElementsByClassName("spinner").item(0).style.display="inline"}hideSpinner(){document.getElementsByClassName("spinner").item(0).style.display="none"}expose(){window.canvas=this.canvas,window.context=this.canvas.context,window.controller=this.canvas.controller,window.renderer=this.renderer}initialize(e){const t=this.onInitialize(e);return this.renderer.loadingStatus$.subscribe((e=>{e===r.LoadingStatus.Finished?this.hideSpinner():e===r.LoadingStatus.Started&&this.showSpinner()})),this.expose(),t}uninitialize(){this.onUninitialize()}enableFullscreenOnCtrlClick(){const e=this.canvas.element;e.addEventListener("click",(t=>{t.ctrlKey&&r.viewer.Fullscreen.toggle(e)}))}}t.Example=s},885:e=>{e.exports="\nprecision lowp float;\n\n\n#if __VERSION__ == 100\n    #define texture(sampler, coord) texture2D(sampler, coord)\n#else \n    #define varying in\n#endif\n\n\n\nuniform sampler2D u_texture;\n\n#if __VERSION__ == 100\n    #define fragColor gl_FragColor\n#else\n    layout(location = 0) out vec4 fragColor;\n#endif\n\n\nvarying vec2 v_uv;\n\n\nvoid main(void)\n{\n    fragColor = texture(u_texture, v_uv);\n}\n"},9118:e=>{e.exports="\nprecision lowp float;\n\n\n#if __VERSION__ == 100\n    #define texture(sampler, coord) texture2D(sampler, coord)\n#else\n    #define varying out\n#endif\n\n\n\n#if __VERSION__ == 100\n    attribute vec2 a_vertex;\n\n#else\n    layout(location = 0) in vec2 a_vertex;\n#endif\n\n\nuniform vec2 u_extent;\nuniform vec2 u_offset;\n\nvarying vec2 v_uv;\n\nvoid main()\n{\n    v_uv = a_vertex;\n    gl_Position = vec4(u_offset + u_extent * a_vertex, 0.0, 1.0);\n}\n"},4160:t=>{"use strict";t.exports=e}},i={};function r(e){var s=i[e];if(void 0!==s)return s.exports;var n=i[e]={exports:{}};return t[e](n,n.exports,r),n.exports}var s={};return(()=>{"use strict";var e=s;Object.defineProperty(e,"__esModule",{value:!0}),e.ColorScaleExample=void 0;const t=r(4160),i=r(4160),n=r(4558);class a extends i.Renderer{constructor(){super(...arguments),this._extensions=!1,this._positions=new Array,this._presets=[["smithwalt","viridis",7,!1],["smithwalt","viridis",64,!1],["smithwalt","inferno",7,!1],["smithwalt","inferno",64,!1],["marcosci","cividis",7,!1],["marcosci","cividis",64,!1],["smithwalt","magma",7,!1],["smithwalt","magma",64,!1],["colorbrewer","Greys",4,!0],["colorbrewer","Greys",7,!0],["smithwalt","plasma",7,!1],["smithwalt","plasma",64,!1],["colorbrewer","Spectral",7,!0],["colorbrewer","Spectral",64,!0],["mikhailov","turbo",16,!1],["mikhailov","turbo",128,!1],["colorbrewer","BrBG",7,!0],["colorbrewer","RdBu",64,!0],["colorbrewer","RdYlBu",7,!0],["colorbrewer","PuOr",7,!0],["colorbrewer","OrRd",4,!1],["colorbrewer","OrRd",7,!1],["colorbrewer","RdPu",4,!1],["colorbrewer","RdPu",7,!1],["colorbrewer","Accent",7,!1],["colorbrewer","Paired",7,!1],["colorbrewer","Pastel2",7,!1],["colorbrewer","Dark2",7,!1]],this._labels=new Array,this._textures=new Array}onInitialize(e,s){const n=e.gl;this._defaultFBO=new i.DefaultFramebuffer(this._context,"DefaultFBO"),this._defaultFBO.initialize(),this._ndcrect=new i.NdcFillingRectangle(this._context),this._ndcrect.initialize();const a=new i.Shader(e,n.VERTEX_SHADER,"colorscale.vert");a.initialize(r(9118));const o=new i.Shader(e,n.FRAGMENT_SHADER,"colorscale.frag");o.initialize(r(885)),this._program=new i.Program(e,"ColorScaleProgram"),this._program.initialize([a,o],!1),this._program.attribute("a_position",this._ndcrect.vertexLocation),this._program.link(),this._program.bind(),this._uExtent=this._program.uniform("u_extent"),this._uOffset=this._program.uniform("u_offset"),n.uniform1i(this._program.uniform("u_texture"),0),this._program.unbind(),this._camera=new i.Camera,this._labelPass=new i.LabelRenderPass(e),this._labelPass.initialize(),this._labelPass.camera=this._camera,this._labelPass.target=this._defaultFBO,this._labelPass.depthMask=!1,i.FontFace.fromFile("./data/opensans2048p160d16.fnt",e).then((e=>{for(const t of this._labelPass.labels)t.fontFace=e;this._fontFace=e,this.updateLabels(),this.finishLoading(),this.invalidate()})).catch((e=>t.auxiliaries.log(t.auxiliaries.LogLevel.Error,e)));const l=(r,s,a,o,l)=>{this._positions[r]=t.vec2.create(),this._labels[r]=new i.Position2DLabel(new i.Text(`${s}: ${a} #${o}`),i.Label.Type.Dynamic),this._labels[r].lineAnchor=i.Label.LineAnchor.Top,this._textures[r]=new i.Texture2D(e,`Texture${a}`),this._textures[r].initialize(o,1,n.RGB,n.RGB,n.UNSIGNED_BYTE),i.ColorScale.fromPreset(`data/${s}.json`,a,o).then((e=>{l&&e.invert();const t=e.bitsUI8(i.Color.Space.RGB,!1);this._textures[r].data(t,!0,!1)}))};this._positions.length=this._labels.length=this._textures.length=this._presets.length;for(let e=0;e<this._presets.length;++e)l(e,this._presets[e][0],this._presets[e][1],this._presets[e][2],this._presets[e][3]);this._labelPass.labels=this._labels;for(const e of this._labelPass.labels)e.fontSize=15*i.Label.devicePixelRatio(),e.color.fromHex("#fff"),e.fontSizeUnit=i.Label.Unit.Pixel;return!0}onUninitialize(){super.uninitialize(),this._defaultFBO.uninitialize(),this._labelPass.uninitialize()}onDiscarded(){this._altered.alter("canvasSize"),this._altered.alter("clearColor"),this._altered.alter("frameSize"),this._altered.alter("multiFrameNumber")}onUpdate(){for(const e of this._labelPass.labels)if(e.altered||e.color.altered)return!0;return this._altered.any||this._camera.altered}onPrepare(){if(this._altered.canvasSize){this._camera.aspect=this._canvasSize[0]/this._canvasSize[1],this._camera.viewport=this._canvasSize;for(let e=0;e<this._presets.length;++e){const[t,i]=[e%4,Math.floor(e/4)];this._positions[e][0]=.05*(t+1)+.45*t-1,this._positions[e][1]=.15*(i+1)+.1*i-1+.05}this.updateLabels()}this._altered.clearColor&&this._defaultFBO.clearColor(this._clearColor),this._labelPass.update(),this._altered.reset(),this._camera.altered=!1}onFrame(e){const t=this._context.gl;t.viewport(0,0,this._camera.viewport[0],this._camera.viewport[1]),this._defaultFBO.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT,!0,!1),this._labelPass.frame(),this._program.bind(),t.uniform2f(this._uExtent,.4,.4/7*this._camera.aspect);for(let e=0;e<this._presets.length;++e)this._textures[e].bind(t.TEXTURE0),t.uniform2fv(this._uOffset,this._positions[e]),this._ndcrect.draw();this._program.unbind()}updateLabels(){if(!this._labelPass.initialized)return;const e=t.vec2.fromValues(.5*this._canvasSize[0],.5*this._canvasSize[1]);for(let i=0;i<this._presets.length;++i)this._labels[i].position=t.vec2.mul(t.vec2.create(),this._positions[i],e)}}class o extends n.Example{onInitialize(e){return this._canvas=new i.Canvas(e,{antialias:!1}),this._canvas.controller.multiFrameNumber=1,this._canvas.framePrecision=i.Wizard.Precision.byte,this._canvas.frameScale=[1,1],this._renderer=new a,this._canvas.renderer=this._renderer,!0}onUninitialize(){this._canvas.dispose(),this._renderer.uninitialize()}get canvas(){return this._canvas}get renderer(){return this._renderer}}e.ColorScaleExample=o})(),s})()));
//# sourceMappingURL=colorscale-example.js.map